(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function h(i){if(i.ep)return;i.ep=!0;const t=r(i);fetch(i.href,t)}})();var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ye(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}var Bt={},Kt,ke;function fn(){return ke||(ke=1,Kt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Kt}var Zt={},It={},be;function Ct(){if(be)return It;be=1;let k;const E=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return It.getSymbolSize=function(h){if(!h)throw new Error('"version" cannot be null or undefined');if(h<1||h>40)throw new Error('"version" should be in range from 1 to 40');return h*4+17},It.getSymbolTotalCodewords=function(h){return E[h]},It.getBCHDigit=function(r){let h=0;for(;r!==0;)h++,r>>>=1;return h},It.setToSJISFunction=function(h){if(typeof h!="function")throw new Error('"toSJISFunc" is not a valid function.');k=h},It.isKanjiModeEnabled=function(){return typeof k<"u"},It.toSJIS=function(h){return k(h)},It}var Wt={},_e;function me(){return _e||(_e=1,(function(k){k.L={bit:1},k.M={bit:0},k.Q={bit:3},k.H={bit:2};function E(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return k.L;case"m":case"medium":return k.M;case"q":case"quartile":return k.Q;case"h":case"high":return k.H;default:throw new Error("Unknown EC Level: "+r)}}k.isValid=function(h){return h&&typeof h.bit<"u"&&h.bit>=0&&h.bit<4},k.from=function(h,i){if(k.isValid(h))return h;try{return E(h)}catch{return i}}})(Wt)),Wt}var Vt,Ee;function hn(){if(Ee)return Vt;Ee=1;function k(){this.buffer=[],this.length=0}return k.prototype={get:function(E){const r=Math.floor(E/8);return(this.buffer[r]>>>7-E%8&1)===1},put:function(E,r){for(let h=0;h<r;h++)this.putBit((E>>>r-h-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(E){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),E&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Vt=k,Vt}var Gt,Ie;function pn(){if(Ie)return Gt;Ie=1;function k(E){if(!E||E<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=E,this.data=new Uint8Array(E*E),this.reservedBit=new Uint8Array(E*E)}return k.prototype.set=function(E,r,h,i){const t=E*this.size+r;this.data[t]=h,i&&(this.reservedBit[t]=!0)},k.prototype.get=function(E,r){return this.data[E*this.size+r]},k.prototype.xor=function(E,r,h){this.data[E*this.size+r]^=h},k.prototype.isReserved=function(E,r){return this.reservedBit[E*this.size+r]},Gt=k,Gt}var Qt={},Ae;function mn(){return Ae||(Ae=1,(function(k){const E=Ct().getSymbolSize;k.getRowColCoords=function(h){if(h===1)return[];const i=Math.floor(h/7)+2,t=E(h),u=t===145?26:Math.ceil((t-13)/(2*i-2))*2,e=[t-7];for(let n=1;n<i-1;n++)e[n]=e[n-1]-u;return e.push(6),e.reverse()},k.getPositions=function(h){const i=[],t=k.getRowColCoords(h),u=t.length;for(let e=0;e<u;e++)for(let n=0;n<u;n++)e===0&&n===0||e===0&&n===u-1||e===u-1&&n===0||i.push([t[e],t[n]]);return i}})(Qt)),Qt}var Yt={},Ce;function gn(){if(Ce)return Yt;Ce=1;const k=Ct().getSymbolSize,E=7;return Yt.getPositions=function(h){const i=k(h);return[[0,0],[i-E,0],[0,i-E]]},Yt}var Jt={},Se;function yn(){return Se||(Se=1,(function(k){k.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const E={N1:3,N2:3,N3:40,N4:10};k.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},k.from=function(i){return k.isValid(i)?parseInt(i,10):void 0},k.getPenaltyN1=function(i){const t=i.size;let u=0,e=0,n=0,p=null,v=null;for(let w=0;w<t;w++){e=n=0,p=v=null;for(let g=0;g<t;g++){let s=i.get(w,g);s===p?e++:(e>=5&&(u+=E.N1+(e-5)),p=s,e=1),s=i.get(g,w),s===v?n++:(n>=5&&(u+=E.N1+(n-5)),v=s,n=1)}e>=5&&(u+=E.N1+(e-5)),n>=5&&(u+=E.N1+(n-5))}return u},k.getPenaltyN2=function(i){const t=i.size;let u=0;for(let e=0;e<t-1;e++)for(let n=0;n<t-1;n++){const p=i.get(e,n)+i.get(e,n+1)+i.get(e+1,n)+i.get(e+1,n+1);(p===4||p===0)&&u++}return u*E.N2},k.getPenaltyN3=function(i){const t=i.size;let u=0,e=0,n=0;for(let p=0;p<t;p++){e=n=0;for(let v=0;v<t;v++)e=e<<1&2047|i.get(p,v),v>=10&&(e===1488||e===93)&&u++,n=n<<1&2047|i.get(v,p),v>=10&&(n===1488||n===93)&&u++}return u*E.N3},k.getPenaltyN4=function(i){let t=0;const u=i.data.length;for(let n=0;n<u;n++)t+=i.data[n];return Math.abs(Math.ceil(t*100/u/5)-10)*E.N4};function r(h,i,t){switch(h){case k.Patterns.PATTERN000:return(i+t)%2===0;case k.Patterns.PATTERN001:return i%2===0;case k.Patterns.PATTERN010:return t%3===0;case k.Patterns.PATTERN011:return(i+t)%3===0;case k.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(t/3))%2===0;case k.Patterns.PATTERN101:return i*t%2+i*t%3===0;case k.Patterns.PATTERN110:return(i*t%2+i*t%3)%2===0;case k.Patterns.PATTERN111:return(i*t%3+(i+t)%2)%2===0;default:throw new Error("bad maskPattern:"+h)}}k.applyMask=function(i,t){const u=t.size;for(let e=0;e<u;e++)for(let n=0;n<u;n++)t.isReserved(n,e)||t.xor(n,e,r(i,n,e))},k.getBestMask=function(i,t){const u=Object.keys(k.Patterns).length;let e=0,n=1/0;for(let p=0;p<u;p++){t(p),k.applyMask(p,i);const v=k.getPenaltyN1(i)+k.getPenaltyN2(i)+k.getPenaltyN3(i)+k.getPenaltyN4(i);k.applyMask(p,i),v<n&&(n=v,e=p)}return e}})(Jt)),Jt}var Mt={},Be;function Je(){if(Be)return Mt;Be=1;const k=me(),E=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Mt.getBlocksCount=function(i,t){switch(t){case k.L:return E[(i-1)*4+0];case k.M:return E[(i-1)*4+1];case k.Q:return E[(i-1)*4+2];case k.H:return E[(i-1)*4+3];default:return}},Mt.getTotalCodewordsCount=function(i,t){switch(t){case k.L:return r[(i-1)*4+0];case k.M:return r[(i-1)*4+1];case k.Q:return r[(i-1)*4+2];case k.H:return r[(i-1)*4+3];default:return}},Mt}var Xt={},Pt={},Te;function vn(){if(Te)return Pt;Te=1;const k=new Uint8Array(512),E=new Uint8Array(256);return(function(){let h=1;for(let i=0;i<255;i++)k[i]=h,E[h]=i,h<<=1,h&256&&(h^=285);for(let i=255;i<512;i++)k[i]=k[i-255]})(),Pt.log=function(h){if(h<1)throw new Error("log("+h+")");return E[h]},Pt.exp=function(h){return k[h]},Pt.mul=function(h,i){return h===0||i===0?0:k[E[h]+E[i]]},Pt}var Re;function wn(){return Re||(Re=1,(function(k){const E=vn();k.mul=function(h,i){const t=new Uint8Array(h.length+i.length-1);for(let u=0;u<h.length;u++)for(let e=0;e<i.length;e++)t[u+e]^=E.mul(h[u],i[e]);return t},k.mod=function(h,i){let t=new Uint8Array(h);for(;t.length-i.length>=0;){const u=t[0];for(let n=0;n<i.length;n++)t[n]^=E.mul(i[n],u);let e=0;for(;e<t.length&&t[e]===0;)e++;t=t.slice(e)}return t},k.generateECPolynomial=function(h){let i=new Uint8Array([1]);for(let t=0;t<h;t++)i=k.mul(i,new Uint8Array([1,E.exp(t)]));return i}})(Xt)),Xt}var te,Le;function kn(){if(Le)return te;Le=1;const k=wn();function E(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return E.prototype.initialize=function(h){this.degree=h,this.genPoly=k.generateECPolynomial(this.degree)},E.prototype.encode=function(h){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(h.length+this.degree);i.set(h);const t=k.mod(i,this.genPoly),u=this.degree-t.length;if(u>0){const e=new Uint8Array(this.degree);return e.set(t,u),e}return t},te=E,te}var ee={},ne={},re={},xe;function Xe(){return xe||(xe=1,re.isValid=function(E){return!isNaN(E)&&E>=1&&E<=40}),re}var kt={},Pe;function tn(){if(Pe)return kt;Pe=1;const k="[0-9]+",E="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const h="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;kt.KANJI=new RegExp(r,"g"),kt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),kt.BYTE=new RegExp(h,"g"),kt.NUMERIC=new RegExp(k,"g"),kt.ALPHANUMERIC=new RegExp(E,"g");const i=new RegExp("^"+r+"$"),t=new RegExp("^"+k+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return kt.testKanji=function(n){return i.test(n)},kt.testNumeric=function(n){return t.test(n)},kt.testAlphanumeric=function(n){return u.test(n)},kt}var Ne;function St(){return Ne||(Ne=1,(function(k){const E=Xe(),r=tn();k.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},k.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},k.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},k.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},k.MIXED={bit:-1},k.getCharCountIndicator=function(t,u){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!E.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?t.ccBits[0]:u<27?t.ccBits[1]:t.ccBits[2]},k.getBestModeForData=function(t){return r.testNumeric(t)?k.NUMERIC:r.testAlphanumeric(t)?k.ALPHANUMERIC:r.testKanji(t)?k.KANJI:k.BYTE},k.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},k.isValid=function(t){return t&&t.bit&&t.ccBits};function h(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return k.NUMERIC;case"alphanumeric":return k.ALPHANUMERIC;case"kanji":return k.KANJI;case"byte":return k.BYTE;default:throw new Error("Unknown mode: "+i)}}k.from=function(t,u){if(k.isValid(t))return t;try{return h(t)}catch{return u}}})(ne)),ne}var Oe;function bn(){return Oe||(Oe=1,(function(k){const E=Ct(),r=Je(),h=me(),i=St(),t=Xe(),u=7973,e=E.getBCHDigit(u);function n(g,s,d){for(let l=1;l<=40;l++)if(s<=k.getCapacity(l,d,g))return l}function p(g,s){return i.getCharCountIndicator(g,s)+4}function v(g,s){let d=0;return g.forEach(function(l){const f=p(l.mode,s);d+=f+l.getBitsLength()}),d}function w(g,s){for(let d=1;d<=40;d++)if(v(g,d)<=k.getCapacity(d,s,i.MIXED))return d}k.from=function(s,d){return t.isValid(s)?parseInt(s,10):d},k.getCapacity=function(s,d,l){if(!t.isValid(s))throw new Error("Invalid QR Code version");typeof l>"u"&&(l=i.BYTE);const f=E.getSymbolTotalCodewords(s),c=r.getTotalCodewordsCount(s,d),m=(f-c)*8;if(l===i.MIXED)return m;const b=m-p(l,s);switch(l){case i.NUMERIC:return Math.floor(b/10*3);case i.ALPHANUMERIC:return Math.floor(b/11*2);case i.KANJI:return Math.floor(b/13);case i.BYTE:default:return Math.floor(b/8)}},k.getBestVersionForData=function(s,d){let l;const f=h.from(d,h.M);if(Array.isArray(s)){if(s.length>1)return w(s,f);if(s.length===0)return 1;l=s[0]}else l=s;return n(l.mode,l.getLength(),f)},k.getEncodedBits=function(s){if(!t.isValid(s)||s<7)throw new Error("Invalid QR Code version");let d=s<<12;for(;E.getBCHDigit(d)-e>=0;)d^=u<<E.getBCHDigit(d)-e;return s<<12|d}})(ee)),ee}var ie={},ze;function _n(){if(ze)return ie;ze=1;const k=Ct(),E=1335,r=21522,h=k.getBCHDigit(E);return ie.getEncodedBits=function(t,u){const e=t.bit<<3|u;let n=e<<10;for(;k.getBCHDigit(n)-h>=0;)n^=E<<k.getBCHDigit(n)-h;return(e<<10|n)^r},ie}var ae={},oe,De;function En(){if(De)return oe;De=1;const k=St();function E(r){this.mode=k.NUMERIC,this.data=r.toString()}return E.getBitsLength=function(h){return 10*Math.floor(h/3)+(h%3?h%3*3+1:0)},E.prototype.getLength=function(){return this.data.length},E.prototype.getBitsLength=function(){return E.getBitsLength(this.data.length)},E.prototype.write=function(h){let i,t,u;for(i=0;i+3<=this.data.length;i+=3)t=this.data.substr(i,3),u=parseInt(t,10),h.put(u,10);const e=this.data.length-i;e>0&&(t=this.data.substr(i),u=parseInt(t,10),h.put(u,e*3+1))},oe=E,oe}var se,Fe;function In(){if(Fe)return se;Fe=1;const k=St(),E=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(h){this.mode=k.ALPHANUMERIC,this.data=h}return r.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let t;for(t=0;t+2<=this.data.length;t+=2){let u=E.indexOf(this.data[t])*45;u+=E.indexOf(this.data[t+1]),i.put(u,11)}this.data.length%2&&i.put(E.indexOf(this.data[t]),6)},se=r,se}var le,Ue;function An(){if(Ue)return le;Ue=1;const k=St();function E(r){this.mode=k.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return E.getBitsLength=function(h){return h*8},E.prototype.getLength=function(){return this.data.length},E.prototype.getBitsLength=function(){return E.getBitsLength(this.data.length)},E.prototype.write=function(r){for(let h=0,i=this.data.length;h<i;h++)r.put(this.data[h],8)},le=E,le}var ce,Me;function Cn(){if(Me)return ce;Me=1;const k=St(),E=Ct();function r(h){this.mode=k.KANJI,this.data=h}return r.getBitsLength=function(i){return i*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(h){let i;for(i=0;i<this.data.length;i++){let t=E.toSJIS(this.data[i]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),h.put(t,13)}},ce=r,ce}var ue={exports:{}},qe;function Sn(){return qe||(qe=1,(function(k){var E={single_source_shortest_paths:function(r,h,i){var t={},u={};u[h]=0;var e=E.PriorityQueue.make();e.push(h,0);for(var n,p,v,w,g,s,d,l,f;!e.empty();){n=e.pop(),p=n.value,w=n.cost,g=r[p]||{};for(v in g)g.hasOwnProperty(v)&&(s=g[v],d=w+s,l=u[v],f=typeof u[v]>"u",(f||l>d)&&(u[v]=d,e.push(v,d),t[v]=p))}if(typeof i<"u"&&typeof u[i]>"u"){var c=["Could not find a path from ",h," to ",i,"."].join("");throw new Error(c)}return t},extract_shortest_path_from_predecessor_list:function(r,h){for(var i=[],t=h;t;)i.push(t),r[t],t=r[t];return i.reverse(),i},find_path:function(r,h,i){var t=E.single_source_shortest_paths(r,h,i);return E.extract_shortest_path_from_predecessor_list(t,i)},PriorityQueue:{make:function(r){var h=E.PriorityQueue,i={},t;r=r||{};for(t in h)h.hasOwnProperty(t)&&(i[t]=h[t]);return i.queue=[],i.sorter=r.sorter||h.default_sorter,i},default_sorter:function(r,h){return r.cost-h.cost},push:function(r,h){var i={value:r,cost:h};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};k.exports=E})(ue)),ue.exports}var je;function Bn(){return je||(je=1,(function(k){const E=St(),r=En(),h=In(),i=An(),t=Cn(),u=tn(),e=Ct(),n=Sn();function p(c){return unescape(encodeURIComponent(c)).length}function v(c,m,b){const C=[];let A;for(;(A=c.exec(b))!==null;)C.push({data:A[0],index:A.index,mode:m,length:A[0].length});return C}function w(c){const m=v(u.NUMERIC,E.NUMERIC,c),b=v(u.ALPHANUMERIC,E.ALPHANUMERIC,c);let C,A;return e.isKanjiModeEnabled()?(C=v(u.BYTE,E.BYTE,c),A=v(u.KANJI,E.KANJI,c)):(C=v(u.BYTE_KANJI,E.BYTE,c),A=[]),m.concat(b,C,A).sort(function(S,x){return S.index-x.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function g(c,m){switch(m){case E.NUMERIC:return r.getBitsLength(c);case E.ALPHANUMERIC:return h.getBitsLength(c);case E.KANJI:return t.getBitsLength(c);case E.BYTE:return i.getBitsLength(c)}}function s(c){return c.reduce(function(m,b){const C=m.length-1>=0?m[m.length-1]:null;return C&&C.mode===b.mode?(m[m.length-1].data+=b.data,m):(m.push(b),m)},[])}function d(c){const m=[];for(let b=0;b<c.length;b++){const C=c[b];switch(C.mode){case E.NUMERIC:m.push([C,{data:C.data,mode:E.ALPHANUMERIC,length:C.length},{data:C.data,mode:E.BYTE,length:C.length}]);break;case E.ALPHANUMERIC:m.push([C,{data:C.data,mode:E.BYTE,length:C.length}]);break;case E.KANJI:m.push([C,{data:C.data,mode:E.BYTE,length:p(C.data)}]);break;case E.BYTE:m.push([{data:C.data,mode:E.BYTE,length:p(C.data)}])}}return m}function l(c,m){const b={},C={start:{}};let A=["start"];for(let T=0;T<c.length;T++){const S=c[T],x=[];for(let R=0;R<S.length;R++){const F=S[R],L=""+T+R;x.push(L),b[L]={node:F,lastCount:0},C[L]={};for(let y=0;y<A.length;y++){const B=A[y];b[B]&&b[B].node.mode===F.mode?(C[B][L]=g(b[B].lastCount+F.length,F.mode)-g(b[B].lastCount,F.mode),b[B].lastCount+=F.length):(b[B]&&(b[B].lastCount=F.length),C[B][L]=g(F.length,F.mode)+4+E.getCharCountIndicator(F.mode,m))}}A=x}for(let T=0;T<A.length;T++)C[A[T]].end=0;return{map:C,table:b}}function f(c,m){let b;const C=E.getBestModeForData(c);if(b=E.from(m,C),b!==E.BYTE&&b.bit<C.bit)throw new Error('"'+c+'" cannot be encoded with mode '+E.toString(b)+`.
 Suggested mode is: `+E.toString(C));switch(b===E.KANJI&&!e.isKanjiModeEnabled()&&(b=E.BYTE),b){case E.NUMERIC:return new r(c);case E.ALPHANUMERIC:return new h(c);case E.KANJI:return new t(c);case E.BYTE:return new i(c)}}k.fromArray=function(m){return m.reduce(function(b,C){return typeof C=="string"?b.push(f(C,null)):C.data&&b.push(f(C.data,C.mode)),b},[])},k.fromString=function(m,b){const C=w(m,e.isKanjiModeEnabled()),A=d(C),T=l(A,b),S=n.find_path(T.map,"start","end"),x=[];for(let R=1;R<S.length-1;R++)x.push(T.table[S[R]].node);return k.fromArray(s(x))},k.rawSplit=function(m){return k.fromArray(w(m,e.isKanjiModeEnabled()))}})(ae)),ae}var $e;function Tn(){if($e)return Zt;$e=1;const k=Ct(),E=me(),r=hn(),h=pn(),i=mn(),t=gn(),u=yn(),e=Je(),n=kn(),p=bn(),v=_n(),w=St(),g=Bn();function s(T,S){const x=T.size,R=t.getPositions(S);for(let F=0;F<R.length;F++){const L=R[F][0],y=R[F][1];for(let B=-1;B<=7;B++)if(!(L+B<=-1||x<=L+B))for(let a=-1;a<=7;a++)y+a<=-1||x<=y+a||(B>=0&&B<=6&&(a===0||a===6)||a>=0&&a<=6&&(B===0||B===6)||B>=2&&B<=4&&a>=2&&a<=4?T.set(L+B,y+a,!0,!0):T.set(L+B,y+a,!1,!0))}}function d(T){const S=T.size;for(let x=8;x<S-8;x++){const R=x%2===0;T.set(x,6,R,!0),T.set(6,x,R,!0)}}function l(T,S){const x=i.getPositions(S);for(let R=0;R<x.length;R++){const F=x[R][0],L=x[R][1];for(let y=-2;y<=2;y++)for(let B=-2;B<=2;B++)y===-2||y===2||B===-2||B===2||y===0&&B===0?T.set(F+y,L+B,!0,!0):T.set(F+y,L+B,!1,!0)}}function f(T,S){const x=T.size,R=p.getEncodedBits(S);let F,L,y;for(let B=0;B<18;B++)F=Math.floor(B/3),L=B%3+x-8-3,y=(R>>B&1)===1,T.set(F,L,y,!0),T.set(L,F,y,!0)}function c(T,S,x){const R=T.size,F=v.getEncodedBits(S,x);let L,y;for(L=0;L<15;L++)y=(F>>L&1)===1,L<6?T.set(L,8,y,!0):L<8?T.set(L+1,8,y,!0):T.set(R-15+L,8,y,!0),L<8?T.set(8,R-L-1,y,!0):L<9?T.set(8,15-L-1+1,y,!0):T.set(8,15-L-1,y,!0);T.set(R-8,8,1,!0)}function m(T,S){const x=T.size;let R=-1,F=x-1,L=7,y=0;for(let B=x-1;B>0;B-=2)for(B===6&&B--;;){for(let a=0;a<2;a++)if(!T.isReserved(F,B-a)){let O=!1;y<S.length&&(O=(S[y]>>>L&1)===1),T.set(F,B-a,O),L--,L===-1&&(y++,L=7)}if(F+=R,F<0||x<=F){F-=R,R=-R;break}}}function b(T,S,x){const R=new r;x.forEach(function(a){R.put(a.mode.bit,4),R.put(a.getLength(),w.getCharCountIndicator(a.mode,T)),a.write(R)});const F=k.getSymbolTotalCodewords(T),L=e.getTotalCodewordsCount(T,S),y=(F-L)*8;for(R.getLengthInBits()+4<=y&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const B=(y-R.getLengthInBits())/8;for(let a=0;a<B;a++)R.put(a%2?17:236,8);return C(R,T,S)}function C(T,S,x){const R=k.getSymbolTotalCodewords(S),F=e.getTotalCodewordsCount(S,x),L=R-F,y=e.getBlocksCount(S,x),B=R%y,a=y-B,O=Math.floor(R/y),Z=Math.floor(L/y),j=Z+1,X=O-Z,M=new n(X);let Y=0;const D=new Array(y),N=new Array(y);let J=0;const G=new Uint8Array(T.buffer);for(let it=0;it<y;it++){const lt=it<a?Z:j;D[it]=G.slice(Y,Y+lt),N[it]=M.encode(D[it]),Y+=lt,J=Math.max(J,lt)}const W=new Uint8Array(R);let ot=0,st,et;for(st=0;st<J;st++)for(et=0;et<y;et++)st<D[et].length&&(W[ot++]=D[et][st]);for(st=0;st<X;st++)for(et=0;et<y;et++)W[ot++]=N[et][st];return W}function A(T,S,x,R){let F;if(Array.isArray(T))F=g.fromArray(T);else if(typeof T=="string"){let O=S;if(!O){const Z=g.rawSplit(T);O=p.getBestVersionForData(Z,x)}F=g.fromString(T,O||40)}else throw new Error("Invalid data");const L=p.getBestVersionForData(F,x);if(!L)throw new Error("The amount of data is too big to be stored in a QR Code");if(!S)S=L;else if(S<L)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+L+`.
`);const y=b(S,x,F),B=k.getSymbolSize(S),a=new h(B);return s(a,S),d(a),l(a,S),c(a,x,0),S>=7&&f(a,S),m(a,y),isNaN(R)&&(R=u.getBestMask(a,c.bind(null,a,x))),u.applyMask(R,a),c(a,x,R),{modules:a,version:S,errorCorrectionLevel:x,maskPattern:R,segments:F}}return Zt.create=function(S,x){if(typeof S>"u"||S==="")throw new Error("No input text");let R=E.M,F,L;return typeof x<"u"&&(R=E.from(x.errorCorrectionLevel,E.M),F=p.from(x.version),L=u.from(x.maskPattern),x.toSJISFunc&&k.setToSJISFunction(x.toSJISFunc)),A(S,F,R,L)},Zt}var de={},fe={},He;function en(){return He||(He=1,(function(k){function E(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let h=r.slice().replace("#","").split("");if(h.length<3||h.length===5||h.length>8)throw new Error("Invalid hex color: "+r);(h.length===3||h.length===4)&&(h=Array.prototype.concat.apply([],h.map(function(t){return[t,t]}))),h.length===6&&h.push("F","F");const i=parseInt(h.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+h.slice(0,6).join("")}}k.getOptions=function(h){h||(h={}),h.color||(h.color={});const i=typeof h.margin>"u"||h.margin===null||h.margin<0?4:h.margin,t=h.width&&h.width>=21?h.width:void 0,u=h.scale||4;return{width:t,scale:t?4:u,margin:i,color:{dark:E(h.color.dark||"#000000ff"),light:E(h.color.light||"#ffffffff")},type:h.type,rendererOpts:h.rendererOpts||{}}},k.getScale=function(h,i){return i.width&&i.width>=h+i.margin*2?i.width/(h+i.margin*2):i.scale},k.getImageWidth=function(h,i){const t=k.getScale(h,i);return Math.floor((h+i.margin*2)*t)},k.qrToImageData=function(h,i,t){const u=i.modules.size,e=i.modules.data,n=k.getScale(u,t),p=Math.floor((u+t.margin*2)*n),v=t.margin*n,w=[t.color.light,t.color.dark];for(let g=0;g<p;g++)for(let s=0;s<p;s++){let d=(g*p+s)*4,l=t.color.light;if(g>=v&&s>=v&&g<p-v&&s<p-v){const f=Math.floor((g-v)/n),c=Math.floor((s-v)/n);l=w[e[f*u+c]?1:0]}h[d++]=l.r,h[d++]=l.g,h[d++]=l.b,h[d]=l.a}}})(fe)),fe}var Ke;function Rn(){return Ke||(Ke=1,(function(k){const E=en();function r(i,t,u){i.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=u,t.width=u,t.style.height=u+"px",t.style.width=u+"px"}function h(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}k.render=function(t,u,e){let n=e,p=u;typeof n>"u"&&(!u||!u.getContext)&&(n=u,u=void 0),u||(p=h()),n=E.getOptions(n);const v=E.getImageWidth(t.modules.size,n),w=p.getContext("2d"),g=w.createImageData(v,v);return E.qrToImageData(g.data,t,n),r(w,p,v),w.putImageData(g,0,0),p},k.renderToDataURL=function(t,u,e){let n=e;typeof n>"u"&&(!u||!u.getContext)&&(n=u,u=void 0),n||(n={});const p=k.render(t,u,n),v=n.type||"image/png",w=n.rendererOpts||{};return p.toDataURL(v,w.quality)}})(de)),de}var he={},Ze;function Ln(){if(Ze)return he;Ze=1;const k=en();function E(i,t){const u=i.a/255,e=t+'="'+i.hex+'"';return u<1?e+" "+t+'-opacity="'+u.toFixed(2).slice(1)+'"':e}function r(i,t,u){let e=i+t;return typeof u<"u"&&(e+=" "+u),e}function h(i,t,u){let e="",n=0,p=!1,v=0;for(let w=0;w<i.length;w++){const g=Math.floor(w%t),s=Math.floor(w/t);!g&&!p&&(p=!0),i[w]?(v++,w>0&&g>0&&i[w-1]||(e+=p?r("M",g+u,.5+s+u):r("m",n,0),n=0,p=!1),g+1<t&&i[w+1]||(e+=r("h",v),v=0)):n++}return e}return he.render=function(t,u,e){const n=k.getOptions(u),p=t.modules.size,v=t.modules.data,w=p+n.margin*2,g=n.color.light.a?"<path "+E(n.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",s="<path "+E(n.color.dark,"stroke")+' d="'+h(v,p,n.margin)+'"/>',d='viewBox="0 0 '+w+" "+w+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+d+' shape-rendering="crispEdges">'+g+s+`</svg>
`;return typeof e=="function"&&e(null,f),f},he}var We;function xn(){if(We)return Bt;We=1;const k=fn(),E=Tn(),r=Rn(),h=Ln();function i(t,u,e,n,p){const v=[].slice.call(arguments,1),w=v.length,g=typeof v[w-1]=="function";if(!g&&!k())throw new Error("Callback required as last argument");if(g){if(w<2)throw new Error("Too few arguments provided");w===2?(p=e,e=u,u=n=void 0):w===3&&(u.getContext&&typeof p>"u"?(p=n,n=void 0):(p=n,n=e,e=u,u=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(e=u,u=n=void 0):w===2&&!u.getContext&&(n=e,e=u,u=void 0),new Promise(function(s,d){try{const l=E.create(e,n);s(t(l,u,n))}catch(l){d(l)}})}try{const s=E.create(e,n);p(null,t(s,u,n))}catch(s){p(s)}}return Bt.create=E.create,Bt.toCanvas=i.bind(null,r.render),Bt.toDataURL=i.bind(null,r.renderToDataURL),Bt.toString=i.bind(null,function(t,u,e){return h.render(t,e)}),Bt}var Pn=xn();const $t=Ye(Pn),nn={HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/};function jt(k,E){let r;return function(...i){const t=()=>{clearTimeout(r),k.apply(this,i)};clearTimeout(r),r=setTimeout(t,E)}}function pt(k){const E=document.createElement("div");return E.textContent=k,E.innerHTML}function ge(k){if(!k||typeof k!="string")return"";try{const E=k.trim(),r=E.startsWith("http")?E:`https://${E}`;return new URL(r).hostname}catch{const E=k.trim().replace(/^https?:\/\//,"").split("/"),[r]=E,[h]=r.split(":");return h||""}}function vt(k){return k?/^(\d{1,3}\.){3}\d{1,3}$/.test(k)?k.split(".").every(h=>parseInt(h)>=0&&parseInt(h)<=255):nn.HOSTNAME.test(k):!1}function Ot(k){return nn.PORT.test(String(k))}function Nn(k){try{return new URL(k),!0}catch{return!1}}function qt(k){throw new Error('Could not dynamically require "'+k+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ve;function On(){return Ve||(Ve=1,(function(k,E){(function(r){k.exports=r()})(function(){return(function r(h,i,t){function u(p,v){if(!i[p]){if(!h[p]){var w=typeof qt=="function"&&qt;if(!v&&w)return w(p,!0);if(e)return e(p,!0);var g=new Error("Cannot find module '"+p+"'");throw g.code="MODULE_NOT_FOUND",g}var s=i[p]={exports:{}};h[p][0].call(s.exports,function(d){var l=h[p][1][d];return u(l||d)},s,s.exports,r,h,i,t)}return i[p].exports}for(var e=typeof qt=="function"&&qt,n=0;n<t.length;n++)u(t[n]);return u})({1:[function(r,h,i){var t=r("./utils"),u=r("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(n){for(var p,v,w,g,s,d,l,f=[],c=0,m=n.length,b=m,C=t.getTypeOf(n)!=="string";c<n.length;)b=m-c,w=C?(p=n[c++],v=c<m?n[c++]:0,c<m?n[c++]:0):(p=n.charCodeAt(c++),v=c<m?n.charCodeAt(c++):0,c<m?n.charCodeAt(c++):0),g=p>>2,s=(3&p)<<4|v>>4,d=1<b?(15&v)<<2|w>>6:64,l=2<b?63&w:64,f.push(e.charAt(g)+e.charAt(s)+e.charAt(d)+e.charAt(l));return f.join("")},i.decode=function(n){var p,v,w,g,s,d,l=0,f=0,c="data:";if(n.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var m,b=3*(n=n.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(n.charAt(n.length-1)===e.charAt(64)&&b--,n.charAt(n.length-2)===e.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=u.uint8array?new Uint8Array(0|b):new Array(0|b);l<n.length;)p=e.indexOf(n.charAt(l++))<<2|(g=e.indexOf(n.charAt(l++)))>>4,v=(15&g)<<4|(s=e.indexOf(n.charAt(l++)))>>2,w=(3&s)<<6|(d=e.indexOf(n.charAt(l++))),m[f++]=p,s!==64&&(m[f++]=v),d!==64&&(m[f++]=w);return m}},{"./support":30,"./utils":32}],2:[function(r,h,i){var t=r("./external"),u=r("./stream/DataWorker"),e=r("./stream/Crc32Probe"),n=r("./stream/DataLengthProbe");function p(v,w,g,s,d){this.compressedSize=v,this.uncompressedSize=w,this.crc32=g,this.compression=s,this.compressedContent=d}p.prototype={getContentWorker:function(){var v=new u(t.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new n("data_length")),w=this;return v.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new u(t.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(v,w,g){return v.pipe(new e).pipe(new n("uncompressedSize")).pipe(w.compressWorker(g)).pipe(new n("compressedSize")).withStreamInfo("compression",w)},h.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,h,i){var t=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,h,i){var t=r("./utils"),u=(function(){for(var e,n=[],p=0;p<256;p++){e=p;for(var v=0;v<8;v++)e=1&e?3988292384^e>>>1:e>>>1;n[p]=e}return n})();h.exports=function(e,n){return e!==void 0&&e.length?t.getTypeOf(e)!=="string"?(function(p,v,w,g){var s=u,d=g+w;p^=-1;for(var l=g;l<d;l++)p=p>>>8^s[255&(p^v[l])];return-1^p})(0|n,e,e.length,0):(function(p,v,w,g){var s=u,d=g+w;p^=-1;for(var l=g;l<d;l++)p=p>>>8^s[255&(p^v.charCodeAt(l))];return-1^p})(0|n,e,e.length,0):0}},{"./utils":32}],5:[function(r,h,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,h,i){var t=null;t=typeof Promise<"u"?Promise:r("lie"),h.exports={Promise:t}},{lie:37}],7:[function(r,h,i){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=r("pako"),e=r("./utils"),n=r("./stream/GenericWorker"),p=t?"uint8array":"array";function v(w,g){n.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=g,this.meta={}}i.magic="\b\0",e.inherits(v,n),v.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(p,w.data),!1)},v.prototype.flush=function(){n.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(g){w.push({data:g,meta:w.meta})}},i.compressWorker=function(w){return new v("Deflate",w)},i.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,h,i){function t(s,d){var l,f="";for(l=0;l<d;l++)f+=String.fromCharCode(255&s),s>>>=8;return f}function u(s,d,l,f,c,m){var b,C,A=s.file,T=s.compression,S=m!==p.utf8encode,x=e.transformTo("string",m(A.name)),R=e.transformTo("string",p.utf8encode(A.name)),F=A.comment,L=e.transformTo("string",m(F)),y=e.transformTo("string",p.utf8encode(F)),B=R.length!==A.name.length,a=y.length!==F.length,O="",Z="",j="",X=A.dir,M=A.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};d&&!l||(Y.crc32=s.crc32,Y.compressedSize=s.compressedSize,Y.uncompressedSize=s.uncompressedSize);var D=0;d&&(D|=8),S||!B&&!a||(D|=2048);var N=0,J=0;X&&(N|=16),c==="UNIX"?(J=798,N|=(function(W,ot){var st=W;return W||(st=ot?16893:33204),(65535&st)<<16})(A.unixPermissions,X)):(J=20,N|=(function(W){return 63&(W||0)})(A.dosPermissions)),b=M.getUTCHours(),b<<=6,b|=M.getUTCMinutes(),b<<=5,b|=M.getUTCSeconds()/2,C=M.getUTCFullYear()-1980,C<<=4,C|=M.getUTCMonth()+1,C<<=5,C|=M.getUTCDate(),B&&(Z=t(1,1)+t(v(x),4)+R,O+="up"+t(Z.length,2)+Z),a&&(j=t(1,1)+t(v(L),4)+y,O+="uc"+t(j.length,2)+j);var G="";return G+=`
\0`,G+=t(D,2),G+=T.magic,G+=t(b,2),G+=t(C,2),G+=t(Y.crc32,4),G+=t(Y.compressedSize,4),G+=t(Y.uncompressedSize,4),G+=t(x.length,2),G+=t(O.length,2),{fileRecord:w.LOCAL_FILE_HEADER+G+x+O,dirRecord:w.CENTRAL_FILE_HEADER+t(J,2)+G+t(L.length,2)+"\0\0\0\0"+t(N,4)+t(f,4)+x+O+L}}var e=r("../utils"),n=r("../stream/GenericWorker"),p=r("../utf8"),v=r("../crc32"),w=r("../signature");function g(s,d,l,f){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=l,this.encodeFileName=f,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(g,n),g.prototype.push=function(s){var d=s.meta.percent||0,l=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,n.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:l?(d+100*(l-f-1))/l:100}}))},g.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var d=this.streamFiles&&!s.file.dir;if(d){var l=u(s,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(s){this.accumulate=!1;var d=this.streamFiles&&!s.file.dir,l=u(s,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),d)this.push({data:(function(f){return w.DATA_DESCRIPTOR+t(f.crc32,4)+t(f.compressedSize,4)+t(f.uncompressedSize,4)})(s),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var s=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var l=this.bytesWritten-s,f=(function(c,m,b,C,A){var T=e.transformTo("string",A(C));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(c,2)+t(c,2)+t(m,4)+t(b,4)+t(T.length,2)+T})(this.dirRecords.length,l,s,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(s){this._sources.push(s);var d=this;return s.on("data",function(l){d.processChunk(l)}),s.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),s.on("error",function(l){d.error(l)}),this},g.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(s){var d=this._sources;if(!n.prototype.error.call(this,s))return!1;for(var l=0;l<d.length;l++)try{d[l].error(s)}catch{}return!0},g.prototype.lock=function(){n.prototype.lock.call(this);for(var s=this._sources,d=0;d<s.length;d++)s[d].lock()},h.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,h,i){var t=r("../compressions"),u=r("./ZipFileWorker");i.generateWorker=function(e,n,p){var v=new u(n.streamFiles,p,n.platform,n.encodeFileName),w=0;try{e.forEach(function(g,s){w++;var d=(function(m,b){var C=m||b,A=t[C];if(!A)throw new Error(C+" is not a valid compression method !");return A})(s.options.compression,n.compression),l=s.options.compressionOptions||n.compressionOptions||{},f=s.dir,c=s.date;s._compressWorker(d,l).withStreamInfo("file",{name:g,dir:f,date:c,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(v)}),v.entriesCount=w}catch(g){v.error(g)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,h,i){function t(){if(!(this instanceof t))return new t;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new t;for(var e in this)typeof this[e]!="function"&&(u[e]=this[e]);return u}}(t.prototype=r("./object")).loadAsync=r("./load"),t.support=r("./support"),t.defaults=r("./defaults"),t.version="3.10.1",t.loadAsync=function(u,e){return new t().loadAsync(u,e)},t.external=r("./external"),h.exports=t},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,h,i){var t=r("./utils"),u=r("./external"),e=r("./utf8"),n=r("./zipEntries"),p=r("./stream/Crc32Probe"),v=r("./nodejsUtils");function w(g){return new u.Promise(function(s,d){var l=g.decompressed.getContentWorker().pipe(new p);l.on("error",function(f){d(f)}).on("end",function(){l.streamInfo.crc32!==g.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}h.exports=function(g,s){var d=this;return s=t.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),v.isNode&&v.isStream(g)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):t.prepareContent("the loaded zip file",g,!0,s.optimizedBinaryString,s.base64).then(function(l){var f=new n(s);return f.load(l),f}).then(function(l){var f=[u.Promise.resolve(l)],c=l.files;if(s.checkCRC32)for(var m=0;m<c.length;m++)f.push(w(c[m]));return u.Promise.all(f)}).then(function(l){for(var f=l.shift(),c=f.files,m=0;m<c.length;m++){var b=c[m],C=b.fileNameStr,A=t.resolve(b.fileNameStr);d.file(A,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:s.createFolders}),b.dir||(d.file(A).unsafeOriginalName=C)}return f.zipComment.length&&(d.comment=f.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,h,i){var t=r("../utils"),u=r("../stream/GenericWorker");function e(n,p){u.call(this,"Nodejs stream input adapter for "+n),this._upstreamEnded=!1,this._bindStream(p)}t.inherits(e,u),e.prototype._bindStream=function(n){var p=this;(this._stream=n).pause(),n.on("data",function(v){p.push({data:v,meta:{percent:0}})}).on("error",function(v){p.isPaused?this.generatedError=v:p.error(v)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},e.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},h.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,h,i){var t=r("readable-stream").Readable;function u(e,n,p){t.call(this,n),this._helper=e;var v=this;e.on("data",function(w,g){v.push(w)||v._helper.pause(),p&&p(g)}).on("error",function(w){v.emit("error",w)}).on("end",function(){v.push(null)})}r("../utils").inherits(u,t),u.prototype._read=function(){this._helper.resume()},h.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,h,i){h.exports={isNode:typeof Buffer<"u",newBufferFrom:function(t,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,u);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,u)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var u=new Buffer(t);return u.fill(0),u},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}},{}],15:[function(r,h,i){function t(A,T,S){var x,R=e.getTypeOf(T),F=e.extend(S||{},v);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(A=c(A)),F.createFolders&&(x=f(A))&&m.call(this,x,!0);var L=R==="string"&&F.binary===!1&&F.base64===!1;S&&S.binary!==void 0||(F.binary=!L),(T instanceof w&&T.uncompressedSize===0||F.dir||!T||T.length===0)&&(F.base64=!1,F.binary=!0,T="",F.compression="STORE",R="string");var y=null;y=T instanceof w||T instanceof n?T:d.isNode&&d.isStream(T)?new l(A,T):e.prepareContent(A,T,F.binary,F.optimizedBinaryString,F.base64);var B=new g(A,y,F);this.files[A]=B}var u=r("./utf8"),e=r("./utils"),n=r("./stream/GenericWorker"),p=r("./stream/StreamHelper"),v=r("./defaults"),w=r("./compressedObject"),g=r("./zipObject"),s=r("./generate"),d=r("./nodejsUtils"),l=r("./nodejs/NodejsStreamInputAdapter"),f=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var T=A.lastIndexOf("/");return 0<T?A.substring(0,T):""},c=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},m=function(A,T){return T=T!==void 0?T:v.createFolders,A=c(A),this.files[A]||t.call(this,A,null,{dir:!0,createFolders:T}),this.files[A]};function b(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var T,S,x;for(T in this.files)x=this.files[T],(S=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&A(S,x)},filter:function(A){var T=[];return this.forEach(function(S,x){A(S,x)&&T.push(x)}),T},file:function(A,T,S){if(arguments.length!==1)return A=this.root+A,t.call(this,A,T,S),this;if(b(A)){var x=A;return this.filter(function(F,L){return!L.dir&&x.test(F)})}var R=this.files[this.root+A];return R&&!R.dir?R:null},folder:function(A){if(!A)return this;if(b(A))return this.filter(function(R,F){return F.dir&&A.test(R)});var T=this.root+A,S=m.call(this,T),x=this.clone();return x.root=S.name,x},remove:function(A){A=this.root+A;var T=this.files[A];if(T||(A.slice(-1)!=="/"&&(A+="/"),T=this.files[A]),T&&!T.dir)delete this.files[A];else for(var S=this.filter(function(R,F){return F.name.slice(0,A.length)===A}),x=0;x<S.length;x++)delete this.files[S[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var T,S={};try{if((S=e.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");e.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var x=S.comment||this.comment||"";T=s.generateWorker(this,S,x)}catch(R){(T=new n("error")).error(R)}return new p(T,S.type||"string",S.mimeType)},generateAsync:function(A,T){return this.generateInternalStream(A).accumulate(T)},generateNodeStream:function(A,T){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(T)}};h.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,h,i){h.exports=r("stream")},{stream:void 0}],17:[function(r,h,i){var t=r("./DataReader");function u(e){t.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}r("../utils").inherits(u,t),u.prototype.byteAt=function(e){return this.data[this.zero+e]},u.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),p=e.charCodeAt(1),v=e.charCodeAt(2),w=e.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===n&&this.data[g+1]===p&&this.data[g+2]===v&&this.data[g+3]===w)return g-this.zero;return-1},u.prototype.readAndCheckSignature=function(e){var n=e.charCodeAt(0),p=e.charCodeAt(1),v=e.charCodeAt(2),w=e.charCodeAt(3),g=this.readData(4);return n===g[0]&&p===g[1]&&v===g[2]&&w===g[3]},u.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},h.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,h,i){var t=r("../utils");function u(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var n,p=0;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)p=(p<<8)+this.byteAt(n);return this.index+=e,p},readString:function(e){return t.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},h.exports=u},{"../utils":32}],19:[function(r,h,i){var t=r("./Uint8ArrayReader");function u(e){t.call(this,e)}r("../utils").inherits(u,t),u.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},h.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,h,i){var t=r("./DataReader");function u(e){t.call(this,e)}r("../utils").inherits(u,t),u.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},u.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},u.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},u.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},h.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,h,i){var t=r("./ArrayReader");function u(e){t.call(this,e)}r("../utils").inherits(u,t),u.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},h.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,h,i){var t=r("../utils"),u=r("../support"),e=r("./ArrayReader"),n=r("./StringReader"),p=r("./NodeBufferReader"),v=r("./Uint8ArrayReader");h.exports=function(w){var g=t.getTypeOf(w);return t.checkSupport(g),g!=="string"||u.uint8array?g==="nodebuffer"?new p(w):u.uint8array?new v(t.transformTo("uint8array",w)):new e(t.transformTo("array",w)):new n(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,h,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,h,i){var t=r("./GenericWorker"),u=r("../utils");function e(n){t.call(this,"ConvertWorker to "+n),this.destType=n}u.inherits(e,t),e.prototype.processChunk=function(n){this.push({data:u.transformTo(this.destType,n.data),meta:n.meta})},h.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(r,h,i){var t=r("./GenericWorker"),u=r("../crc32");function e(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(e,t),e.prototype.processChunk=function(n){this.streamInfo.crc32=u(n.data,this.streamInfo.crc32||0),this.push(n)},h.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,h,i){var t=r("../utils"),u=r("./GenericWorker");function e(n){u.call(this,"DataLengthProbe for "+n),this.propName=n,this.withStreamInfo(n,0)}t.inherits(e,u),e.prototype.processChunk=function(n){if(n){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+n.data.length}u.prototype.processChunk.call(this,n)},h.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(r,h,i){var t=r("../utils"),u=r("./GenericWorker");function e(n){u.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,n.then(function(v){p.dataIsReady=!0,p.data=v,p.max=v&&v.length||0,p.type=t.getTypeOf(v),p.isPaused||p._tickAndRepeat()},function(v){p.error(v)})}t.inherits(e,u),e.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,t.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(t.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var n=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":n=this.data.substring(this.index,p);break;case"uint8array":n=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":n=this.data.slice(this.index,p)}return this.index=p,this.push({data:n,meta:{percent:this.max?this.index/this.max*100:0}})},h.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(r,h,i){function t(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}t.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,e){return this._listeners[u].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,e){if(this._listeners[u])for(var n=0;n<this._listeners[u].length;n++)this._listeners[u][n].call(this,e)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var e=this;return u.on("data",function(n){e.processChunk(n)}),u.on("end",function(){e.end()}),u.on("error",function(n){e.error(n)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,e){return this.extraStreamInfo[u]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},h.exports=t},{}],29:[function(r,h,i){var t=r("../utils"),u=r("./ConvertWorker"),e=r("./GenericWorker"),n=r("../base64"),p=r("../support"),v=r("../external"),w=null;if(p.nodestream)try{w=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(d,l){return new v.Promise(function(f,c){var m=[],b=d._internalType,C=d._outputType,A=d._mimeType;d.on("data",function(T,S){m.push(T),l&&l(S)}).on("error",function(T){m=[],c(T)}).on("end",function(){try{var T=(function(S,x,R){switch(S){case"blob":return t.newBlob(t.transformTo("arraybuffer",x),R);case"base64":return n.encode(x);default:return t.transformTo(S,x)}})(C,(function(S,x){var R,F=0,L=null,y=0;for(R=0;R<x.length;R++)y+=x[R].length;switch(S){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(L=new Uint8Array(y),R=0;R<x.length;R++)L.set(x[R],F),F+=x[R].length;return L;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+S+"'")}})(b,m),A);f(T)}catch(S){c(S)}m=[]}).resume()})}function s(d,l,f){var c=l;switch(l){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=l,this._mimeType=f,t.checkSupport(c),this._worker=d.pipe(new u(c)),d.lock()}catch(m){this._worker=new e("error"),this._worker.error(m)}}s.prototype={accumulate:function(d){return g(this,d)},on:function(d,l){var f=this;return d==="data"?this._worker.on(d,function(c){l.call(f,c.data,c.meta)}):this._worker.on(d,function(){t.delay(l,arguments,f)}),this},resume:function(){return t.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(t.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},d)}},h.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,h,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var t=new ArrayBuffer(0);try{i.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(t),i.blob=u.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,h,i){for(var t=r("./utils"),u=r("./support"),e=r("./nodejsUtils"),n=r("./stream/GenericWorker"),p=new Array(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;p[254]=p[254]=1;function w(){n.call(this,"utf-8 decode"),this.leftOver=null}function g(){n.call(this,"utf-8 encode")}i.utf8encode=function(s){return u.nodebuffer?e.newBufferFrom(s,"utf-8"):(function(d){var l,f,c,m,b,C=d.length,A=0;for(m=0;m<C;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<C&&(64512&(c=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(c-56320),m++),A+=f<128?1:f<2048?2:f<65536?3:4;for(l=u.uint8array?new Uint8Array(A):new Array(A),m=b=0;b<A;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<C&&(64512&(c=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(c-56320),m++),f<128?l[b++]=f:(f<2048?l[b++]=192|f>>>6:(f<65536?l[b++]=224|f>>>12:(l[b++]=240|f>>>18,l[b++]=128|f>>>12&63),l[b++]=128|f>>>6&63),l[b++]=128|63&f);return l})(s)},i.utf8decode=function(s){return u.nodebuffer?t.transformTo("nodebuffer",s).toString("utf-8"):(function(d){var l,f,c,m,b=d.length,C=new Array(2*b);for(l=f=0;l<b;)if((c=d[l++])<128)C[f++]=c;else if(4<(m=p[c]))C[f++]=65533,l+=m-1;else{for(c&=m===2?31:m===3?15:7;1<m&&l<b;)c=c<<6|63&d[l++],m--;1<m?C[f++]=65533:c<65536?C[f++]=c:(c-=65536,C[f++]=55296|c>>10&1023,C[f++]=56320|1023&c)}return C.length!==f&&(C.subarray?C=C.subarray(0,f):C.length=f),t.applyFromCharCode(C)})(s=t.transformTo(u.uint8array?"uint8array":"array",s))},t.inherits(w,n),w.prototype.processChunk=function(s){var d=t.transformTo(u.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var l=d;(d=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),d.set(l,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var f=(function(m,b){var C;for((b=b||m.length)>m.length&&(b=m.length),C=b-1;0<=C&&(192&m[C])==128;)C--;return C<0||C===0?b:C+p[m[C]]>b?C:b})(d),c=d;f!==d.length&&(u.uint8array?(c=d.subarray(0,f),this.leftOver=d.subarray(f,d.length)):(c=d.slice(0,f),this.leftOver=d.slice(f,d.length))),this.push({data:i.utf8decode(c),meta:s.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=w,t.inherits(g,n),g.prototype.processChunk=function(s){this.push({data:i.utf8encode(s.data),meta:s.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,h,i){var t=r("./support"),u=r("./base64"),e=r("./nodejsUtils"),n=r("./external");function p(l){return l}function v(l,f){for(var c=0;c<l.length;++c)f[c]=255&l.charCodeAt(c);return f}r("setimmediate"),i.newBlob=function(l,f){i.checkSupport("blob");try{return new Blob([l],{type:f})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(l),c.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(l,f,c){var m=[],b=0,C=l.length;if(C<=c)return String.fromCharCode.apply(null,l);for(;b<C;)f==="array"||f==="nodebuffer"?m.push(String.fromCharCode.apply(null,l.slice(b,Math.min(b+c,C)))):m.push(String.fromCharCode.apply(null,l.subarray(b,Math.min(b+c,C)))),b+=c;return m.join("")},stringifyByChar:function(l){for(var f="",c=0;c<l.length;c++)f+=String.fromCharCode(l[c]);return f},applyCanBeUsed:{uint8array:(function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}})()}};function g(l){var f=65536,c=i.getTypeOf(l),m=!0;if(c==="uint8array"?m=w.applyCanBeUsed.uint8array:c==="nodebuffer"&&(m=w.applyCanBeUsed.nodebuffer),m)for(;1<f;)try{return w.stringifyByChunk(l,c,f)}catch{f=Math.floor(f/2)}return w.stringifyByChar(l)}function s(l,f){for(var c=0;c<l.length;c++)f[c]=l[c];return f}i.applyFromCharCode=g;var d={};d.string={string:p,array:function(l){return v(l,new Array(l.length))},arraybuffer:function(l){return d.string.uint8array(l).buffer},uint8array:function(l){return v(l,new Uint8Array(l.length))},nodebuffer:function(l){return v(l,e.allocBuffer(l.length))}},d.array={string:g,array:p,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return e.newBufferFrom(l)}},d.arraybuffer={string:function(l){return g(new Uint8Array(l))},array:function(l){return s(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:p,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return e.newBufferFrom(new Uint8Array(l))}},d.uint8array={string:g,array:function(l){return s(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:p,nodebuffer:function(l){return e.newBufferFrom(l)}},d.nodebuffer={string:g,array:function(l){return s(l,new Array(l.length))},arraybuffer:function(l){return d.nodebuffer.uint8array(l).buffer},uint8array:function(l){return s(l,new Uint8Array(l.length))},nodebuffer:p},i.transformTo=function(l,f){if(f=f||"",!l)return f;i.checkSupport(l);var c=i.getTypeOf(f);return d[c][l](f)},i.resolve=function(l){for(var f=l.split("/"),c=[],m=0;m<f.length;m++){var b=f[m];b==="."||b===""&&m!==0&&m!==f.length-1||(b===".."?c.pop():c.push(b))}return c.join("/")},i.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":t.nodebuffer&&e.isBuffer(l)?"nodebuffer":t.uint8array&&l instanceof Uint8Array?"uint8array":t.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(l){if(!t[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(l){var f,c,m="";for(c=0;c<(l||"").length;c++)m+="\\x"+((f=l.charCodeAt(c))<16?"0":"")+f.toString(16).toUpperCase();return m},i.delay=function(l,f,c){setImmediate(function(){l.apply(c||null,f||[])})},i.inherits=function(l,f){function c(){}c.prototype=f.prototype,l.prototype=new c},i.extend=function(){var l,f,c={};for(l=0;l<arguments.length;l++)for(f in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],f)&&c[f]===void 0&&(c[f]=arguments[l][f]);return c},i.prepareContent=function(l,f,c,m,b){return n.Promise.resolve(f).then(function(C){return t.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new n.Promise(function(A,T){var S=new FileReader;S.onload=function(x){A(x.target.result)},S.onerror=function(x){T(x.target.error)},S.readAsArrayBuffer(C)}):C}).then(function(C){var A=i.getTypeOf(C);return A?(A==="arraybuffer"?C=i.transformTo("uint8array",C):A==="string"&&(b?C=u.decode(C):c&&m!==!0&&(C=(function(T){return v(T,t.uint8array?new Uint8Array(T.length):new Array(T.length))})(C))),C):n.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,h,i){var t=r("./reader/readerFor"),u=r("./utils"),e=r("./signature"),n=r("./zipEntry"),p=r("./support");function v(w){this.files=[],this.loadOptions=w}v.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(g)+", expected "+u.pretty(w)+")")}},isSignature:function(w,g){var s=this.reader.index;this.reader.setIndex(w);var d=this.reader.readString(4)===g;return this.reader.setIndex(s),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),g=p.uint8array?"uint8array":"array",s=u.transformTo(g,w);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,g,s,d=this.zip64EndOfCentralSize-44;0<d;)w=this.reader.readInt(2),g=this.reader.readInt(4),s=this.reader.readData(g),this.zip64ExtensibleData[w]={id:w,length:g,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,g;for(w=0;w<this.files.length;w++)g=this.files[w],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(w=new n({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var g=w;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var d=g-s;if(0<d)this.isSignature(g,e.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(w){this.reader=t(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},h.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,h,i){var t=r("./reader/readerFor"),u=r("./utils"),e=r("./compressedObject"),n=r("./crc32"),p=r("./utf8"),v=r("./compressions"),w=r("./support");function g(s,d){this.options=s,this.loadOptions=d}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var d,l;if(s.skip(22),this.fileNameLength=s.readInt(2),l=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=(function(f){for(var c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&v[c].magic===f)return v[c];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,d,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var d=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(d),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=t(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var d,l,f,c=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<c;)d=s.readInt(2),l=s.readInt(2),f=s.readData(l),this.extraFields[d]={id:d,length:l,value:f};s.setIndex(c)},handleUTF8:function(){var s=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var l=u.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var c=u.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var d=t(s.value);return d.readInt(1)!==1||n(this.fileName)!==d.readInt(4)?null:p.utf8decode(d.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var d=t(s.value);return d.readInt(1)!==1||n(this.fileComment)!==d.readInt(4)?null:p.utf8decode(d.readData(s.length-5))}return null}},h.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,h,i){function t(d,l,f){this.name=d,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=l,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var u=r("./stream/StreamHelper"),e=r("./stream/DataWorker"),n=r("./utf8"),p=r("./compressedObject"),v=r("./stream/GenericWorker");t.prototype={internalStream:function(d){var l=null,f="string";try{if(!d)throw new Error("No output type specified.");var c=(f=d.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),l=this._decompressWorker();var m=!this._dataBinary;m&&!c&&(l=l.pipe(new n.Utf8EncodeWorker)),!m&&c&&(l=l.pipe(new n.Utf8DecodeWorker))}catch(b){(l=new v("error")).error(b)}return new u(l,f,"")},async:function(d,l){return this.internalStream(d).accumulate(l)},nodeStream:function(d,l){return this.internalStream(d||"nodebuffer").toNodejsStream(l)},_compressWorker:function(d,l){if(this._data instanceof p&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new n.Utf8EncodeWorker)),p.createWorkerFrom(f,d,l)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof v?this._data:new e(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<w.length;s++)t.prototype[w[s]]=g;h.exports=t},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,h,i){(function(t){var u,e,n=t.MutationObserver||t.WebKitMutationObserver;if(n){var p=0,v=new n(d),w=t.document.createTextNode("");v.observe(w,{characterData:!0}),u=function(){w.data=p=++p%2}}else if(t.setImmediate||t.MessageChannel===void 0)u="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var l=t.document.createElement("script");l.onreadystatechange=function(){d(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},t.document.documentElement.appendChild(l)}:function(){setTimeout(d,0)};else{var g=new t.MessageChannel;g.port1.onmessage=d,u=function(){g.port2.postMessage(0)}}var s=[];function d(){var l,f;e=!0;for(var c=s.length;c;){for(f=s,s=[],l=-1;++l<c;)f[l]();c=s.length}e=!1}h.exports=function(l){s.push(l)!==1||e||u()}}).call(this,typeof Ut<"u"?Ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,h,i){var t=r("immediate");function u(){}var e={},n=["REJECTED"],p=["FULFILLED"],v=["PENDING"];function w(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,c!==u&&l(this,c)}function g(c,m,b){this.promise=c,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function s(c,m,b){t(function(){var C;try{C=m(b)}catch(A){return e.reject(c,A)}C===c?e.reject(c,new TypeError("Cannot resolve promise with itself")):e.resolve(c,C)})}function d(c){var m=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof m=="function")return function(){m.apply(c,arguments)}}function l(c,m){var b=!1;function C(S){b||(b=!0,e.reject(c,S))}function A(S){b||(b=!0,e.resolve(c,S))}var T=f(function(){m(A,C)});T.status==="error"&&C(T.value)}function f(c,m){var b={};try{b.value=c(m),b.status="success"}catch(C){b.status="error",b.value=C}return b}(h.exports=w).prototype.finally=function(c){if(typeof c!="function")return this;var m=this.constructor;return this.then(function(b){return m.resolve(c()).then(function(){return b})},function(b){return m.resolve(c()).then(function(){throw b})})},w.prototype.catch=function(c){return this.then(null,c)},w.prototype.then=function(c,m){if(typeof c!="function"&&this.state===p||typeof m!="function"&&this.state===n)return this;var b=new this.constructor(u);return this.state!==v?s(b,this.state===p?c:m,this.outcome):this.queue.push(new g(b,c,m)),b},g.prototype.callFulfilled=function(c){e.resolve(this.promise,c)},g.prototype.otherCallFulfilled=function(c){s(this.promise,this.onFulfilled,c)},g.prototype.callRejected=function(c){e.reject(this.promise,c)},g.prototype.otherCallRejected=function(c){s(this.promise,this.onRejected,c)},e.resolve=function(c,m){var b=f(d,m);if(b.status==="error")return e.reject(c,b.value);var C=b.value;if(C)l(c,C);else{c.state=p,c.outcome=m;for(var A=-1,T=c.queue.length;++A<T;)c.queue[A].callFulfilled(m)}return c},e.reject=function(c,m){c.state=n,c.outcome=m;for(var b=-1,C=c.queue.length;++b<C;)c.queue[b].callRejected(m);return c},w.resolve=function(c){return c instanceof this?c:e.resolve(new this(u),c)},w.reject=function(c){var m=new this(u);return e.reject(m,c)},w.all=function(c){var m=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=c.length,C=!1;if(!b)return this.resolve([]);for(var A=new Array(b),T=0,S=-1,x=new this(u);++S<b;)R(c[S],S);return x;function R(F,L){m.resolve(F).then(function(y){A[L]=y,++T!==b||C||(C=!0,e.resolve(x,A))},function(y){C||(C=!0,e.reject(x,y))})}},w.race=function(c){var m=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=c.length,C=!1;if(!b)return this.resolve([]);for(var A=-1,T=new this(u);++A<b;)S=c[A],m.resolve(S).then(function(x){C||(C=!0,e.resolve(T,x))},function(x){C||(C=!0,e.reject(T,x))});var S;return T}},{immediate:36}],38:[function(r,h,i){var t={};(0,r("./lib/utils/common").assign)(t,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),h.exports=t},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,h,i){var t=r("./zlib/deflate"),u=r("./utils/common"),e=r("./utils/strings"),n=r("./zlib/messages"),p=r("./zlib/zstream"),v=Object.prototype.toString,w=0,g=-1,s=0,d=8;function l(c){if(!(this instanceof l))return new l(c);this.options=u.assign({level:g,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},c||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var b=t.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(b!==w)throw new Error(n[b]);if(m.header&&t.deflateSetHeader(this.strm,m.header),m.dictionary){var C;if(C=typeof m.dictionary=="string"?e.string2buf(m.dictionary):v.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(b=t.deflateSetDictionary(this.strm,C))!==w)throw new Error(n[b]);this._dict_set=!0}}function f(c,m){var b=new l(m);if(b.push(c,!0),b.err)throw b.msg||n[b.err];return b.result}l.prototype.push=function(c,m){var b,C,A=this.strm,T=this.options.chunkSize;if(this.ended)return!1;C=m===~~m?m:m===!0?4:0,typeof c=="string"?A.input=e.string2buf(c):v.call(c)==="[object ArrayBuffer]"?A.input=new Uint8Array(c):A.input=c,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new u.Buf8(T),A.next_out=0,A.avail_out=T),(b=t.deflate(A,C))!==1&&b!==w)return this.onEnd(b),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(u.shrinkBuf(A.output,A.next_out))):this.onData(u.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&b!==1);return C===4?(b=t.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===w):C!==2||(this.onEnd(w),!(A.avail_out=0))},l.prototype.onData=function(c){this.chunks.push(c)},l.prototype.onEnd=function(c){c===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},i.Deflate=l,i.deflate=f,i.deflateRaw=function(c,m){return(m=m||{}).raw=!0,f(c,m)},i.gzip=function(c,m){return(m=m||{}).gzip=!0,f(c,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,h,i){var t=r("./zlib/inflate"),u=r("./utils/common"),e=r("./utils/strings"),n=r("./zlib/constants"),p=r("./zlib/messages"),v=r("./zlib/zstream"),w=r("./zlib/gzheader"),g=Object.prototype.toString;function s(l){if(!(this instanceof s))return new s(l);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},l||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||l&&l.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var c=t.inflateInit2(this.strm,f.windowBits);if(c!==n.Z_OK)throw new Error(p[c]);this.header=new w,t.inflateGetHeader(this.strm,this.header)}function d(l,f){var c=new s(f);if(c.push(l,!0),c.err)throw c.msg||p[c.err];return c.result}s.prototype.push=function(l,f){var c,m,b,C,A,T,S=this.strm,x=this.options.chunkSize,R=this.options.dictionary,F=!1;if(this.ended)return!1;m=f===~~f?f:f===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof l=="string"?S.input=e.binstring2buf(l):g.call(l)==="[object ArrayBuffer]"?S.input=new Uint8Array(l):S.input=l,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new u.Buf8(x),S.next_out=0,S.avail_out=x),(c=t.inflate(S,n.Z_NO_FLUSH))===n.Z_NEED_DICT&&R&&(T=typeof R=="string"?e.string2buf(R):g.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,c=t.inflateSetDictionary(this.strm,T)),c===n.Z_BUF_ERROR&&F===!0&&(c=n.Z_OK,F=!1),c!==n.Z_STREAM_END&&c!==n.Z_OK)return this.onEnd(c),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&c!==n.Z_STREAM_END&&(S.avail_in!==0||m!==n.Z_FINISH&&m!==n.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=e.utf8border(S.output,S.next_out),C=S.next_out-b,A=e.buf2string(S.output,b),S.next_out=C,S.avail_out=x-C,C&&u.arraySet(S.output,S.output,b,C,0),this.onData(A)):this.onData(u.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(F=!0)}while((0<S.avail_in||S.avail_out===0)&&c!==n.Z_STREAM_END);return c===n.Z_STREAM_END&&(m=n.Z_FINISH),m===n.Z_FINISH?(c=t.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===n.Z_OK):m!==n.Z_SYNC_FLUSH||(this.onEnd(n.Z_OK),!(S.avail_out=0))},s.prototype.onData=function(l){this.chunks.push(l)},s.prototype.onEnd=function(l){l===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},i.Inflate=s,i.inflate=d,i.inflateRaw=function(l,f){return(f=f||{}).raw=!0,d(l,f)},i.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,h,i){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(n){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var v=p.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var w in v)v.hasOwnProperty(w)&&(n[w]=v[w])}}return n},i.shrinkBuf=function(n,p){return n.length===p?n:n.subarray?n.subarray(0,p):(n.length=p,n)};var u={arraySet:function(n,p,v,w,g){if(p.subarray&&n.subarray)n.set(p.subarray(v,v+w),g);else for(var s=0;s<w;s++)n[g+s]=p[v+s]},flattenChunks:function(n){var p,v,w,g,s,d;for(p=w=0,v=n.length;p<v;p++)w+=n[p].length;for(d=new Uint8Array(w),p=g=0,v=n.length;p<v;p++)s=n[p],d.set(s,g),g+=s.length;return d}},e={arraySet:function(n,p,v,w,g){for(var s=0;s<w;s++)n[g+s]=p[v+s]},flattenChunks:function(n){return[].concat.apply([],n)}};i.setTyped=function(n){n?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,u)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,e))},i.setTyped(t)},{}],42:[function(r,h,i){var t=r("./common"),u=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var n=new t.Buf8(256),p=0;p<256;p++)n[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function v(w,g){if(g<65537&&(w.subarray&&e||!w.subarray&&u))return String.fromCharCode.apply(null,t.shrinkBuf(w,g));for(var s="",d=0;d<g;d++)s+=String.fromCharCode(w[d]);return s}n[254]=n[254]=1,i.string2buf=function(w){var g,s,d,l,f,c=w.length,m=0;for(l=0;l<c;l++)(64512&(s=w.charCodeAt(l)))==55296&&l+1<c&&(64512&(d=w.charCodeAt(l+1)))==56320&&(s=65536+(s-55296<<10)+(d-56320),l++),m+=s<128?1:s<2048?2:s<65536?3:4;for(g=new t.Buf8(m),l=f=0;f<m;l++)(64512&(s=w.charCodeAt(l)))==55296&&l+1<c&&(64512&(d=w.charCodeAt(l+1)))==56320&&(s=65536+(s-55296<<10)+(d-56320),l++),s<128?g[f++]=s:(s<2048?g[f++]=192|s>>>6:(s<65536?g[f++]=224|s>>>12:(g[f++]=240|s>>>18,g[f++]=128|s>>>12&63),g[f++]=128|s>>>6&63),g[f++]=128|63&s);return g},i.buf2binstring=function(w){return v(w,w.length)},i.binstring2buf=function(w){for(var g=new t.Buf8(w.length),s=0,d=g.length;s<d;s++)g[s]=w.charCodeAt(s);return g},i.buf2string=function(w,g){var s,d,l,f,c=g||w.length,m=new Array(2*c);for(s=d=0;s<c;)if((l=w[s++])<128)m[d++]=l;else if(4<(f=n[l]))m[d++]=65533,s+=f-1;else{for(l&=f===2?31:f===3?15:7;1<f&&s<c;)l=l<<6|63&w[s++],f--;1<f?m[d++]=65533:l<65536?m[d++]=l:(l-=65536,m[d++]=55296|l>>10&1023,m[d++]=56320|1023&l)}return v(m,d)},i.utf8border=function(w,g){var s;for((g=g||w.length)>w.length&&(g=w.length),s=g-1;0<=s&&(192&w[s])==128;)s--;return s<0||s===0?g:s+n[w[s]]>g?s:g}},{"./common":41}],43:[function(r,h,i){h.exports=function(t,u,e,n){for(var p=65535&t|0,v=t>>>16&65535|0,w=0;e!==0;){for(e-=w=2e3<e?2e3:e;v=v+(p=p+u[n++]|0)|0,--w;);p%=65521,v%=65521}return p|v<<16|0}},{}],44:[function(r,h,i){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,h,i){var t=(function(){for(var u,e=[],n=0;n<256;n++){u=n;for(var p=0;p<8;p++)u=1&u?3988292384^u>>>1:u>>>1;e[n]=u}return e})();h.exports=function(u,e,n,p){var v=t,w=p+n;u^=-1;for(var g=p;g<w;g++)u=u>>>8^v[255&(u^e[g])];return-1^u}},{}],46:[function(r,h,i){var t,u=r("../utils/common"),e=r("./trees"),n=r("./adler32"),p=r("./crc32"),v=r("./messages"),w=0,g=4,s=0,d=-2,l=-1,f=4,c=2,m=8,b=9,C=286,A=30,T=19,S=2*C+1,x=15,R=3,F=258,L=F+R+1,y=42,B=113,a=1,O=2,Z=3,j=4;function X(o,q){return o.msg=v[q],q}function M(o){return(o<<1)-(4<o?9:0)}function Y(o){for(var q=o.length;0<=--q;)o[q]=0}function D(o){var q=o.state,U=q.pending;U>o.avail_out&&(U=o.avail_out),U!==0&&(u.arraySet(o.output,q.pending_buf,q.pending_out,U,o.next_out),o.next_out+=U,q.pending_out+=U,o.total_out+=U,o.avail_out-=U,q.pending-=U,q.pending===0&&(q.pending_out=0))}function N(o,q){e._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,q),o.block_start=o.strstart,D(o.strm)}function J(o,q){o.pending_buf[o.pending++]=q}function G(o,q){o.pending_buf[o.pending++]=q>>>8&255,o.pending_buf[o.pending++]=255&q}function W(o,q){var U,I,_=o.max_chain_length,P=o.strstart,$=o.prev_length,H=o.nice_match,z=o.strstart>o.w_size-L?o.strstart-(o.w_size-L):0,K=o.window,Q=o.w_mask,V=o.prev,tt=o.strstart+F,ct=K[P+$-1],at=K[P+$];o.prev_length>=o.good_match&&(_>>=2),H>o.lookahead&&(H=o.lookahead);do if(K[(U=q)+$]===at&&K[U+$-1]===ct&&K[U]===K[P]&&K[++U]===K[P+1]){P+=2,U++;do;while(K[++P]===K[++U]&&K[++P]===K[++U]&&K[++P]===K[++U]&&K[++P]===K[++U]&&K[++P]===K[++U]&&K[++P]===K[++U]&&K[++P]===K[++U]&&K[++P]===K[++U]&&P<tt);if(I=F-(tt-P),P=tt-F,$<I){if(o.match_start=q,H<=($=I))break;ct=K[P+$-1],at=K[P+$]}}while((q=V[q&Q])>z&&--_!=0);return $<=o.lookahead?$:o.lookahead}function ot(o){var q,U,I,_,P,$,H,z,K,Q,V=o.w_size;do{if(_=o.window_size-o.lookahead-o.strstart,o.strstart>=V+(V-L)){for(u.arraySet(o.window,o.window,V,V,0),o.match_start-=V,o.strstart-=V,o.block_start-=V,q=U=o.hash_size;I=o.head[--q],o.head[q]=V<=I?I-V:0,--U;);for(q=U=V;I=o.prev[--q],o.prev[q]=V<=I?I-V:0,--U;);_+=V}if(o.strm.avail_in===0)break;if($=o.strm,H=o.window,z=o.strstart+o.lookahead,K=_,Q=void 0,Q=$.avail_in,K<Q&&(Q=K),U=Q===0?0:($.avail_in-=Q,u.arraySet(H,$.input,$.next_in,Q,z),$.state.wrap===1?$.adler=n($.adler,H,Q,z):$.state.wrap===2&&($.adler=p($.adler,H,Q,z)),$.next_in+=Q,$.total_in+=Q,Q),o.lookahead+=U,o.lookahead+o.insert>=R)for(P=o.strstart-o.insert,o.ins_h=o.window[P],o.ins_h=(o.ins_h<<o.hash_shift^o.window[P+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[P+R-1])&o.hash_mask,o.prev[P&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=P,P++,o.insert--,!(o.lookahead+o.insert<R)););}while(o.lookahead<L&&o.strm.avail_in!==0)}function st(o,q){for(var U,I;;){if(o.lookahead<L){if(ot(o),o.lookahead<L&&q===w)return a;if(o.lookahead===0)break}if(U=0,o.lookahead>=R&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,U=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),U!==0&&o.strstart-U<=o.w_size-L&&(o.match_length=W(o,U)),o.match_length>=R)if(I=e._tr_tally(o,o.strstart-o.match_start,o.match_length-R),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=R){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,U=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else I=e._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(I&&(N(o,!1),o.strm.avail_out===0))return a}return o.insert=o.strstart<R-1?o.strstart:R-1,q===g?(N(o,!0),o.strm.avail_out===0?Z:j):o.last_lit&&(N(o,!1),o.strm.avail_out===0)?a:O}function et(o,q){for(var U,I,_;;){if(o.lookahead<L){if(ot(o),o.lookahead<L&&q===w)return a;if(o.lookahead===0)break}if(U=0,o.lookahead>=R&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,U=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=R-1,U!==0&&o.prev_length<o.max_lazy_match&&o.strstart-U<=o.w_size-L&&(o.match_length=W(o,U),o.match_length<=5&&(o.strategy===1||o.match_length===R&&4096<o.strstart-o.match_start)&&(o.match_length=R-1)),o.prev_length>=R&&o.match_length<=o.prev_length){for(_=o.strstart+o.lookahead-R,I=e._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-R),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=_&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,U=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=R-1,o.strstart++,I&&(N(o,!1),o.strm.avail_out===0))return a}else if(o.match_available){if((I=e._tr_tally(o,0,o.window[o.strstart-1]))&&N(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return a}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(I=e._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<R-1?o.strstart:R-1,q===g?(N(o,!0),o.strm.avail_out===0?Z:j):o.last_lit&&(N(o,!1),o.strm.avail_out===0)?a:O}function it(o,q,U,I,_){this.good_length=o,this.max_lazy=q,this.nice_length=U,this.max_chain=I,this.func=_}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*S),this.dyn_dtree=new u.Buf16(2*(2*A+1)),this.bl_tree=new u.Buf16(2*(2*T+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(x+1),this.heap=new u.Buf16(2*C+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*C+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(o){var q;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=c,(q=o.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?y:B,o.adler=q.wrap===2?0:1,q.last_flush=w,e._tr_init(q),s):X(o,d)}function gt(o){var q=ut(o);return q===s&&(function(U){U.window_size=2*U.w_size,Y(U.head),U.max_lazy_match=t[U.level].max_lazy,U.good_match=t[U.level].good_length,U.nice_match=t[U.level].nice_length,U.max_chain_length=t[U.level].max_chain,U.strstart=0,U.block_start=0,U.lookahead=0,U.insert=0,U.match_length=U.prev_length=R-1,U.match_available=0,U.ins_h=0})(o.state),q}function dt(o,q,U,I,_,P){if(!o)return d;var $=1;if(q===l&&(q=6),I<0?($=0,I=-I):15<I&&($=2,I-=16),_<1||b<_||U!==m||I<8||15<I||q<0||9<q||P<0||f<P)return X(o,d);I===8&&(I=9);var H=new lt;return(o.state=H).strm=o,H.wrap=$,H.gzhead=null,H.w_bits=I,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=_+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+R-1)/R),H.window=new u.Buf8(2*H.w_size),H.head=new u.Buf16(H.hash_size),H.prev=new u.Buf16(H.w_size),H.lit_bufsize=1<<_+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new u.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=q,H.strategy=P,H.method=U,gt(o)}t=[new it(0,0,0,0,function(o,q){var U=65535;for(U>o.pending_buf_size-5&&(U=o.pending_buf_size-5);;){if(o.lookahead<=1){if(ot(o),o.lookahead===0&&q===w)return a;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var I=o.block_start+U;if((o.strstart===0||o.strstart>=I)&&(o.lookahead=o.strstart-I,o.strstart=I,N(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-L&&(N(o,!1),o.strm.avail_out===0))return a}return o.insert=0,q===g?(N(o,!0),o.strm.avail_out===0?Z:j):(o.strstart>o.block_start&&(N(o,!1),o.strm.avail_out),a)}),new it(4,4,8,4,st),new it(4,5,16,8,st),new it(4,6,32,32,st),new it(4,4,16,16,et),new it(8,16,32,32,et),new it(8,16,128,128,et),new it(8,32,128,256,et),new it(32,128,258,1024,et),new it(32,258,258,4096,et)],i.deflateInit=function(o,q){return dt(o,q,m,15,8,0)},i.deflateInit2=dt,i.deflateReset=gt,i.deflateResetKeep=ut,i.deflateSetHeader=function(o,q){return o&&o.state?o.state.wrap!==2?d:(o.state.gzhead=q,s):d},i.deflate=function(o,q){var U,I,_,P;if(!o||!o.state||5<q||q<0)return o?X(o,d):d;if(I=o.state,!o.output||!o.input&&o.avail_in!==0||I.status===666&&q!==g)return X(o,o.avail_out===0?-5:d);if(I.strm=o,U=I.last_flush,I.last_flush=q,I.status===y)if(I.wrap===2)o.adler=0,J(I,31),J(I,139),J(I,8),I.gzhead?(J(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),J(I,255&I.gzhead.time),J(I,I.gzhead.time>>8&255),J(I,I.gzhead.time>>16&255),J(I,I.gzhead.time>>24&255),J(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),J(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(J(I,255&I.gzhead.extra.length),J(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(o.adler=p(o.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(J(I,0),J(I,0),J(I,0),J(I,0),J(I,0),J(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),J(I,3),I.status=B);else{var $=m+(I.w_bits-8<<4)<<8;$|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&($|=32),$+=31-$%31,I.status=B,G(I,$),I.strstart!==0&&(G(I,o.adler>>>16),G(I,65535&o.adler)),o.adler=1}if(I.status===69)if(I.gzhead.extra){for(_=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>_&&(o.adler=p(o.adler,I.pending_buf,I.pending-_,_)),D(o),_=I.pending,I.pending!==I.pending_buf_size));)J(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>_&&(o.adler=p(o.adler,I.pending_buf,I.pending-_,_)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){_=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>_&&(o.adler=p(o.adler,I.pending_buf,I.pending-_,_)),D(o),_=I.pending,I.pending===I.pending_buf_size)){P=1;break}P=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,J(I,P)}while(P!==0);I.gzhead.hcrc&&I.pending>_&&(o.adler=p(o.adler,I.pending_buf,I.pending-_,_)),P===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){_=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>_&&(o.adler=p(o.adler,I.pending_buf,I.pending-_,_)),D(o),_=I.pending,I.pending===I.pending_buf_size)){P=1;break}P=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,J(I,P)}while(P!==0);I.gzhead.hcrc&&I.pending>_&&(o.adler=p(o.adler,I.pending_buf,I.pending-_,_)),P===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&D(o),I.pending+2<=I.pending_buf_size&&(J(I,255&o.adler),J(I,o.adler>>8&255),o.adler=0,I.status=B)):I.status=B),I.pending!==0){if(D(o),o.avail_out===0)return I.last_flush=-1,s}else if(o.avail_in===0&&M(q)<=M(U)&&q!==g)return X(o,-5);if(I.status===666&&o.avail_in!==0)return X(o,-5);if(o.avail_in!==0||I.lookahead!==0||q!==w&&I.status!==666){var H=I.strategy===2?(function(z,K){for(var Q;;){if(z.lookahead===0&&(ot(z),z.lookahead===0)){if(K===w)return a;break}if(z.match_length=0,Q=e._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,Q&&(N(z,!1),z.strm.avail_out===0))return a}return z.insert=0,K===g?(N(z,!0),z.strm.avail_out===0?Z:j):z.last_lit&&(N(z,!1),z.strm.avail_out===0)?a:O})(I,q):I.strategy===3?(function(z,K){for(var Q,V,tt,ct,at=z.window;;){if(z.lookahead<=F){if(ot(z),z.lookahead<=F&&K===w)return a;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=R&&0<z.strstart&&(V=at[tt=z.strstart-1])===at[++tt]&&V===at[++tt]&&V===at[++tt]){ct=z.strstart+F;do;while(V===at[++tt]&&V===at[++tt]&&V===at[++tt]&&V===at[++tt]&&V===at[++tt]&&V===at[++tt]&&V===at[++tt]&&V===at[++tt]&&tt<ct);z.match_length=F-(ct-tt),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=R?(Q=e._tr_tally(z,1,z.match_length-R),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(Q=e._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),Q&&(N(z,!1),z.strm.avail_out===0))return a}return z.insert=0,K===g?(N(z,!0),z.strm.avail_out===0?Z:j):z.last_lit&&(N(z,!1),z.strm.avail_out===0)?a:O})(I,q):t[I.level].func(I,q);if(H!==Z&&H!==j||(I.status=666),H===a||H===Z)return o.avail_out===0&&(I.last_flush=-1),s;if(H===O&&(q===1?e._tr_align(I):q!==5&&(e._tr_stored_block(I,0,0,!1),q===3&&(Y(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),D(o),o.avail_out===0))return I.last_flush=-1,s}return q!==g?s:I.wrap<=0?1:(I.wrap===2?(J(I,255&o.adler),J(I,o.adler>>8&255),J(I,o.adler>>16&255),J(I,o.adler>>24&255),J(I,255&o.total_in),J(I,o.total_in>>8&255),J(I,o.total_in>>16&255),J(I,o.total_in>>24&255)):(G(I,o.adler>>>16),G(I,65535&o.adler)),D(o),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?s:1)},i.deflateEnd=function(o){var q;return o&&o.state?(q=o.state.status)!==y&&q!==69&&q!==73&&q!==91&&q!==103&&q!==B&&q!==666?X(o,d):(o.state=null,q===B?X(o,-3):s):d},i.deflateSetDictionary=function(o,q){var U,I,_,P,$,H,z,K,Q=q.length;if(!o||!o.state||(P=(U=o.state).wrap)===2||P===1&&U.status!==y||U.lookahead)return d;for(P===1&&(o.adler=n(o.adler,q,Q,0)),U.wrap=0,Q>=U.w_size&&(P===0&&(Y(U.head),U.strstart=0,U.block_start=0,U.insert=0),K=new u.Buf8(U.w_size),u.arraySet(K,q,Q-U.w_size,U.w_size,0),q=K,Q=U.w_size),$=o.avail_in,H=o.next_in,z=o.input,o.avail_in=Q,o.next_in=0,o.input=q,ot(U);U.lookahead>=R;){for(I=U.strstart,_=U.lookahead-(R-1);U.ins_h=(U.ins_h<<U.hash_shift^U.window[I+R-1])&U.hash_mask,U.prev[I&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=I,I++,--_;);U.strstart=I,U.lookahead=R-1,ot(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=R-1,U.match_available=0,o.next_in=H,o.input=z,o.avail_in=$,U.wrap=P,s},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,h,i){h.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,h,i){h.exports=function(t,u){var e,n,p,v,w,g,s,d,l,f,c,m,b,C,A,T,S,x,R,F,L,y,B,a,O;e=t.state,n=t.next_in,a=t.input,p=n+(t.avail_in-5),v=t.next_out,O=t.output,w=v-(u-t.avail_out),g=v+(t.avail_out-257),s=e.dmax,d=e.wsize,l=e.whave,f=e.wnext,c=e.window,m=e.hold,b=e.bits,C=e.lencode,A=e.distcode,T=(1<<e.lenbits)-1,S=(1<<e.distbits)-1;t:do{b<15&&(m+=a[n++]<<b,b+=8,m+=a[n++]<<b,b+=8),x=C[m&T];e:for(;;){if(m>>>=R=x>>>24,b-=R,(R=x>>>16&255)===0)O[v++]=65535&x;else{if(!(16&R)){if((64&R)==0){x=C[(65535&x)+(m&(1<<R)-1)];continue e}if(32&R){e.mode=12;break t}t.msg="invalid literal/length code",e.mode=30;break t}F=65535&x,(R&=15)&&(b<R&&(m+=a[n++]<<b,b+=8),F+=m&(1<<R)-1,m>>>=R,b-=R),b<15&&(m+=a[n++]<<b,b+=8,m+=a[n++]<<b,b+=8),x=A[m&S];n:for(;;){if(m>>>=R=x>>>24,b-=R,!(16&(R=x>>>16&255))){if((64&R)==0){x=A[(65535&x)+(m&(1<<R)-1)];continue n}t.msg="invalid distance code",e.mode=30;break t}if(L=65535&x,b<(R&=15)&&(m+=a[n++]<<b,(b+=8)<R&&(m+=a[n++]<<b,b+=8)),s<(L+=m&(1<<R)-1)){t.msg="invalid distance too far back",e.mode=30;break t}if(m>>>=R,b-=R,(R=v-w)<L){if(l<(R=L-R)&&e.sane){t.msg="invalid distance too far back",e.mode=30;break t}if(B=c,(y=0)===f){if(y+=d-R,R<F){for(F-=R;O[v++]=c[y++],--R;);y=v-L,B=O}}else if(f<R){if(y+=d+f-R,(R-=f)<F){for(F-=R;O[v++]=c[y++],--R;);if(y=0,f<F){for(F-=R=f;O[v++]=c[y++],--R;);y=v-L,B=O}}}else if(y+=f-R,R<F){for(F-=R;O[v++]=c[y++],--R;);y=v-L,B=O}for(;2<F;)O[v++]=B[y++],O[v++]=B[y++],O[v++]=B[y++],F-=3;F&&(O[v++]=B[y++],1<F&&(O[v++]=B[y++]))}else{for(y=v-L;O[v++]=O[y++],O[v++]=O[y++],O[v++]=O[y++],2<(F-=3););F&&(O[v++]=O[y++],1<F&&(O[v++]=O[y++]))}break}}break}}while(n<p&&v<g);n-=F=b>>3,m&=(1<<(b-=F<<3))-1,t.next_in=n,t.next_out=v,t.avail_in=n<p?p-n+5:5-(n-p),t.avail_out=v<g?g-v+257:257-(v-g),e.hold=m,e.bits=b}},{}],49:[function(r,h,i){var t=r("../utils/common"),u=r("./adler32"),e=r("./crc32"),n=r("./inffast"),p=r("./inftrees"),v=1,w=2,g=0,s=-2,d=1,l=852,f=592;function c(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(y){var B;return y&&y.state?(B=y.state,y.total_in=y.total_out=B.total=0,y.msg="",B.wrap&&(y.adler=1&B.wrap),B.mode=d,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new t.Buf32(l),B.distcode=B.distdyn=new t.Buf32(f),B.sane=1,B.back=-1,g):s}function C(y){var B;return y&&y.state?((B=y.state).wsize=0,B.whave=0,B.wnext=0,b(y)):s}function A(y,B){var a,O;return y&&y.state?(O=y.state,B<0?(a=0,B=-B):(a=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?s:(O.window!==null&&O.wbits!==B&&(O.window=null),O.wrap=a,O.wbits=B,C(y))):s}function T(y,B){var a,O;return y?(O=new m,(y.state=O).window=null,(a=A(y,B))!==g&&(y.state=null),a):s}var S,x,R=!0;function F(y){if(R){var B;for(S=new t.Buf32(512),x=new t.Buf32(32),B=0;B<144;)y.lens[B++]=8;for(;B<256;)y.lens[B++]=9;for(;B<280;)y.lens[B++]=7;for(;B<288;)y.lens[B++]=8;for(p(v,y.lens,0,288,S,0,y.work,{bits:9}),B=0;B<32;)y.lens[B++]=5;p(w,y.lens,0,32,x,0,y.work,{bits:5}),R=!1}y.lencode=S,y.lenbits=9,y.distcode=x,y.distbits=5}function L(y,B,a,O){var Z,j=y.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new t.Buf8(j.wsize)),O>=j.wsize?(t.arraySet(j.window,B,a-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(O<(Z=j.wsize-j.wnext)&&(Z=O),t.arraySet(j.window,B,a-O,Z,j.wnext),(O-=Z)?(t.arraySet(j.window,B,a-O,O,0),j.wnext=O,j.whave=j.wsize):(j.wnext+=Z,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=Z))),0}i.inflateReset=C,i.inflateReset2=A,i.inflateResetKeep=b,i.inflateInit=function(y){return T(y,15)},i.inflateInit2=T,i.inflate=function(y,B){var a,O,Z,j,X,M,Y,D,N,J,G,W,ot,st,et,it,lt,ut,gt,dt,o,q,U,I,_=0,P=new t.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return s;(a=y.state).mode===12&&(a.mode=13),X=y.next_out,Z=y.output,Y=y.avail_out,j=y.next_in,O=y.input,M=y.avail_in,D=a.hold,N=a.bits,J=M,G=Y,q=g;t:for(;;)switch(a.mode){case d:if(a.wrap===0){a.mode=13;break}for(;N<16;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(2&a.wrap&&D===35615){P[a.check=0]=255&D,P[1]=D>>>8&255,a.check=e(a.check,P,2,0),N=D=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&D)<<8)+(D>>8))%31){y.msg="incorrect header check",a.mode=30;break}if((15&D)!=8){y.msg="unknown compression method",a.mode=30;break}if(N-=4,o=8+(15&(D>>>=4)),a.wbits===0)a.wbits=o;else if(o>a.wbits){y.msg="invalid window size",a.mode=30;break}a.dmax=1<<o,y.adler=a.check=1,a.mode=512&D?10:12,N=D=0;break;case 2:for(;N<16;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(a.flags=D,(255&a.flags)!=8){y.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){y.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=D>>8&1),512&a.flags&&(P[0]=255&D,P[1]=D>>>8&255,a.check=e(a.check,P,2,0)),N=D=0,a.mode=3;case 3:for(;N<32;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}a.head&&(a.head.time=D),512&a.flags&&(P[0]=255&D,P[1]=D>>>8&255,P[2]=D>>>16&255,P[3]=D>>>24&255,a.check=e(a.check,P,4,0)),N=D=0,a.mode=4;case 4:for(;N<16;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}a.head&&(a.head.xflags=255&D,a.head.os=D>>8),512&a.flags&&(P[0]=255&D,P[1]=D>>>8&255,a.check=e(a.check,P,2,0)),N=D=0,a.mode=5;case 5:if(1024&a.flags){for(;N<16;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}a.length=D,a.head&&(a.head.extra_len=D),512&a.flags&&(P[0]=255&D,P[1]=D>>>8&255,a.check=e(a.check,P,2,0)),N=D=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(M<(W=a.length)&&(W=M),W&&(a.head&&(o=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),t.arraySet(a.head.extra,O,j,W,o)),512&a.flags&&(a.check=e(a.check,O,W,j)),M-=W,j+=W,a.length-=W),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(M===0)break t;for(W=0;o=O[j+W++],a.head&&o&&a.length<65536&&(a.head.name+=String.fromCharCode(o)),o&&W<M;);if(512&a.flags&&(a.check=e(a.check,O,W,j)),M-=W,j+=W,o)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(M===0)break t;for(W=0;o=O[j+W++],a.head&&o&&a.length<65536&&(a.head.comment+=String.fromCharCode(o)),o&&W<M;);if(512&a.flags&&(a.check=e(a.check,O,W,j)),M-=W,j+=W,o)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;N<16;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(D!==(65535&a.check)){y.msg="header crc mismatch",a.mode=30;break}N=D=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),y.adler=a.check=0,a.mode=12;break;case 10:for(;N<32;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}y.adler=a.check=c(D),N=D=0,a.mode=11;case 11:if(a.havedict===0)return y.next_out=X,y.avail_out=Y,y.next_in=j,y.avail_in=M,a.hold=D,a.bits=N,2;y.adler=a.check=1,a.mode=12;case 12:if(B===5||B===6)break t;case 13:if(a.last){D>>>=7&N,N-=7&N,a.mode=27;break}for(;N<3;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}switch(a.last=1&D,N-=1,3&(D>>>=1)){case 0:a.mode=14;break;case 1:if(F(a),a.mode=20,B!==6)break;D>>>=2,N-=2;break t;case 2:a.mode=17;break;case 3:y.msg="invalid block type",a.mode=30}D>>>=2,N-=2;break;case 14:for(D>>>=7&N,N-=7&N;N<32;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if((65535&D)!=(D>>>16^65535)){y.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&D,N=D=0,a.mode=15,B===6)break t;case 15:a.mode=16;case 16:if(W=a.length){if(M<W&&(W=M),Y<W&&(W=Y),W===0)break t;t.arraySet(Z,O,j,W,X),M-=W,j+=W,Y-=W,X+=W,a.length-=W;break}a.mode=12;break;case 17:for(;N<14;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(a.nlen=257+(31&D),D>>>=5,N-=5,a.ndist=1+(31&D),D>>>=5,N-=5,a.ncode=4+(15&D),D>>>=4,N-=4,286<a.nlen||30<a.ndist){y.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;N<3;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}a.lens[$[a.have++]]=7&D,D>>>=3,N-=3}for(;a.have<19;)a.lens[$[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,U={bits:a.lenbits},q=p(0,a.lens,0,19,a.lencode,0,a.work,U),a.lenbits=U.bits,q){y.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;it=(_=a.lencode[D&(1<<a.lenbits)-1])>>>16&255,lt=65535&_,!((et=_>>>24)<=N);){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(lt<16)D>>>=et,N-=et,a.lens[a.have++]=lt;else{if(lt===16){for(I=et+2;N<I;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(D>>>=et,N-=et,a.have===0){y.msg="invalid bit length repeat",a.mode=30;break}o=a.lens[a.have-1],W=3+(3&D),D>>>=2,N-=2}else if(lt===17){for(I=et+3;N<I;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}N-=et,o=0,W=3+(7&(D>>>=et)),D>>>=3,N-=3}else{for(I=et+7;N<I;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}N-=et,o=0,W=11+(127&(D>>>=et)),D>>>=7,N-=7}if(a.have+W>a.nlen+a.ndist){y.msg="invalid bit length repeat",a.mode=30;break}for(;W--;)a.lens[a.have++]=o}}if(a.mode===30)break;if(a.lens[256]===0){y.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,U={bits:a.lenbits},q=p(v,a.lens,0,a.nlen,a.lencode,0,a.work,U),a.lenbits=U.bits,q){y.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,U={bits:a.distbits},q=p(w,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,U),a.distbits=U.bits,q){y.msg="invalid distances set",a.mode=30;break}if(a.mode=20,B===6)break t;case 20:a.mode=21;case 21:if(6<=M&&258<=Y){y.next_out=X,y.avail_out=Y,y.next_in=j,y.avail_in=M,a.hold=D,a.bits=N,n(y,G),X=y.next_out,Z=y.output,Y=y.avail_out,j=y.next_in,O=y.input,M=y.avail_in,D=a.hold,N=a.bits,a.mode===12&&(a.back=-1);break}for(a.back=0;it=(_=a.lencode[D&(1<<a.lenbits)-1])>>>16&255,lt=65535&_,!((et=_>>>24)<=N);){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(it&&(240&it)==0){for(ut=et,gt=it,dt=lt;it=(_=a.lencode[dt+((D&(1<<ut+gt)-1)>>ut)])>>>16&255,lt=65535&_,!(ut+(et=_>>>24)<=N);){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}D>>>=ut,N-=ut,a.back+=ut}if(D>>>=et,N-=et,a.back+=et,a.length=lt,it===0){a.mode=26;break}if(32&it){a.back=-1,a.mode=12;break}if(64&it){y.msg="invalid literal/length code",a.mode=30;break}a.extra=15&it,a.mode=22;case 22:if(a.extra){for(I=a.extra;N<I;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}a.length+=D&(1<<a.extra)-1,D>>>=a.extra,N-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;it=(_=a.distcode[D&(1<<a.distbits)-1])>>>16&255,lt=65535&_,!((et=_>>>24)<=N);){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if((240&it)==0){for(ut=et,gt=it,dt=lt;it=(_=a.distcode[dt+((D&(1<<ut+gt)-1)>>ut)])>>>16&255,lt=65535&_,!(ut+(et=_>>>24)<=N);){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}D>>>=ut,N-=ut,a.back+=ut}if(D>>>=et,N-=et,a.back+=et,64&it){y.msg="invalid distance code",a.mode=30;break}a.offset=lt,a.extra=15&it,a.mode=24;case 24:if(a.extra){for(I=a.extra;N<I;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}a.offset+=D&(1<<a.extra)-1,D>>>=a.extra,N-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){y.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(Y===0)break t;if(W=G-Y,a.offset>W){if((W=a.offset-W)>a.whave&&a.sane){y.msg="invalid distance too far back",a.mode=30;break}ot=W>a.wnext?(W-=a.wnext,a.wsize-W):a.wnext-W,W>a.length&&(W=a.length),st=a.window}else st=Z,ot=X-a.offset,W=a.length;for(Y<W&&(W=Y),Y-=W,a.length-=W;Z[X++]=st[ot++],--W;);a.length===0&&(a.mode=21);break;case 26:if(Y===0)break t;Z[X++]=a.length,Y--,a.mode=21;break;case 27:if(a.wrap){for(;N<32;){if(M===0)break t;M--,D|=O[j++]<<N,N+=8}if(G-=Y,y.total_out+=G,a.total+=G,G&&(y.adler=a.check=a.flags?e(a.check,Z,G,X-G):u(a.check,Z,G,X-G)),G=Y,(a.flags?D:c(D))!==a.check){y.msg="incorrect data check",a.mode=30;break}N=D=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;N<32;){if(M===0)break t;M--,D+=O[j++]<<N,N+=8}if(D!==(4294967295&a.total)){y.msg="incorrect length check",a.mode=30;break}N=D=0}a.mode=29;case 29:q=1;break t;case 30:q=-3;break t;case 31:return-4;case 32:default:return s}return y.next_out=X,y.avail_out=Y,y.next_in=j,y.avail_in=M,a.hold=D,a.bits=N,(a.wsize||G!==y.avail_out&&a.mode<30&&(a.mode<27||B!==4))&&L(y,y.output,y.next_out,G-y.avail_out)?(a.mode=31,-4):(J-=y.avail_in,G-=y.avail_out,y.total_in+=J,y.total_out+=G,a.total+=G,a.wrap&&G&&(y.adler=a.check=a.flags?e(a.check,Z,G,y.next_out-G):u(a.check,Z,G,y.next_out-G)),y.data_type=a.bits+(a.last?64:0)+(a.mode===12?128:0)+(a.mode===20||a.mode===15?256:0),(J==0&&G===0||B===4)&&q===g&&(q=-5),q)},i.inflateEnd=function(y){if(!y||!y.state)return s;var B=y.state;return B.window&&(B.window=null),y.state=null,g},i.inflateGetHeader=function(y,B){var a;return y&&y.state?(2&(a=y.state).wrap)==0?s:((a.head=B).done=!1,g):s},i.inflateSetDictionary=function(y,B){var a,O=B.length;return y&&y.state?(a=y.state).wrap!==0&&a.mode!==11?s:a.mode===11&&u(1,B,O,0)!==a.check?-3:L(y,B,O,O)?(a.mode=31,-4):(a.havedict=1,g):s},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,h,i){var t=r("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(v,w,g,s,d,l,f,c){var m,b,C,A,T,S,x,R,F,L=c.bits,y=0,B=0,a=0,O=0,Z=0,j=0,X=0,M=0,Y=0,D=0,N=null,J=0,G=new t.Buf16(16),W=new t.Buf16(16),ot=null,st=0;for(y=0;y<=15;y++)G[y]=0;for(B=0;B<s;B++)G[w[g+B]]++;for(Z=L,O=15;1<=O&&G[O]===0;O--);if(O<Z&&(Z=O),O===0)return d[l++]=20971520,d[l++]=20971520,c.bits=1,0;for(a=1;a<O&&G[a]===0;a++);for(Z<a&&(Z=a),y=M=1;y<=15;y++)if(M<<=1,(M-=G[y])<0)return-1;if(0<M&&(v===0||O!==1))return-1;for(W[1]=0,y=1;y<15;y++)W[y+1]=W[y]+G[y];for(B=0;B<s;B++)w[g+B]!==0&&(f[W[w[g+B]]++]=B);if(S=v===0?(N=ot=f,19):v===1?(N=u,J-=257,ot=e,st-=257,256):(N=n,ot=p,-1),y=a,T=l,X=B=D=0,C=-1,A=(Y=1<<(j=Z))-1,v===1&&852<Y||v===2&&592<Y)return 1;for(;;){for(x=y-X,F=f[B]<S?(R=0,f[B]):f[B]>S?(R=ot[st+f[B]],N[J+f[B]]):(R=96,0),m=1<<y-X,a=b=1<<j;d[T+(D>>X)+(b-=m)]=x<<24|R<<16|F|0,b!==0;);for(m=1<<y-1;D&m;)m>>=1;if(m!==0?(D&=m-1,D+=m):D=0,B++,--G[y]==0){if(y===O)break;y=w[g+f[B]]}if(Z<y&&(D&A)!==C){for(X===0&&(X=Z),T+=a,M=1<<(j=y-X);j+X<O&&!((M-=G[j+X])<=0);)j++,M<<=1;if(Y+=1<<j,v===1&&852<Y||v===2&&592<Y)return 1;d[C=D&A]=Z<<24|j<<16|T-l|0}}return D!==0&&(d[T+D]=y-X<<24|64<<16|0),c.bits=Z,0}},{"../utils/common":41}],51:[function(r,h,i){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,h,i){var t=r("../utils/common"),u=0,e=1;function n(_){for(var P=_.length;0<=--P;)_[P]=0}var p=0,v=29,w=256,g=w+1+v,s=30,d=19,l=2*g+1,f=15,c=16,m=7,b=256,C=16,A=17,T=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(g+2));n(L);var y=new Array(2*s);n(y);var B=new Array(512);n(B);var a=new Array(256);n(a);var O=new Array(v);n(O);var Z,j,X,M=new Array(s);function Y(_,P,$,H,z){this.static_tree=_,this.extra_bits=P,this.extra_base=$,this.elems=H,this.max_length=z,this.has_stree=_&&_.length}function D(_,P){this.dyn_tree=_,this.max_code=0,this.stat_desc=P}function N(_){return _<256?B[_]:B[256+(_>>>7)]}function J(_,P){_.pending_buf[_.pending++]=255&P,_.pending_buf[_.pending++]=P>>>8&255}function G(_,P,$){_.bi_valid>c-$?(_.bi_buf|=P<<_.bi_valid&65535,J(_,_.bi_buf),_.bi_buf=P>>c-_.bi_valid,_.bi_valid+=$-c):(_.bi_buf|=P<<_.bi_valid&65535,_.bi_valid+=$)}function W(_,P,$){G(_,$[2*P],$[2*P+1])}function ot(_,P){for(var $=0;$|=1&_,_>>>=1,$<<=1,0<--P;);return $>>>1}function st(_,P,$){var H,z,K=new Array(f+1),Q=0;for(H=1;H<=f;H++)K[H]=Q=Q+$[H-1]<<1;for(z=0;z<=P;z++){var V=_[2*z+1];V!==0&&(_[2*z]=ot(K[V]++,V))}}function et(_){var P;for(P=0;P<g;P++)_.dyn_ltree[2*P]=0;for(P=0;P<s;P++)_.dyn_dtree[2*P]=0;for(P=0;P<d;P++)_.bl_tree[2*P]=0;_.dyn_ltree[2*b]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function it(_){8<_.bi_valid?J(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function lt(_,P,$,H){var z=2*P,K=2*$;return _[z]<_[K]||_[z]===_[K]&&H[P]<=H[$]}function ut(_,P,$){for(var H=_.heap[$],z=$<<1;z<=_.heap_len&&(z<_.heap_len&&lt(P,_.heap[z+1],_.heap[z],_.depth)&&z++,!lt(P,H,_.heap[z],_.depth));)_.heap[$]=_.heap[z],$=z,z<<=1;_.heap[$]=H}function gt(_,P,$){var H,z,K,Q,V=0;if(_.last_lit!==0)for(;H=_.pending_buf[_.d_buf+2*V]<<8|_.pending_buf[_.d_buf+2*V+1],z=_.pending_buf[_.l_buf+V],V++,H===0?W(_,z,P):(W(_,(K=a[z])+w+1,P),(Q=S[K])!==0&&G(_,z-=O[K],Q),W(_,K=N(--H),$),(Q=x[K])!==0&&G(_,H-=M[K],Q)),V<_.last_lit;);W(_,b,P)}function dt(_,P){var $,H,z,K=P.dyn_tree,Q=P.stat_desc.static_tree,V=P.stat_desc.has_stree,tt=P.stat_desc.elems,ct=-1;for(_.heap_len=0,_.heap_max=l,$=0;$<tt;$++)K[2*$]!==0?(_.heap[++_.heap_len]=ct=$,_.depth[$]=0):K[2*$+1]=0;for(;_.heap_len<2;)K[2*(z=_.heap[++_.heap_len]=ct<2?++ct:0)]=1,_.depth[z]=0,_.opt_len--,V&&(_.static_len-=Q[2*z+1]);for(P.max_code=ct,$=_.heap_len>>1;1<=$;$--)ut(_,K,$);for(z=tt;$=_.heap[1],_.heap[1]=_.heap[_.heap_len--],ut(_,K,1),H=_.heap[1],_.heap[--_.heap_max]=$,_.heap[--_.heap_max]=H,K[2*z]=K[2*$]+K[2*H],_.depth[z]=(_.depth[$]>=_.depth[H]?_.depth[$]:_.depth[H])+1,K[2*$+1]=K[2*H+1]=z,_.heap[1]=z++,ut(_,K,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],(function(at,yt){var Rt,wt,Lt,ht,Dt,Ht,bt=yt.dyn_tree,ve=yt.max_code,cn=yt.stat_desc.static_tree,un=yt.stat_desc.has_stree,dn=yt.stat_desc.extra_bits,we=yt.stat_desc.extra_base,xt=yt.stat_desc.max_length,Ft=0;for(ht=0;ht<=f;ht++)at.bl_count[ht]=0;for(bt[2*at.heap[at.heap_max]+1]=0,Rt=at.heap_max+1;Rt<l;Rt++)xt<(ht=bt[2*bt[2*(wt=at.heap[Rt])+1]+1]+1)&&(ht=xt,Ft++),bt[2*wt+1]=ht,ve<wt||(at.bl_count[ht]++,Dt=0,we<=wt&&(Dt=dn[wt-we]),Ht=bt[2*wt],at.opt_len+=Ht*(ht+Dt),un&&(at.static_len+=Ht*(cn[2*wt+1]+Dt)));if(Ft!==0){do{for(ht=xt-1;at.bl_count[ht]===0;)ht--;at.bl_count[ht]--,at.bl_count[ht+1]+=2,at.bl_count[xt]--,Ft-=2}while(0<Ft);for(ht=xt;ht!==0;ht--)for(wt=at.bl_count[ht];wt!==0;)ve<(Lt=at.heap[--Rt])||(bt[2*Lt+1]!==ht&&(at.opt_len+=(ht-bt[2*Lt+1])*bt[2*Lt],bt[2*Lt+1]=ht),wt--)}})(_,P),st(K,ct,_.bl_count)}function o(_,P,$){var H,z,K=-1,Q=P[1],V=0,tt=7,ct=4;for(Q===0&&(tt=138,ct=3),P[2*($+1)+1]=65535,H=0;H<=$;H++)z=Q,Q=P[2*(H+1)+1],++V<tt&&z===Q||(V<ct?_.bl_tree[2*z]+=V:z!==0?(z!==K&&_.bl_tree[2*z]++,_.bl_tree[2*C]++):V<=10?_.bl_tree[2*A]++:_.bl_tree[2*T]++,K=z,ct=(V=0)===Q?(tt=138,3):z===Q?(tt=6,3):(tt=7,4))}function q(_,P,$){var H,z,K=-1,Q=P[1],V=0,tt=7,ct=4;for(Q===0&&(tt=138,ct=3),H=0;H<=$;H++)if(z=Q,Q=P[2*(H+1)+1],!(++V<tt&&z===Q)){if(V<ct)for(;W(_,z,_.bl_tree),--V!=0;);else z!==0?(z!==K&&(W(_,z,_.bl_tree),V--),W(_,C,_.bl_tree),G(_,V-3,2)):V<=10?(W(_,A,_.bl_tree),G(_,V-3,3)):(W(_,T,_.bl_tree),G(_,V-11,7));K=z,ct=(V=0)===Q?(tt=138,3):z===Q?(tt=6,3):(tt=7,4)}}n(M);var U=!1;function I(_,P,$,H){G(_,(p<<1)+(H?1:0),3),(function(z,K,Q,V){it(z),J(z,Q),J(z,~Q),t.arraySet(z.pending_buf,z.window,K,Q,z.pending),z.pending+=Q})(_,P,$)}i._tr_init=function(_){U||((function(){var P,$,H,z,K,Q=new Array(f+1);for(z=H=0;z<v-1;z++)for(O[z]=H,P=0;P<1<<S[z];P++)a[H++]=z;for(a[H-1]=z,z=K=0;z<16;z++)for(M[z]=K,P=0;P<1<<x[z];P++)B[K++]=z;for(K>>=7;z<s;z++)for(M[z]=K<<7,P=0;P<1<<x[z]-7;P++)B[256+K++]=z;for($=0;$<=f;$++)Q[$]=0;for(P=0;P<=143;)L[2*P+1]=8,P++,Q[8]++;for(;P<=255;)L[2*P+1]=9,P++,Q[9]++;for(;P<=279;)L[2*P+1]=7,P++,Q[7]++;for(;P<=287;)L[2*P+1]=8,P++,Q[8]++;for(st(L,g+1,Q),P=0;P<s;P++)y[2*P+1]=5,y[2*P]=ot(P,5);Z=new Y(L,S,w+1,g,f),j=new Y(y,x,0,s,f),X=new Y(new Array(0),R,0,d,m)})(),U=!0),_.l_desc=new D(_.dyn_ltree,Z),_.d_desc=new D(_.dyn_dtree,j),_.bl_desc=new D(_.bl_tree,X),_.bi_buf=0,_.bi_valid=0,et(_)},i._tr_stored_block=I,i._tr_flush_block=function(_,P,$,H){var z,K,Q=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=(function(V){var tt,ct=4093624447;for(tt=0;tt<=31;tt++,ct>>>=1)if(1&ct&&V.dyn_ltree[2*tt]!==0)return u;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return e;for(tt=32;tt<w;tt++)if(V.dyn_ltree[2*tt]!==0)return e;return u})(_)),dt(_,_.l_desc),dt(_,_.d_desc),Q=(function(V){var tt;for(o(V,V.dyn_ltree,V.l_desc.max_code),o(V,V.dyn_dtree,V.d_desc.max_code),dt(V,V.bl_desc),tt=d-1;3<=tt&&V.bl_tree[2*F[tt]+1]===0;tt--);return V.opt_len+=3*(tt+1)+5+5+4,tt})(_),z=_.opt_len+3+7>>>3,(K=_.static_len+3+7>>>3)<=z&&(z=K)):z=K=$+5,$+4<=z&&P!==-1?I(_,P,$,H):_.strategy===4||K===z?(G(_,2+(H?1:0),3),gt(_,L,y)):(G(_,4+(H?1:0),3),(function(V,tt,ct,at){var yt;for(G(V,tt-257,5),G(V,ct-1,5),G(V,at-4,4),yt=0;yt<at;yt++)G(V,V.bl_tree[2*F[yt]+1],3);q(V,V.dyn_ltree,tt-1),q(V,V.dyn_dtree,ct-1)})(_,_.l_desc.max_code+1,_.d_desc.max_code+1,Q+1),gt(_,_.dyn_ltree,_.dyn_dtree)),et(_),H&&it(_)},i._tr_tally=function(_,P,$){return _.pending_buf[_.d_buf+2*_.last_lit]=P>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&P,_.pending_buf[_.l_buf+_.last_lit]=255&$,_.last_lit++,P===0?_.dyn_ltree[2*$]++:(_.matches++,P--,_.dyn_ltree[2*(a[$]+w+1)]++,_.dyn_dtree[2*N(P)]++),_.last_lit===_.lit_bufsize-1},i._tr_align=function(_){G(_,2,3),W(_,b,L),(function(P){P.bi_valid===16?(J(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)})(_)}},{"../utils/common":41}],53:[function(r,h,i){h.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,h,i){(function(t){(function(u,e){if(!u.setImmediate){var n,p,v,w,g=1,s={},d=!1,l=u.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(u);f=f&&f.setTimeout?f:u,n={}.toString.call(u.process)==="[object process]"?function(C){process.nextTick(function(){m(C)})}:(function(){if(u.postMessage&&!u.importScripts){var C=!0,A=u.onmessage;return u.onmessage=function(){C=!1},u.postMessage("","*"),u.onmessage=A,C}})()?(w="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",b,!1):u.attachEvent("onmessage",b),function(C){u.postMessage(w+C,"*")}):u.MessageChannel?((v=new MessageChannel).port1.onmessage=function(C){m(C.data)},function(C){v.port2.postMessage(C)}):l&&"onreadystatechange"in l.createElement("script")?(p=l.documentElement,function(C){var A=l.createElement("script");A.onreadystatechange=function(){m(C),A.onreadystatechange=null,p.removeChild(A),A=null},p.appendChild(A)}):function(C){setTimeout(m,0,C)},f.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),T=0;T<A.length;T++)A[T]=arguments[T+1];var S={callback:C,args:A};return s[g]=S,n(g),g++},f.clearImmediate=c}function c(C){delete s[C]}function m(C){if(d)setTimeout(m,0,C);else{var A=s[C];if(A){d=!0;try{(function(T){var S=T.callback,x=T.args;switch(x.length){case 0:S();break;case 1:S(x[0]);break;case 2:S(x[0],x[1]);break;case 3:S(x[0],x[1],x[2]);break;default:S.apply(e,x)}})(A)}finally{c(C),d=!1}}}}function b(C){C.source===u&&typeof C.data=="string"&&C.data.indexOf(w)===0&&m(+C.data.slice(w.length))}})(typeof self>"u"?t===void 0?this:t:self)}).call(this,typeof Ut<"u"?Ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(pe)),pe.exports}var zn=On();const Dn=Ye(zn);class rn{constructor(){this.header=document.querySelector(".header"),this.lastScrollTop=0,this.scrollThreshold=10,this.isHidden=!1,this.isCompact=!1,this.scrollTimeout=null,this.touchStartY=0,this.init()}init(){if(!this.header){console.warn("Header element not found");return}this.setupEventListeners(),this.updateMainPadding()}setupEventListeners(){let E=!1;window.addEventListener("scroll",()=>{E||(requestAnimationFrame(()=>{this.handleScroll(),E=!1}),E=!0)},{passive:!0}),document.addEventListener("touchstart",r=>{this.touchStartY=r.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",r=>{const h=r.touches[0].clientY,i=this.touchStartY-h;Math.abs(i)>50&&(i>0?this.hideHeader():this.showHeader())},{passive:!0}),document.addEventListener("keydown",r=>{(r.key==="Home"||r.ctrlKey&&r.key==="Home")&&this.showHeader()}),this.header.addEventListener("focusin",()=>{this.showHeader()}),document.addEventListener("mousemove",r=>{r.clientY<100&&this.isHidden&&this.showHeader()}),window.addEventListener("resize",()=>{this.updateMainPadding()})}handleScroll(){const E=window.pageYOffset||document.documentElement.scrollTop;if(E<=0){this.showHeader(),this.setCompactMode(!1);return}E>200&&!this.isCompact?this.setCompactMode(!0):E<=100&&this.isCompact&&this.setCompactMode(!1);const r=E-this.lastScrollTop;Math.abs(r)>this.scrollThreshold&&(r>0?this.hideHeader():this.showHeader()),this.lastScrollTop=E}hideHeader(){this.isHidden||(this.isHidden=!0,this.header.classList.add("header-hidden"),this.updateMainPadding(),document.dispatchEvent(new CustomEvent("header:hidden")))}showHeader(){this.isHidden&&(this.isHidden=!1,this.header.classList.remove("header-hidden"),this.updateMainPadding(),document.dispatchEvent(new CustomEvent("header:shown")))}setCompactMode(E){this.isCompact!==E&&(this.isCompact=E,E?this.header.classList.add("header-compact"):this.header.classList.remove("header-compact"),this.updateMainPadding(),document.dispatchEvent(new CustomEvent("header:compact-changed",{detail:{compact:E}})))}updateMainPadding(){const E=document.querySelector(".main");if(!E)return;let r;this.isHidden?r="var(--spacing-xl)":this.isCompact?r="calc(var(--header-height-compact) + var(--spacing-xl))":r="calc(var(--header-height) + var(--spacing-xl))",E.style.paddingTop=r}forceShow(){this.showHeader(),this.setCompactMode(!1)}forceHide(){this.hideHeader()}destroy(){}}class an{constructor(){this.init()}init(){this.setupSmoothScrolling(),this.setupFormEnhancements(),this.setupQRContainerEnhancements(),this.setupButtonEnhancements(),this.setupModalEnhancements(),this.setupAccessibilityEnhancements()}setupSmoothScrolling(){document.addEventListener("click",E=>{const r=E.target.closest('a[href^="#"]');if(r&&r.getAttribute("href")!=="#"){E.preventDefault();const h=document.querySelector(r.getAttribute("href"));h&&h.scrollIntoView({behavior:"smooth",block:"start"})}})}setupFormEnhancements(){const E=document.querySelectorAll("input, select, textarea");E.forEach(r=>{r.addEventListener("focus",()=>{r.parentElement.classList.add("focused")}),r.addEventListener("blur",()=>{r.value||r.parentElement.classList.remove("focused")}),r.value&&r.parentElement.classList.add("focused")}),E.forEach(r=>{r.addEventListener("invalid",()=>{r.classList.add("error")}),r.addEventListener("input",()=>{r.validity.valid&&r.classList.remove("error")})})}setupQRContainerEnhancements(){document.querySelectorAll(".qr-container").forEach(r=>{r.addEventListener("click",()=>{if(r.querySelector("img")){const h=r.parentElement.querySelector('[id$="-download"]');h&&!h.disabled&&h.click()}}),r.setAttribute("tabindex","0"),r.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),r.click())})})}setupButtonEnhancements(){if(document.querySelectorAll(".btn").forEach(r=>{r.addEventListener("click",h=>{const i=document.createElement("span"),t=r.getBoundingClientRect(),u=Math.max(t.width,t.height),e=h.clientX-t.left-u/2,n=h.clientY-t.top-u/2;i.style.cssText=`
          position: absolute;
          width: ${u}px;
          height: ${u}px;
          left: ${e}px;
          top: ${n}px;
          background: rgba(255, 255, 255, 0.3);
          border-radius: 50%;
          transform: scale(0);
          animation: ripple 600ms linear;
          pointer-events: none;
        `,r.style.position="relative",r.style.overflow="hidden",r.appendChild(i),setTimeout(()=>{i.remove()},600)})}),!document.getElementById("button-ripple-styles")){const r=document.createElement("style");r.id="button-ripple-styles",r.textContent=`
        @keyframes ripple {
          to {
            transform: scale(4);
            opacity: 0;
          }
        }
      `,document.head.appendChild(r)}}setupModalEnhancements(){document.querySelectorAll(".modal").forEach(r=>{r.addEventListener("click",i=>{i.target===r&&this.closeModal(r)}),document.addEventListener("keydown",i=>{i.key==="Escape"&&r.classList.contains("active")&&this.closeModal(r)});const h=r.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(h.length>0){const i=Array.from(h),[t,...u]=i,e=u.length?u[u.length-1]:t;r.addEventListener("keydown",n=>{n.key==="Tab"&&(n.shiftKey&&document.activeElement===t?(n.preventDefault(),e.focus()):!n.shiftKey&&document.activeElement===e&&(n.preventDefault(),t.focus()))})}})}closeModal(E){E.classList.add("closing"),setTimeout(()=>{E.classList.remove("active","closing")},200)}setupAccessibilityEnhancements(){const E=document.querySelector(".skip-link");E&&E.addEventListener("click",h=>{h.preventDefault();const i=document.querySelector(E.getAttribute("href"));i&&(i.focus(),i.scrollIntoView())}),document.addEventListener("keydown",()=>{document.body.classList.add("using-keyboard")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("using-keyboard")});const r=document.createElement("div");r.setAttribute("aria-live","polite"),r.setAttribute("aria-atomic","true"),r.style.cssText=`
      position: absolute;
      left: -10000px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    `,document.body.appendChild(r),window.announceToScreenReader=h=>{r.textContent=h,setTimeout(()=>{r.textContent=""},1e3)}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ge):Ge();function Ge(){const k=new rn,E=new an;window.headerAutoHide=k,window.pageEnhancements=E,document.body.classList.add("enhanced"),console.log(" Professional TAK Onboarding Platform enhancements loaded")}const on=document.createElement("style");on.textContent=`
  .using-keyboard *:focus {
    outline: 3px solid var(--color-border-focus);
    outline-offset: 2px;
  }

  .enhanced {
    /* Add any global enhanced state styles here */
  }

  .form-group.focused label {
    color: var(--color-accent);
    transform: translateY(-2px);
    font-size: var(--font-size-sm);
  }

  .form-group input.error,
  .form-group select.error,
  .form-group textarea.error {
    border-color: var(--color-error);
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.25);
  }
`;document.head.appendChild(on);const nt={STORAGE_KEY:"tak-profiles",TABS:{TAK_CONFIG:"tak-config",ATAK:"atak",ITAK:"itak",IMPORT:"import",PACKAGES:"packages",BULK:"bulk",PROFILES:"profiles",HELP:"help"},PROTOCOLS:{HTTPS:"https",HTTP:"http",SSL:"ssl",TCP:"tcp",QUIC:"quic"},PREFS_JSON:"docs/prefs/atak-preferences.json",NOTIFICATION_DURATION:3e3,STATUS_DURATION:5e3,DEBOUNCE_DELAY:300,QR_SIZE:256,QR_MARGIN:2,PATTERNS:{HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,URL:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/}},ft={PROFILE_NAME_REQUIRED:"Profile name is required",PROFILE_EXISTS:"A profile with this name already exists. Do you want to overwrite it?",INVALID_HOSTNAME:"Please enter a valid hostname or IP address",INVALID_PORT:"Please enter a valid port number (1-65535)",INVALID_URL:"Please enter a valid URL",QR_GENERATION_ERROR:"Error generating QR code",DOWNLOAD_ERROR:"Error downloading QR code",CLIPBOARD_ERROR:"Error copying to clipboard",LOAD_PROFILES_ERROR:"Error loading profiles"};function At({required:k,value:E,validator:r}){const h=(E??"").toString();return h.trim().length>0?r?r(h)?"valid":"invalid":"valid":"invalid"}function mt(k,E){if(!k||k.nodeType!==1)return;const r=k.closest(".form-group"),h=["field-valid","field-invalid"];k.classList.remove(...h),r?.classList.remove("field-valid","field-invalid","has-validation"),E==="valid"?(k.classList.add("field-valid"),r?.classList.add("field-valid","has-validation")):E==="invalid"&&(k.classList.add("field-invalid"),r?.classList.add("field-invalid","has-validation"))}const Et=(function(){let k=nt.TABS.TAK_CONFIG,E=k;function r(){document.querySelectorAll(".tab-btn").forEach(t=>{t.addEventListener("click",()=>{const u=t.dataset.tab;h(u)})}),sn.init(),ln.init()}function h(i){const t=document.querySelectorAll(".tab-btn"),u=document.querySelectorAll(".tab-pane");t.forEach(p=>{p.classList.remove("active"),p.setAttribute("aria-selected","false")});const e=document.querySelector(`[data-tab="${i}"]`);e&&(e.classList.add("active"),e.setAttribute("aria-selected","true")),u.forEach(p=>{p.classList.remove("active"),p.setAttribute("aria-hidden","true")});const n=document.getElementById(`${i}-tab`);n&&(n.classList.add("active"),n.setAttribute("aria-hidden","false")),(i===nt.TABS.ATAK||i===nt.TABS.ITAK)&&(i=nt.TABS.TAK_CONFIG),k=i,[nt.TABS.ATAK,nt.TABS.ITAK,nt.TABS.IMPORT].includes(i)&&(E=i)}return{init:r,switchTab:h,getCurrentTab:()=>k,getLastConfigTab:()=>E}})(),_t=(function(){async function k(e,n){const p=document.getElementById(n);if(!p)return null;if(!e)return p.innerHTML='<div class="qr-placeholder">Enter configuration details above</div>',p.setAttribute("aria-label","QR code will appear here when form is complete"),null;try{const v=await $t.toCanvas(e,{width:nt.QR_SIZE,margin:nt.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}}),w=p.querySelector(".qr-placeholder");w&&w.remove();const g=p.querySelector("canvas");return g&&g.remove(),p.setAttribute("aria-label","QR code generated successfully"),v&&typeof v=="object"&&v.nodeType===1&&(v.style.opacity="0",p.appendChild(v),requestAnimationFrame(()=>{v.style.opacity="1"})),v}catch(v){return console.error(ft.QR_GENERATION_ERROR,v),rt.showNotification(ft.QR_GENERATION_ERROR,"error"),null}}async function E(){const e=document.getElementById("atak-host")?.value||"",n=document.getElementById("atak-username")?.value||"",p=document.getElementById("atak-token")?.value||"";if(e.trim()&&n.trim()&&p.trim()){if(!vt(e.trim())){rt.showNotification(ft.INVALID_HOSTNAME,"error"),k(null,"atak-qr"),rt.disableButtons("atak");return}const v=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(e.trim())}&username=${encodeURIComponent(n.trim())}&token=${encodeURIComponent(p.trim())}`;await k(v,"atak-qr"),rt.enableButtons("atak");const w=document.getElementById("atak-qr");w&&(w.dataset.uri=v)}else await k(null,"atak-qr"),rt.disableButtons("atak")}const r=jt(E,nt.DEBOUNCE_DELAY);async function h(){const e=document.getElementById("itak-description")?.value||"",n=document.getElementById("itak-url")?.value||"",p=document.getElementById("itak-port")?.value||"",v=document.getElementById("itak-protocol")?.value||"",w=ge(n),g=v===nt.PROTOCOLS.HTTPS?nt.PROTOCOLS.SSL:nt.PROTOCOLS.TCP;if([e,w,p].every(l=>l&&l.trim()!=="")){if(!vt(w)){rt.showNotification(ft.INVALID_HOSTNAME,"error"),k(null,"itak-qr"),rt.disableButtons("itak");return}if(!Ot(p)){rt.showNotification(ft.INVALID_PORT,"error"),k(null,"itak-qr"),rt.disableButtons("itak");return}const l=`${e.trim()},${w},${p.trim()},${g}`;await k(l,"itak-qr"),rt.enableButtons("itak");const f=document.getElementById("itak-qr");f&&(f.dataset.uri=l)}else await k(null,"itak-qr"),rt.disableButtons("itak")}const i=jt(h,nt.DEBOUNCE_DELAY);async function t(){const e=document.getElementById("import-url"),n=e?.value||"",p=e?.closest(".form-group");if(n.trim()){if(!Nn(n.trim())){rt.showNotification(ft.INVALID_URL,"error"),k(null,"import-qr"),rt.disableButtons("import"),e&&e.classList.remove("field-valid"),p&&p.classList.remove("field-valid"),e&&e.classList.add("field-invalid"),p&&p.classList.add("field-invalid","has-validation");return}const v=`tak://com.atakmap.app/import?url=${encodeURIComponent(n.trim())}`;await k(v,"import-qr"),rt.enableButtons("import"),e&&e.classList.remove("field-invalid"),p&&p.classList.remove("field-invalid"),e&&e.classList.add("field-valid"),p&&p.classList.add("field-valid","has-validation");const w=document.getElementById("import-qr");w&&(w.dataset.uri=v)}else await k(null,"import-qr"),rt.disableButtons("import"),e&&e.classList.remove("field-valid"),p&&p.classList.remove("field-valid"),e&&e.classList.add("field-invalid"),p&&p.classList.add("field-invalid","has-validation")}const u=jt(t,nt.DEBOUNCE_DELAY);return{updateATAKQR:r,updateiTAKQR:i,updateImportQR:u,updateATAKQRCore:E,updateiTAKQRCore:h,updateImportQRCore:t}})(),Fn=(function(){let k=[],E=0;function r(){const e=document.getElementById("tak-users-file"),n=document.getElementById("bulk-host"),p=document.getElementById("bulk-load-example"),v=document.getElementById("bulk-prev"),w=document.getElementById("bulk-next"),g=document.getElementById("bulk-user-list"),s=document.getElementById("bulk-copy-uri"),d=document.getElementById("bulk-toggle-uri"),l=document.getElementById("bulk-copy-pass"),f=document.getElementById("bulk-toggle-pass");e?.addEventListener("change",async c=>{const m=c.target?.files?.[0];if(!m)return;const b=await m.text();k=u(b);const C=document.getElementById("bulk-file-name");C&&(C.textContent=`Loaded: ${m.name}`),E=0,i();const A=document.getElementById("bulk-session");A&&(A.style.display=""),rt.showNotification(`Loaded ${k.length} users`,"success"),t(),p&&(p.style.display="none"),h()}),p?.addEventListener("click",async()=>{const c=["/tak_users.txt","/examples/tak_users.txt","./tak_users.txt"];let m=[];for(const A of c)try{const T=await fetch(A,{cache:"no-store"});if(!T.ok)continue;const S=await T.text();try{const x=JSON.parse(S);if(Array.isArray(x)){const R=x.map(F=>{const L=String(F.username??F.user??"").trim(),y=String(F.password??F.token??"").trim();return{username:L,token:y}}).filter(F=>F.username&&F.token);if(R.length){m=R;break}}}catch{}}catch{}if(!m.length){rt.showNotification("Could not load example file (tak_users.txt)","error");return}k=m,E=0;const b=document.getElementById("bulk-session");b&&(b.style.display=""),n&&!n.value&&(n.value="tak.example.com"),i(),t(),rt.showNotification(`Example loaded: ${k.length} users`,"success"),p&&(p.style.display="none");const C=document.getElementById("bulk-file-name");C&&(C.textContent=`Loaded: example tak_users.txt (${k.length} users)`),h()}),n?.addEventListener("input",jt(()=>{h(),t()},200)),v?.addEventListener("click",()=>{k.length&&(E=(E-1+k.length)%k.length,t())}),w?.addEventListener("click",()=>{k.length&&(E=(E+1)%k.length,t())}),document.addEventListener("keydown",c=>{!document.getElementById("bulk-tab")?.classList.contains("active")||!k.length||(c.key==="ArrowLeft"&&(c.preventDefault(),E=(E-1+k.length)%k.length,t()),c.key==="ArrowRight"&&(c.preventDefault(),E=(E+1)%k.length,t()))}),g?.addEventListener("click",c=>{const m=c.target.closest("[data-index]");if(!m)return;const b=parseInt(m.dataset.index,10);Number.isNaN(b)||(E=b,t())}),s?.addEventListener("click",async()=>{const c=document.getElementById("bulk-uri")?.dataset?.value||"";if(c)try{await navigator.clipboard.writeText(c),rt.showNotification("URI copied","success")}catch{rt.showNotification(ft.CLIPBOARD_ERROR,"error")}}),d?.addEventListener("click",()=>{const c=document.getElementById("bulk-uri");if(!c)return;const m=c.getAttribute("data-hidden")==="true",b=c.dataset.value||"";c.setAttribute("data-hidden",m?"false":"true"),c.textContent=m?b:b?"":"";const C=document.getElementById("bulk-toggle-uri");C&&(C.textContent=m?"Hide URI":"Show URI")}),l?.addEventListener("click",async()=>{const c=document.getElementById("bulk-pass")?.dataset?.value||"";if(c)try{await navigator.clipboard.writeText(c),rt.showNotification("Password copied","success")}catch{rt.showNotification(ft.CLIPBOARD_ERROR,"error")}}),f?.addEventListener("click",()=>{const c=document.getElementById("bulk-pass");if(!c)return;const m=c.getAttribute("data-hidden")==="true",b=c.dataset.value||"";c.setAttribute("data-hidden",m?"false":"true"),c.textContent=m?b:b?"":"";const C=document.getElementById("bulk-toggle-pass");C&&(C.textContent=m?"Hide Password":"Show Password")})}function h(){const e=document.getElementById("bulk-host");if(!e)return;const n=e.closest(".form-group"),p=e.value.trim(),v=p.length>0&&vt(p);e.classList.remove("field-valid","field-invalid"),n?.classList.remove("field-valid","field-invalid","has-validation"),v?(e.classList.add("field-valid"),n?.classList.add("field-valid","has-validation")):(e.classList.add("field-invalid"),n?.classList.add("field-invalid","has-validation"))}function i(){const e=document.getElementById("bulk-user-list");if(e){if(!k.length){e.innerHTML='<li class="muted">No users loaded</li>';return}e.innerHTML=k.map((n,p)=>`<li class="user-item${p===E?" active":""}" data-index="${p}">${pt(n.username)}</li>`).join("")}}async function t(){const e=document.getElementById("bulk-host")?.value?.trim()||"",n=k[E],p=document.getElementById("bulk-current-username"),v=document.getElementById("bulk-pass"),w=document.getElementById("bulk-uri"),g=document.getElementById("bulk-counter"),s="bulk-user-qr",d=document.getElementById("bulk-toggle-pass"),l=document.getElementById("bulk-toggle-uri");if(i(),!n){const m=document.getElementById(s);m&&(m.innerHTML='<div class="qr-placeholder">Load a tak_users.txt to begin</div>'),p&&(p.textContent=""),v&&(v.textContent="",v.dataset.value="",v.setAttribute("data-hidden","true")),w&&(w.textContent="",w.dataset.value="",w.setAttribute("data-hidden","true")),d&&(d.textContent="Show Password"),l&&(l.textContent="Show URI"),g&&(g.textContent="0 / 0");return}e?vt(e)||rt.showNotification(ft.INVALID_HOSTNAME,"error"):rt.showNotification("Enter TAK Server host to generate URIs","warning"),p&&(p.textContent=n.username),v&&(v.dataset.value=n.token||"",v.setAttribute("data-hidden","true"),v.textContent=n.token?"":""),d&&(d.textContent="Show Password"),g&&(g.textContent=`${E+1} / ${k.length}`);let f="";e&&vt(e)&&n.username&&n.token&&(f=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(e)}&username=${encodeURIComponent(n.username)}&token=${encodeURIComponent(n.token)}`),w&&(w.dataset.value=f,w.setAttribute("data-hidden","true"),w.textContent=f?"":""),l&&(l.textContent="Show URI");const c=document.getElementById(s);if(c){if(c.innerHTML="",!f){c.innerHTML='<div class="qr-placeholder">Provide host to generate QR</div>';return}try{const m=await $t.toCanvas(f,{width:nt.QR_SIZE,margin:nt.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}});c.appendChild(m)}catch{rt.showNotification(ft.QR_GENERATION_ERROR,"error")}}}function u(e){try{const n=JSON.parse(e);if(Array.isArray(n))return n.map(p=>{const v=String(p.username??p.user??"").trim(),w=String(p.password??p.token??"").trim();return{username:v,token:w}}).filter(p=>p.username&&p.token)}catch{}return rt.showNotification("Invalid tak_users.txt format: expected JSON array of {username,password}","error"),[]}return{init:r}})(),Tt=(function(){let k="atak";function E(){document.querySelectorAll('input[name="tak-mode"]').forEach(l=>{l.addEventListener("change",f=>{f.target.checked&&r(f.target.value)})});const d=document.getElementById("tak-config-form");d&&d.querySelectorAll("input, select").forEach(f=>{const c=f.type==="checkbox"||f.tagName==="SELECT"?"change":"input";f.addEventListener(c,()=>t()),f.tagName==="SELECT"&&f.addEventListener("input",()=>t()),f.addEventListener("input",()=>n()),f.addEventListener("change",()=>n())}),r("atak"),h(),setTimeout(()=>n(),0)}function r(s){k=s;const d=document.querySelector(".platform-icon"),l=document.querySelector(".platform-text"),f=document.getElementById("qr-description");s==="atak"?(d&&(d.textContent=""),l&&(l.textContent="Configuring for Android devices (ATAK)"),f&&(f.textContent="Scan this QR code with ATAK to automatically configure the connection"),document.querySelectorAll(".atak-fields").forEach(c=>c.style.display="block"),document.querySelectorAll(".itak-fields").forEach(c=>c.style.display="none")):(d&&(d.textContent=""),l&&(l.textContent="Configuring for iOS devices (iTAK)"),f&&(f.textContent="Scan this QR code with iTAK to automatically configure the connection"),document.querySelectorAll(".itak-fields").forEach(c=>c.style.display="block"),document.querySelectorAll(".atak-fields").forEach(c=>c.style.display="none"),h()),t(),n()}function h(){const s=document.getElementById("tak-protocol"),d=document.getElementById("tak-port");s&&d&&(s.removeEventListener("change",i),s.addEventListener("change",i))}function i(s){const d=document.getElementById("tak-port");if(!d)return;const l=s.target.value;l==="quic"?d.value="8090":l==="https"?(!d.value||d.value==="8080"||d.value==="8090")&&(d.value="8089"):l==="http"?(!d.value||d.value==="8089"||d.value==="8090")&&(d.value="8080"):d.value==="8090"&&(d.value="8089"),t(),n()}async function t(){k==="atak"?await u():await e(),n()}async function u(){const s=document.getElementById("tak-host")?.value||"",d=document.getElementById("tak-username")?.value||"",l=document.getElementById("tak-token")?.value||"";let f="tak://com.atakmap.app/enroll?";const c=[];if(s.trim()&&(vt(s.trim())||rt.showNotification(ft.INVALID_HOSTNAME,"error"),c.push(`host=${encodeURIComponent(s.trim())}`)),d.trim()&&c.push(`username=${encodeURIComponent(d.trim())}`),l.trim()&&c.push(`token=${encodeURIComponent(l.trim())}`),c.length>0){f+=c.join("&"),await p(f,"tak-qr"),s.trim()&&d.trim()&&l.trim()?rt.enableButtons("tak"):rt.disableButtons("tak");const m=document.getElementById("tak-qr");m&&(m.dataset.uri=f)}else await p(null,"tak-qr"),rt.disableButtons("tak")}async function e(){const d=(document.getElementById("tak-description")?.value||"").trim().replace(/,/g," ").trim(),l=(document.getElementById("tak-host")?.value||"").trim(),f=(document.getElementById("tak-port")?.value||"8089").trim(),c=(document.getElementById("tak-protocol")?.value||"https").trim();let m;if(c==="https"?m="ssl":c==="http"?m="tcp":m="ssl",l&&!vt(l)&&rt.showNotification(ft.INVALID_HOSTNAME,"error"),f&&!Ot(f)&&rt.showNotification(ft.INVALID_PORT,"error"),!(d&&l)){await p(null,"tak-qr"),rt.disableButtons("tak");return}const C=`${d},${l},${f},${m}`;await p(C,"tak-qr"),d.trim()&&l.trim()&&f.trim()&&vt(l)&&Ot(f)?rt.enableButtons("tak"):rt.disableButtons("tak");const T=document.getElementById("tak-qr");T&&(T.dataset.uri=C)}function n(){const s=document.getElementById("tak-host"),d=document.getElementById("tak-username"),l=document.getElementById("tak-token"),f=document.getElementById("tak-description"),c=document.getElementById("tak-port"),m=document.getElementById("tak-protocol");k==="atak"?(mt(s,At({required:!0,value:s?.value||"",validator:vt})),mt(d,At({required:!0,value:d?.value||""})),mt(l,At({required:!0,value:l?.value||""})),mt(f,"neutral"),mt(c,"neutral"),mt(m,"neutral")):(mt(f,At({required:!0,value:f?.value||""})),mt(s,At({required:!0,value:s?.value||"",validator:vt})),mt(c,At({required:!0,value:c?.value||"",validator:Ot})),mt(m,At({required:!0,value:m?.value||""})),mt(d,"neutral"),mt(l,"neutral"))}async function p(s,d){const l=document.getElementById(d);if(!l)return null;if(!s)return l.innerHTML='<div class="qr-placeholder">Enter configuration details above</div>',l.setAttribute("aria-label","QR code will appear here when form is complete"),null;try{const f=await $t.toCanvas(s,{width:nt.QR_SIZE,margin:nt.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}}),c=l.querySelector(".qr-placeholder");c&&c.remove();const m=l.querySelector("canvas");return m&&m.remove(),l.setAttribute("aria-label","QR code generated successfully"),f&&typeof f=="object"&&f.nodeType===1&&(f.style.opacity="0",l.appendChild(f),requestAnimationFrame(()=>{f.style.opacity="1"})),f}catch(f){return console.error(ft.QR_GENERATION_ERROR,f),rt.showNotification(ft.QR_GENERATION_ERROR,"error"),null}}function v(){return k}function w(){return{mode:k,host:document.getElementById("tak-host")?.value||"",port:"8089",protocol:"ssl",username:k==="atak"&&document.getElementById("tak-username")?.value||"",token:k==="atak"&&document.getElementById("tak-token")?.value||"",description:k==="itak"&&document.getElementById("tak-description")?.value||""}}function g(s){if(s.host){const d=document.getElementById("tak-host");d&&(d.value=s.host)}if(s.mode){const d=document.getElementById(`mode-${s.mode}`);d&&(d.checked=!0,r(s.mode))}if(s.username){const d=document.getElementById("tak-username");d&&(d.value=s.username)}if(s.token){const d=document.getElementById("tak-token");d&&(d.value=s.token)}if(s.description){const d=document.getElementById("tak-description");d&&(d.value=s.description)}t()}return{init:E,switchMode:r,updateQR:t,getCurrentMode:v,getCurrentData:w,loadData:g}})(),sn=(function(){let k=[];function E(){const L=document.getElementById("package-form");if(!L)return;const y=document.getElementById("package-deployment"),B=document.getElementById("client-cert-group");function a(){const M=document.getElementById("deployment-type-desc"),Y=document.getElementById("deployment-desc"),D=document.getElementById("package-username"),N=document.getElementById("package-password");if(y.value==="auto-enroll"){B.style.display="none";const J=D.parentElement.querySelector(".help-text"),G=N.parentElement.querySelector(".help-text");J&&(J.textContent="Username required for certificate enrollment from server"),G&&(G.textContent="Password required for certificate enrollment"),M&&(M.textContent="Auto-Enrollment:"),Y&&(Y.textContent="Package contains server info and CA certificate. Device will request its own certificate from server on first connection.")}else{B.style.display="";const J=D.parentElement.querySelector(".help-text"),G=N.parentElement.querySelector(".help-text");J&&(J.textContent="Username for server authentication (optional - uses certificate by default)"),G&&(G.textContent="Password for additional authentication layer (optional)"),M&&(M.textContent="Soft-Certificate:"),Y&&(Y.textContent="Package includes pre-generated client certificate. User imports and connects immediately.")}T()}y?.addEventListener("change",a),setTimeout(a,0),r();const O=document.getElementById("package-dropzone"),Z=document.getElementById("pkg-extra"),j=document.getElementById("package-files-list");function X(){if(j){if(k.length===0){j.textContent="No files selected";return}j.textContent=`${k.length} file(s) selected`}}O?.addEventListener("click",()=>Z?.click()),O?.addEventListener("dragover",M=>{M.preventDefault(),O.classList.add("dragover")}),O?.addEventListener("dragleave",()=>O.classList.remove("dragover")),O?.addEventListener("drop",M=>{M.preventDefault(),O.classList.remove("dragover"),M.dataTransfer&&(k.push(...Array.from(M.dataTransfer.files)),X())}),Z?.addEventListener("change",M=>{const{target:Y}=M;Y?.files&&(k.push(...Array.from(Y.files)),X())}),document.getElementById("package-reset")?.addEventListener("click",()=>{k=[],Z&&(Z.value=""),X(),L.reset(),T()}),document.getElementById("package-build")?.addEventListener("click",x),C(),A()}function r(){const L=[{id:"package-host",validator:u,required:!0},{id:"package-port",validator:e,required:!0},{id:"package-protocol",validator:n,required:!0},{id:"package-username",validator:p,required:"conditional"},{id:"package-password",validator:v,required:"conditional"},{id:"package-callsign",validator:w,required:!1},{id:"package-team",validator:g,required:!1},{id:"package-role",validator:s,required:!1},{id:"pkg-ca",validator:d,required:!0},{id:"package-ca-pass",validator:l,required:!0},{id:"pkg-client",validator:f,required:"conditional"},{id:"package-client-pass",validator:c,required:"conditional"}];L.forEach(B=>{const a=document.getElementById(B.id);a&&(a.addEventListener("input",()=>h(B)),a.addEventListener("change",()=>h(B)),a.addEventListener("blur",()=>h(B)))});const y=document.getElementById("package-deployment");y&&y.addEventListener("change",()=>{L.forEach(h),t()}),setTimeout(()=>{L.forEach(h),t()},100)}function h(L){const y=document.getElementById(L.id),B=y?.closest(".form-group");if(!y||!B)return;const a=document.getElementById("package-deployment")?.value||"auto-enroll",O=i(L.required,a,L.id),Z=y.type==="file"?y.files?.[0]:y.value,j=L.validator(Z,a),X=!Z||typeof Z=="string"&&!Z.trim();let M="neutral";return X&&O?M="invalid":X&&!O?M="neutral":!X&&j?M="valid":!X&&!j&&(M="invalid"),y.classList.remove("field-valid","field-invalid"),B.classList.remove("field-valid","field-invalid","has-validation"),M==="valid"?(y.classList.add("field-valid"),B.classList.add("field-valid","has-validation")):M==="invalid"&&(y.classList.add("field-invalid"),B.classList.add("field-invalid","has-validation")),M}function i(L,y,B){if(L===!0)return!0;if(L===!1)return!1;if(L==="conditional"){if(y==="auto-enroll")return["package-username","package-password"].includes(B);if(y==="soft-cert")return["pkg-client","package-client-pass"].includes(B)}return!1}function t(){const L=document.getElementById("package-deployment")?.value||"auto-enroll";[{id:"package-host",required:!0},{id:"package-port",required:!0},{id:"package-protocol",required:!0},{id:"package-username",required:L==="auto-enroll"},{id:"package-password",required:L==="auto-enroll"},{id:"package-callsign",required:!1},{id:"package-team",required:!1},{id:"package-role",required:!1},{id:"pkg-ca",required:!0},{id:"package-ca-pass",required:!0},{id:"pkg-client",required:L==="soft-cert"},{id:"package-client-pass",required:L==="soft-cert"}].forEach(({id:B,required:a})=>{const O=document.getElementById(B),Z=O?.previousElementSibling?.tagName==="LABEL"?O.previousElementSibling:O?.closest(".form-group")?.querySelector("label");Z&&(Z.classList.remove("field-required","field-optional"),Z.classList.add(a?"field-required":"field-optional"))})}function u(L){return L&&vt(L)}function e(L){return L&&Ot(L)}function n(L){const B=(document.getElementById("package-client")?.value||"atak")==="itak"?["http","https"]:["http","https","quic"];return L&&B.includes(L)}function p(L,y){return y==="auto-enroll"?L&&L.trim().length>=2:!L||L.trim().length>=2}function v(L,y){return y==="auto-enroll"?L&&L.length>=4:!L||L.length>=4}function w(L){return!L||L.trim().length>=2&&L.trim().length<=20}function g(){return!0}function s(){return!0}function d(L){return L instanceof File&&L.name.endsWith(".p12")}function l(L){return L&&L.length>=1}function f(L,y){return y==="soft-cert"?L instanceof File&&L.name.endsWith(".p12"):!0}function c(L,y){return y==="soft-cert"?L&&L.length>=1:!0}function m(){const L=document.getElementById("package-deployment")?.value||"auto-enroll",y=["package-host","package-port","package-protocol","pkg-ca","package-ca-pass"];L==="auto-enroll"?y.push("package-username","package-password"):L==="soft-cert"&&y.push("pkg-client","package-client-pass");for(const B of y){const a=document.getElementById(B);if(!a)continue;let O=!1;if(a.type==="file"?O=a.files&&a.files.length>0:(a.tagName,O=a.value&&a.value.trim()!==""),b(B,L)&&!O)return!1}return!0}function b(L,y){const B=["package-host","package-port","package-protocol","pkg-ca","package-ca-pass"],a=["package-username","package-password"],O=["pkg-client","package-client-pass"];return!!(B.includes(L)||y==="auto-enroll"&&a.includes(L)||y==="soft-cert"&&O.includes(L))}function C(){if(!document.getElementById("package-name"))return;["package-host","package-username","package-callsign","package-client","package-team","package-role","package-protocol","package-port","package-deployment"].forEach(B=>{const a=document.getElementById(B);a&&(a.addEventListener("input",T),a.addEventListener("change",T))}),T()}function A(){const L=document.getElementById("package-protocol"),y=document.getElementById("package-port"),B=document.getElementById("package-client");if(!L||!y)return;function a(){const O=L.value;(B?.value||"atak")==="itak"&&O==="quic"&&(L.value="https"),L.value==="quic"?y.value="8090":(L.value==="https"||L.value==="http")&&(y.value="8089"),T()}L.addEventListener("change",a),B&&B.addEventListener("change",()=>{const O=B.value==="itak",Z=L.querySelector('option[value="quic"]');O?(L.value==="quic"&&(L.value="https",y.value="8089"),Z&&(Z.disabled=!0,Z.hidden=!0)):Z&&(Z.disabled=!1,Z.hidden=!1),T()})}function T(){const L=document.getElementById("package-name");if(!L)return;const y=document.getElementById("package-host")?.value?.trim()||"",B=document.getElementById("package-callsign")?.value?.trim()||"",a=document.getElementById("package-client")?.value||"atak",O=document.getElementById("package-team")?.value?.trim()||"",Z=document.getElementById("package-role")?.value?.trim()||"",j=document.getElementById("package-protocol")?.value||"https";document.getElementById("package-port")?.value?.trim();const X=S({host:y,callsign:B,client:a,team:O,role:Z,protocol:j}),M=L.value.trim();(!M||M==="TAK_Server.zip"||M.endsWith("-package.zip"))&&(L.value=X),L.placeholder=`Auto-generated: ${X}`}function S({host:L,callsign:y,client:B,team:a,role:O,protocol:Z}){function j(N){return N?N.toLowerCase().replace(/[^a-z0-9-_.]/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,""):""}function X(N){return N?j(N):""}const M=[],Y=X(L);if(M.push(Y||"tak-server"),y?.trim()&&M.push(j(y)),M.push(B||"atak"),a?.trim()&&a.toLowerCase()!=="none"){const N=j(a);N&&M.push(N)}if(O?.trim()&&O.toLowerCase()!=="none"){const N=j(O);N&&M.push(N)}return Z==="quic"&&B!=="itak"?M.push("quic"):Z==="http"&&M.push("tcp"),`${M.join("-")}-package.zip`}async function x(){try{const L=document.getElementById("package-client").value,y=document.getElementById("package-deployment").value,B=document.getElementById("package-host").value.trim(),a=document.getElementById("package-port").value.trim(),O=document.getElementById("package-protocol").value,Z=document.getElementById("package-ca-pass").value,j=document.getElementById("package-client-pass").value,X=document.getElementById("package-username").value.trim(),M=document.getElementById("package-password").value.trim(),Y=document.getElementById("package-cache-creds").checked,D=document.getElementById("package-callsign").value.trim(),N=document.getElementById("package-team").value.trim(),J=document.getElementById("package-role").value.trim(),G=S({host:B,callsign:D,client:L,team:N,role:J,protocol:O,port:a}),ot=document.getElementById("package-name").value.trim()||G,st=document.getElementById("pkg-ca").files?.[0]||null,et=document.getElementById("pkg-client").files?.[0]||null;if(!m()){(window.UIController||rt).showNotification("Please fix the highlighted field errors before building the package","error");const I=document.querySelector(".field-invalid");I&&(I.scrollIntoView({behavior:"smooth",block:"center"}),I.focus());return}let it;L==="itak"?it=O==="https"?"ssl":"tcp":it=O==="quic"?"quic":O==="https"?"ssl":"tcp";const lt=`${B}:${a}:${it}`,ut=R({deployment:y,connectString:lt,caPass:Z,clientPass:j,username:X,password:M,cacheCreds:Y,callsign:D,team:N,role:J,client:L}),gt=F({name:ot,includeClient:y==="soft-cert",includeCA:!0,client:L}),dt=new Dn;L==="itak"?(dt.file("config.pref",ut),st&&dt.file("caCert.p12",st),y==="soft-cert"&&et&&dt.file("clientCert.p12",et),dt.folder("MANIFEST")?.file("MANIFEST.xml",gt)):(dt.folder("certs")?.file("config.pref",ut),st&&dt.folder("certs")?.file("caCert.p12",st),y==="soft-cert"&&et&&dt.folder("certs")?.file("clientCert.p12",et),dt.folder("MANIFEST")?.file("MANIFEST.xml",gt));for(const I of k)dt.file(I.name,I);const o=await dt.generateAsync({type:"blob"}),q=ot||"TAK_Server.zip",U=document.createElement("a");U.href=URL.createObjectURL(o),U.download=q,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(U.href),(window.UIController||rt).showNotification(`Package "${q}" downloaded successfully!`,"success")}catch(L){console.error(L),(window.UIController||rt).showNotification("Error building data package","error")}}function R({deployment:L,connectString:y,caPass:B,clientPass:a,username:O,password:Z,cacheCreds:j,callsign:X,team:M,role:Y,client:D}){const N=L==="soft-cert",G=D==="itak"?"":"certs",W=y.endsWith(":quic"),ot=[];ot.push(`<entry key="caPassword${N?"":"0"}" class="class java.lang.String">${pt(B)}</entry>`),O&&ot.push(`<entry key="username${N?"":"0"}" class="class java.lang.String">${pt(O)}</entry>`),O&&Z&&(ot.push(`<entry key="useAuth${N?"":"0"}" class="class java.lang.Boolean">true</entry>`),ot.push(`<entry key="cacheCreds${N?"":"0"}" class="class java.lang.Boolean">${j}</entry>`));const st=N?`<entry key="clientPassword" class="class java.lang.String">${pt(a)}</entry>
    <entry key="certificateLocation" class="class java.lang.String">${G?`${G}/`:""}clientCert.p12</entry>`:'<entry key="enrollForCertificateWithTrust0" class="class java.lang.Boolean">true</entry>',et=ot.join(`
    `),it=[];X&&it.push(`<entry key="locationCallsign" class="class java.lang.String">${pt(X)}</entry>`),M&&it.push(`<entry key="locationTeam" class="class java.lang.String">${pt(M)}</entry>`),Y&&it.push(`<entry key="atakRoleType" class="class java.lang.String">${pt(Y)}</entry>`);const lt=it.length>0?`
    ${it.join(`
    `)}`:"";return`<?xml version='1.0' encoding='ASCII' standalone='yes'?>
<preferences>
  <preference version="1" name="cot_streams">
    <entry key="count" class="class java.lang.Integer">1</entry>
    <entry key="description0" class="class java.lang.String">TAK Server</entry>
    <entry key="enabled0" class="class java.lang.Boolean">true</entry>
    <entry key="connectString0" class="class java.lang.String">${pt(y)}</entry>
    <entry key="caLocation${N?"":"0"}" class="class java.lang.String">${G?`${G}/`:""}caCert.p12</entry>
    ${et}
    ${st}
  </preference>
  <preference version="1" name="com.atakmap.app_preferences">
    <entry key="displayServerConnectionWidget" class="class java.lang.Boolean">true</entry>${W?`
    <entry key="network_quic_enabled" class="class java.lang.Boolean">true</entry>`:""}${lt}
  </preference>
</preferences>`}function F({name:L,includeClient:y,includeCA:B,client:a}){const O=window.crypto.randomUUID?window.crypto.randomUUID():"00000000-0000-4000-8000-000000000000",Z=a==="itak",j=Z?"caCert.p12":"certs/caCert.p12",X=Z?"clientCert.p12":"certs/clientCert.p12",M=Z?"config.pref":"certs/config.pref";return`<MissionPackageManifest version="2">
  <Configuration>
    <Parameter name="uid" value="${O}"/>
    <Parameter name="name" value="${pt(L||"TAK_Server.zip")}"/>
    <Parameter name="onReceiveDelete" value="true"/>
  </Configuration>
  <Contents>
    <Content ignore="false" zipEntry="${M}"/>
    ${`<Content ignore="false" zipEntry="${j}"/>`}
    ${y?`<Content ignore="false" zipEntry="${X}"/>`:""}
  </Contents>
</MissionPackageManifest>`}return{init:E,buildPackage:x}})(),ln=(function(){let k=null,E=null,r=[];const h={};function i(){const d=document.getElementById("pref-rows"),l=document.getElementById("pref-add"),f=document.getElementById("pref-version"),c=document.getElementById("pref-search"),m=document.getElementById("pref-add-known"),b=document.getElementById("pref-suggestions"),C=document.getElementById("pref-browse");!d||!l||(l.addEventListener("click",async()=>await t(d)),m?.addEventListener("click",async()=>{const A=c?.value?.trim();if(!A)return;await v();const T=r.find(S=>S.label===A||S.key===A||`${S.label} (${S.key})`===A);if(T)await t(d,T.key),c.value="";else{const S=Object.keys(h).find(x=>x===A||h[x].label===A);S&&(await t(d,S),c.value="")}}),f?.addEventListener("change",()=>{const A=f.value;w(A),b&&(b.style.display="none")}),f&&w(f.value),v(),c?.addEventListener("focus",async()=>{if(!b)return;await v();const A=[...r];Object.entries(h).forEach(([S,x])=>{A.find(R=>R.key===S)||A.push({key:S,label:x.label||S})}),A.sort((S,x)=>S.label.toLowerCase().localeCompare(x.label.toLowerCase()));const T=A.slice(0,500);T.length>0&&(b.innerHTML=T.map(S=>{const x=S.label.split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()).join(" ");return`
          <div class="pref-suggestion" data-key="${S.key}" style="padding:.5rem .75rem;cursor:pointer;display:flex;flex-direction:column;gap:.125rem;">
            <span style="font-weight:600;">${x}</span>
            <span style="font-size:.85em;color:var(--color-muted,#64748b);">${S.key}</span>
          </div>
        `}).join(""),b.style.display="block")}),c?.addEventListener("input",()=>{if(!b)return;const A=c.value.trim().toLowerCase();if(!A){c.dispatchEvent(new Event("focus"));return}const T=[...r];Object.entries(h).forEach(([x,R])=>{T.find(F=>F.key===x)||T.push({key:x,label:R.label||x})});const S=T.filter(x=>x.label.toLowerCase().includes(A)||x.key.toLowerCase().includes(A)).sort((x,R)=>x.label.toLowerCase().localeCompare(R.label.toLowerCase())).slice(0,50);if(S.length===0){b.style.display="none",b.innerHTML="";return}b.innerHTML=S.map(x=>{const R=x.label.split(" ").map(F=>F.charAt(0).toUpperCase()+F.slice(1).toLowerCase()).join(" ");return`
        <div class="pref-suggestion" data-key="${x.key}" style="padding:.5rem .75rem;cursor:pointer;display:flex;flex-direction:column;gap:.125rem;">
          <span style="font-weight:600;">${R}</span>
          <span style="font-size:.85em;color:var(--color-muted,#64748b);">${x.key}</span>
        </div>
      `}).join(""),b.style.display="block"}),b?.addEventListener("click",async A=>{const T=A.target.closest(".pref-suggestion");if(!T)return;const S=T.getAttribute("data-key")||"";S&&(c.value=S,b.style.display="none")}),C?.addEventListener("click",async()=>{if(!b)return;await v();const A=[...r];Object.entries(h).forEach(([S,x])=>{A.find(R=>R.key===S)||A.push({key:S,label:x.label||S})}),A.sort((S,x)=>S.label.toLowerCase().localeCompare(x.label.toLowerCase()));const T=A.slice(0,500);b.innerHTML=T.map(S=>{const x=S.label.split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()).join(" ");return`
        <div class="pref-suggestion" data-key="${S.key}" style="padding:.5rem .75rem;cursor:pointer;display:flex;flex-direction:column;gap:.125rem;">
          <span style="font-weight:600;">${x}</span>
          <span style="font-size:.85em;color:var(--color-muted,#64748b);">${S.key}</span>
        </div>
      `}).join(""),b.style.display="block",c?.focus()}),document.addEventListener("click",A=>{if(!b)return;b.contains(A.target)||c?.contains(A.target)||(b.style.display="none")}))}async function t(d,l=""){await v();const f=d.children.length+1,c=document.createElement("div");c.className="form-group";const m=h[l]||{},b=m.type||"string",C=m.default!==void 0?String(m.default):"",A=m.example||m.default||"value";c.innerHTML=`
      <div class="pref-row-grid">
        <div class="pref-field-with-hint">
          <label>Key ${f}</label>
          <input type="text" data-pref="key" placeholder="e.g., locationCallsign" value="${l}" />
          <div class="pref-key-hint" data-pref="key-label"></div>
          <div class="pref-description" data-pref="description"></div>
        </div>
        <div>
          <label>Type ${f}</label>
          <select data-pref="type">
            <option value="string" ${b==="string"?"selected":""}>string</option>
            <option value="boolean" ${b==="boolean"?"selected":""}>boolean</option>
            <option value="long" ${b==="long"||b==="int"?"selected":""}>long</option>
            <option value="int" ${b==="int"&&b!=="long"?"selected":""}>int</option>
          </select>
        </div>
        <div class="pref-value-field">
          <label>Value ${f}</label>
          <input type="text" data-pref="value" placeholder="${A}" value="${l?C:""}" />
          <div class="pref-value-hint" data-pref="value-hint"></div>
        </div>
        <button class="btn btn-secondary pref-remove-btn" type="button">Remove</button>
      </div>`,c.querySelector("button").addEventListener("click",()=>c.remove()),d.appendChild(c),c.querySelectorAll("input,select").forEach(x=>x.addEventListener("input",s)),c.querySelector('[data-pref="key"]')?.addEventListener("input",()=>{e(c),n(c)}),e(c),l&&n(c),s()}function u(d){if(!d)return"";const l=r.find(f=>f.key===d);return l?l.label.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):""}function e(d){const l=d.querySelector('[data-pref="key"]'),f=d.querySelector('[data-pref="key-label"]');if(!l||!f)return;const c=u(l.value.trim());f.textContent=c?`Label: ${c}`:""}function n(d){const l=d.querySelector('[data-pref="key"]'),f=d.querySelector('[data-pref="description"]'),c=d.querySelector('[data-pref="value-hint"]'),m=d.querySelector('[data-pref="type"]'),b=d.querySelector('[data-pref="value"]');if(!l)return;const C=l.value.trim(),A=h[C];if(A){if(f&&(f.textContent=A.description||"",f.style.display=A.description?"block":"none"),m&&A.type){const T=A.type==="int"?"int":A.type;m.value=T}if(c){let T="";A.validValues?Array.isArray(A.validValues)&&(typeof A.validValues[0]=="object"?T=`Options: ${A.validValues.map(S=>`${S.value}=${S.label}`).join(", ")}`:T=`Options: ${A.validValues.join(", ")}`):A.min!==void 0||A.max!==void 0?(T=`Range: ${A.min||0} - ${A.max||""}`,A.unit&&(T+=` ${A.unit}`)):A.type==="boolean"&&(T="Options: true, false"),c.textContent=T,c.style.display=T?"block":"none"}b&&!b.value&&A.default!==void 0&&(b.placeholder=String(A.default))}else f&&(f.textContent="",f.style.display="none"),c&&(c.textContent="",c.style.display="none")}async function p(){return k||(k=await(await fetch(nt.PREFS_JSON)).json(),k)}async function v(){if(E)return E;try{E=await(await fetch("docs/prefs/atak-preferences-detailed.json")).json(),E.preferences&&Object.values(E.preferences).forEach(l=>{l.forEach(f=>{h[f.key]=f})})}catch{E={preferences:{},categories:{}}}return E}async function w(d){try{r=((await p())?.preferencesByVersion||{})[d]||[]}catch{r=[]}}function g(){const d=document.getElementById("pref-rows");if(!d)return"";const l=[];return d.querySelectorAll('[data-pref="key"]').forEach((f,c)=>{const m=d.querySelectorAll('[data-pref="type"]')[c],b=d.querySelectorAll('[data-pref="value"]')[c],C=f.value.trim(),A=m.value.trim(),T=b.value.trim();if(C&&A&&T){const S=c+1;l.push(`key${S}=${encodeURIComponent(C)}`),l.push(`type${S}=${encodeURIComponent(A)}`),l.push(`value${S}=${encodeURIComponent(T)}`)}}),l.length===0?"":`tak://com.atakmap.app/preference?${l.join("&")}`}async function s(){const d=g(),l=document.getElementById("preferences-qr"),f=document.getElementById("preferences-download"),c=document.getElementById("preferences-copy");if(l){if(!d){l.innerHTML=`<div class="qr-placeholder">
        <div style="text-align: center;">
          <p style="margin-bottom: 10px;">No preferences added yet</p>
          <p style="font-size: 0.9em; color: var(--color-text-secondary);">
            Use the search above to find known preferences<br>
            or click "Add Preference" to manually add custom ones
          </p>
        </div>
      </div>`,f&&(f.disabled=!0),c&&(c.disabled=!0);return}try{const m=await $t.toCanvas(d,{width:nt.QR_SIZE,margin:nt.QR_MARGIN});l.innerHTML="",l.appendChild(m),f&&(f.disabled=!1),c&&(c.disabled=!1)}catch{}}}return{init:i,buildPreferenceURI:g}})(),zt=(function(){let k=[];function E(){r(),document.getElementById("save-profile")?.addEventListener("click",p),document.getElementById("load-profile")?.addEventListener("click",v)}function r(){try{k=JSON.parse(localStorage.getItem(nt.STORAGE_KEY)||"[]"),n()}catch(g){console.error(ft.LOAD_PROFILES_ERROR,g),k=[]}}function h(){try{localStorage.setItem(nt.STORAGE_KEY,JSON.stringify(k))}catch(g){console.error("Error saving profiles:",g),rt.showNotification("Error saving profiles","error")}}function i(){const g=Et.getCurrentTab(),s=Tt.getCurrentData();if(s&&s.host)return{type:"tak-config",timestamp:Date.now(),savedTabs:["tak-config"],takConfig:s,atak:s.mode==="atak"?{host:s.host,username:s.username,token:s.token}:{},itak:s.mode==="itak"?{description:s.description,url:s.host,port:s.port,protocol:s.protocol}:{},import:{}};const d=[nt.TABS.ATAK,nt.TABS.ITAK,nt.TABS.IMPORT].includes(g)?g:Et.getLastConfigTab(),l={host:document.getElementById("atak-host")?.value||"",username:document.getElementById("atak-username")?.value||"",token:document.getElementById("atak-token")?.value||""},f={description:document.getElementById("itak-description")?.value||"",url:document.getElementById("itak-url")?.value||"",port:document.getElementById("itak-port")?.value||"",protocol:document.getElementById("itak-protocol")?.value||""},c={url:document.getElementById("import-url")?.value||""},m=[];return Object.values(l).some(b=>b)&&m.push(nt.TABS.ATAK),Object.values(f).some(b=>b)&&m.push(nt.TABS.ITAK),c.url&&m.push(nt.TABS.IMPORT),{type:d,timestamp:Date.now(),savedTabs:m,atak:l,itak:f,import:c}}function t(){const g=document.getElementById("profile-name"),s=document.getElementById("profile-description"),d=g?.value.trim()||"",l=s?.value.trim()||"",f=pt(d),c=pt(l);if(!f){rt.showNotification(ft.PROFILE_NAME_REQUIRED,"error"),mt(g,"invalid");return}mt(g,"valid");const m=i();m.name=f,m.description=c;const b=k.findIndex(C=>C.name===f);if(b>=0){if(!confirm(ft.PROFILE_EXISTS))return;k[b]=m}else k.push(m);h(),n(),Nt.closeModal(),rt.showNotification("Profile saved successfully!","success")}function u(g){if(!g)return;const s=g.atak||{host:g.host,username:g.username,token:g.token},d=g.itak||{description:g.description,url:g.url,port:g.port,protocol:g.protocol},l=g.import||{url:g.url},f=[];if(g.takConfig?(Tt.loadData(g.takConfig),f.push(nt.TABS.TAK_CONFIG)):s&&(s.host||s.username||s.token)?(Tt.loadData({mode:"atak",host:s.host||"",username:s.username||"",token:s.token||"",port:"8089",protocol:"https"}),f.push(nt.TABS.TAK_CONFIG)):d&&(d.description||d.url||d.port||d.protocol)&&(Tt.loadData({mode:"itak",host:d.url||"",port:d.port||"8089",protocol:d.protocol||"https",description:d.description||""}),f.push(nt.TABS.TAK_CONFIG)),l&&l.url){const m=document.getElementById("import-url");m&&(m.value=l.url||""),_t.updateImportQRCore(),f.push(nt.TABS.IMPORT)}let c=g.savedTabs?.[0]||g.type||f[0];(c===nt.TABS.ATAK||c===nt.TABS.ITAK||c==="atak"||c==="itak")&&(c=nt.TABS.TAK_CONFIG),c&&Et.switchTab(c),Nt.closeModal(),rt.showNotification("Profile loaded successfully!","success")}function e(g){confirm(`Are you sure you want to delete the profile "${g}"?`)&&(k=k.filter(s=>s.name!==g),h(),n(),rt.showNotification("Profile deleted successfully!","success"))}function n(){const g=document.getElementById("profiles-container");if(g){if(k.length===0){g.innerHTML='<p style="grid-column: 1 / -1; color: var(--text-secondary);">No saved profiles yet. Create your first profile to get started.</p>';return}g.innerHTML=k.map(s=>{const d=JSON.stringify(s).replace(/"/g,"&quot;"),l=s.savedTabs?.length?s.savedTabs.join(", ").toUpperCase():(s.type||"").toUpperCase();return`
        <div class="profile-card">
          <h4>${pt(s.name)}</h4>
          <p>${pt(s.description||"No description")}</p>
          <p><strong>Tabs:</strong> ${l}</p>
          <p><strong>Created:</strong> ${new Date(s.timestamp).toLocaleDateString()}</p>
          <div class="profile-actions">
            <button class="btn btn-primary" onclick="ProfileManager.loadProfile(${d})">Load</button>
            <button class="btn btn-secondary" onclick="ProfileManager.deleteProfile('${pt(s.name)}')">Delete</button>
          </div>
        </div>
      `}).join("")}}function p(){const g=document.getElementById("modal-title"),s=document.getElementById("profile-name"),d=document.getElementById("profile-description");g&&(g.textContent="Save Profile");const l=i();s&&(s.value=l.name||""),d&&(d.value=l.description||""),Nt.openModal();const f=document.getElementById("profile-name");f?.addEventListener("input",()=>{const c=At({required:!0,value:f.value});mt(f,c)},{once:!1})}function v(){const g=document.getElementById("modal-title");g&&(g.textContent="Load Profile"),w(),Nt.openModal()}function w(){const g=document.querySelector(".modal-body");if(!g||k.length===0){g&&(g.innerHTML="<p>No profiles available to load.</p>");return}g.innerHTML=`
      <div class="profile-selection">
        <p>Select a profile to load:</p>
        <div class="profile-list" role="list">
          ${k.map(s=>{const d=JSON.stringify(s).replace(/"/g,"&quot;");return`
              <div class="profile-item" role="listitem" tabindex="0"
                   onclick="ProfileManager.loadProfile(${d})"
                   onkeypress="if(event.key === 'Enter') ProfileManager.loadProfile(${d})">
                <h4>${pt(s.name)}</h4>
                <p>${pt(s.description||"No description")}</p>
                <span class="profile-type">${s.type.toUpperCase()}</span>
              </div>
            `}).join("")}
        </div>
      </div>
    `}return{init:E,saveProfile:t,loadProfile:u,deleteProfile:e}})(),rt=(function(){function k(u,e="info"){document.querySelectorAll(".notification").forEach(v=>v.remove());const p=document.createElement("div");p.className=`notification notification-${e}`,p.textContent=u,p.setAttribute("role","alert"),p.setAttribute("aria-live","polite"),document.body.appendChild(p),p.offsetHeight,p.classList.add("notification-show"),setTimeout(()=>{p.classList.remove("notification-show"),p.classList.add("notification-hide"),setTimeout(()=>p.remove(),300)},nt.NOTIFICATION_DURATION)}function E(u){const e=document.getElementById(`${u}-data-status`);e&&(e.style.display="flex",setTimeout(()=>{e.style.display="none"},nt.STATUS_DURATION))}function r(u){const e=document.getElementById(`${u}-download`),n=document.getElementById(`${u}-copy`);e&&(e.disabled=!1),n&&(n.disabled=!1)}function h(u){const e=document.getElementById(`${u}-download`),n=document.getElementById(`${u}-copy`);e&&(e.disabled=!0),n&&(n.disabled=!0)}async function i(u){const n=document.getElementById(`${u}-qr`)?.querySelector("canvas");if(n)try{const p=document.createElement("a");p.download=`tak-${u}-config.png`,p.href=n.toDataURL(),p.click()}catch(p){console.error(ft.DOWNLOAD_ERROR,p),k(ft.DOWNLOAD_ERROR,"error")}}async function t(u){let e="";if(u==="tak"){const n=document.getElementById("tak-qr");if(n&&n.dataset.uri){const{uri:p}=n.dataset;e=p}}else switch(u){case nt.TABS.ATAK:{const n=document.getElementById("atak-host")?.value||"",p=document.getElementById("atak-username")?.value||"",v=document.getElementById("atak-token")?.value||"";e=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(n.trim())}&username=${encodeURIComponent(p.trim())}&token=${encodeURIComponent(v.trim())}`;break}case nt.TABS.ITAK:{const n=document.getElementById("itak-description")?.value||"",p=document.getElementById("itak-url")?.value||"",v=document.getElementById("itak-port")?.value||"",w=document.getElementById("itak-protocol")?.value||"",g=ge(p),s=w===nt.PROTOCOLS.HTTPS?nt.PROTOCOLS.SSL:nt.PROTOCOLS.TCP;e=`${n.trim()},${g},${v.trim()},${s}`;break}case nt.TABS.IMPORT:{const n=document.getElementById("import-url")?.value||"";e=`tak://com.atakmap.app/import?url=${encodeURIComponent(n.trim())}`;break}case nt.TABS.PREFERENCES:{e=ln.buildPreferenceURI();break}}try{await navigator.clipboard.writeText(e),k("URI copied to clipboard!","success")}catch(n){console.error(ft.CLIPBOARD_ERROR,n),k(ft.CLIPBOARD_ERROR,"error")}}return{showNotification:k,showDataStatus:E,enableButtons:r,disableButtons:h,downloadQR:i,copyURI:t}})(),ye=(function(){function k(){E(),r(),h(),i(),e()}function E(){const n=document.getElementById("atak-form");if(!n)return;n.querySelectorAll("input").forEach(v=>{v.setAttribute("aria-required","true"),v.addEventListener("input",()=>_t.updateATAKQR())})}function r(){const n=document.getElementById("itak-form");if(!n)return;n.querySelectorAll("input, select").forEach(v=>{v.setAttribute("aria-required","true"),v.addEventListener("input",()=>_t.updateiTAKQR())})}function h(){const n=document.getElementById("import-form");if(!n)return;n.querySelectorAll("input").forEach(v=>{v.setAttribute("aria-required","true"),v.addEventListener("input",()=>_t.updateImportQR())})}function i(){document.addEventListener("click",n=>{const{target:p}=n;if(p.id?.endsWith("-download")){const v=p.id.replace("-download","");rt.downloadQR(v)}if(p.id?.endsWith("-copy")){const v=p.id.replace("-copy","");rt.copyURI(v)}})}function t(){const n=document.getElementById("atak-host")?.value||"",p=document.getElementById("atak-username")?.value||"",v=document.getElementById("atak-token")?.value||"";if(n.trim()){let w=n.trim(),g=nt.PROTOCOLS.HTTPS;try{if(n.trim().includes("://")){const l=new URL(n.trim()),{hostname:f,protocol:c}=l;w=f,g=c.replace(":","")}}catch{}const s=document.getElementById("itak-url"),d=document.getElementById("itak-protocol");s&&(s.value=`${g}://${w}`),d&&(d.value=g)}if(p.trim()){const w=document.getElementById("itak-username");w&&(w.value=p.trim())}if(v.trim()){const w=document.getElementById("itak-token");w&&(w.value=v.trim())}_t.updateiTAKQR()}function u(){const n=document.getElementById("itak-url")?.value||"",p=document.getElementById("itak-username")?.value||"",v=document.getElementById("itak-token")?.value||"";if(n.trim()){const w=ge(n);if(w){const g=document.getElementById("atak-host");g&&(g.value=w)}}if(p.trim()){const w=document.getElementById("atak-username");w&&(w.value=p.trim())}if(v.trim()){const w=document.getElementById("atak-token");w&&(w.value=v.trim())}_t.updateATAKQR()}function e(){const n=document.getElementById("package-protocol");n&&n.addEventListener("change",()=>{})}return{init:k,populateiTAKFromATAK:t,populateATAKFromiTAK:u}})(),Nt=(function(){let k;function E(){if(k=document.getElementById("profile-modal"),!k)return;const i=k.querySelector(".modal-close"),t=document.getElementById("modal-cancel"),u=document.getElementById("modal-save");i?.addEventListener("click",h),t?.addEventListener("click",h),u?.addEventListener("click",zt.saveProfile),k.addEventListener("click",e=>{e.target===k&&h()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&k.classList.contains("active")&&h()})}function r(){k&&(k.classList.add("active"),k.setAttribute("aria-modal","true"),setTimeout(()=>{k.querySelector("input, select, textarea")?.focus()},100))}function h(){k&&(k.classList.remove("active"),k.removeAttribute("aria-modal"))}return{init:E,openModal:r,closeModal:h}})(),Un=(function(){function k(){document.getElementById("help-button")?.addEventListener("click",()=>Et.switchTab(nt.TABS.HELP)),document.addEventListener("keydown",h=>{h.key==="F1"&&(h.preventDefault(),Et.switchTab(nt.TABS.HELP))}),document.getElementById("back-to-top")?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}return{init:k}})(),Mn=(()=>{const k="tak-theme";function E(){const t=localStorage.getItem(k);return t||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function r(t){document.documentElement.setAttribute("data-theme",t),localStorage.setItem(k,t);const u=t==="dark"?"#1e293b":"#1e40af";document.querySelector('meta[name="theme-color"]')?.setAttribute("content",u)}function h(){const u=E()==="light"?"dark":"light";r(u)}function i(){const t=E();r(t),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem(k)||r(e.matches?"dark":"light")});const u=document.getElementById("theme-toggle");u&&u.addEventListener("click",h)}return{init:i,toggleTheme:h,getCurrentTheme:E,applyTheme:r}})(),Qe=(()=>{const k="appVersion",E="1.6.0";async function r(){const h=document.getElementById("app-version"),i=document.getElementById("update-notice");h&&(h.textContent=`v${E}`);const t=localStorage.getItem(k);t&&t!==E&&rt.showNotification(`Updated to version ${E}`,"success"),localStorage.setItem(k,E);try{const e=await(await fetch("version.json",{cache:"no-store"})).json();i&&(i.style.display=e.version!==E?"inline":"none")}catch{}}return{init:r}})();async function qn(){Mn.init(),window.headerAutoHide=new rn,window.pageEnhancements=new an,Et.init(),Tt.init(),Fn.init(),ye.init(),zt.init(),Nt.init(),Un.init(),Qe.init();try{const k=document.getElementById("offline-indicator"),E=()=>{k&&(k.removeAttribute("hidden"),document.body.classList.add("offline"))},r=()=>{k&&(k.setAttribute("hidden",""),document.body.classList.remove("offline"))};r(),window.addEventListener("online",r),window.addEventListener("offline",E)}catch{}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{Qe.init()})}document.addEventListener("DOMContentLoaded",qn);window.updateATAKQR=_t.updateATAKQRCore;window.updateiTAKQR=_t.updateiTAKQRCore;window.updateImportQR=_t.updateImportQRCore;window.populateiTAKFromATAK=ye.populateiTAKFromATAK;window.populateATAKFromiTAK=ye.populateATAKFromiTAK;window.transferDataFromATAKToiTAK=()=>Et.switchTab(nt.TABS.ITAK);window.transferDataFromiTAKToATAK=()=>Et.switchTab(nt.TABS.ATAK);window.showNotification=rt.showNotification;window.loadProfile=zt.loadProfile;window.deleteProfile=zt.deleteProfile;window.ProfileManager=zt;window.PackageBuilder=sn;window.UIController=rt;window.showDataStatus=rt.showDataStatus;window.switchTab=Et.switchTab;window.TAKConfigManager=Tt;
