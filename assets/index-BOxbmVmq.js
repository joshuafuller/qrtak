(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(r){if(r.ep)return;r.ep=!0;const t=a(r);fetch(r.href,t)}})();var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ge(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}var It={},qt,ve;function un(){return ve||(ve=1,qt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),qt}var jt={},kt={},we;function Et(){if(we)return kt;we=1;let k;const A=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return kt.getSymbolSize=function(d){if(!d)throw new Error('"version" cannot be null or undefined');if(d<1||d>40)throw new Error('"version" should be in range from 1 to 40');return d*4+17},kt.getSymbolTotalCodewords=function(d){return A[d]},kt.getBCHDigit=function(a){let d=0;for(;a!==0;)d++,a>>>=1;return d},kt.setToSJISFunction=function(d){if(typeof d!="function")throw new Error('"toSJISFunc" is not a valid function.');k=d},kt.isKanjiModeEnabled=function(){return typeof k<"u"},kt.toSJIS=function(d){return k(d)},kt}var $t={},_e;function fe(){return _e||(_e=1,(function(k){k.L={bit:1},k.M={bit:0},k.Q={bit:3},k.H={bit:2};function A(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return k.L;case"m":case"medium":return k.M;case"q":case"quartile":return k.Q;case"h":case"high":return k.H;default:throw new Error("Unknown EC Level: "+a)}}k.isValid=function(d){return d&&typeof d.bit<"u"&&d.bit>=0&&d.bit<4},k.from=function(d,r){if(k.isValid(d))return d;try{return A(d)}catch{return r}}})($t)),$t}var Ht,be;function dn(){if(be)return Ht;be=1;function k(){this.buffer=[],this.length=0}return k.prototype={get:function(A){const a=Math.floor(A/8);return(this.buffer[a]>>>7-A%8&1)===1},put:function(A,a){for(let d=0;d<a;d++)this.putBit((A>>>a-d-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(A){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),A&&(this.buffer[a]|=128>>>this.length%8),this.length++}},Ht=k,Ht}var Kt,ke;function fn(){if(ke)return Kt;ke=1;function k(A){if(!A||A<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=A,this.data=new Uint8Array(A*A),this.reservedBit=new Uint8Array(A*A)}return k.prototype.set=function(A,a,d,r){const t=A*this.size+a;this.data[t]=d,r&&(this.reservedBit[t]=!0)},k.prototype.get=function(A,a){return this.data[A*this.size+a]},k.prototype.xor=function(A,a,d){this.data[A*this.size+a]^=d},k.prototype.isReserved=function(A,a){return this.reservedBit[A*this.size+a]},Kt=k,Kt}var Zt={},Ee;function hn(){return Ee||(Ee=1,(function(k){const A=Et().getSymbolSize;k.getRowColCoords=function(d){if(d===1)return[];const r=Math.floor(d/7)+2,t=A(d),l=t===145?26:Math.ceil((t-13)/(2*r-2))*2,e=[t-7];for(let s=1;s<r-1;s++)e[s]=e[s-1]-l;return e.push(6),e.reverse()},k.getPositions=function(d){const r=[],t=k.getRowColCoords(d),l=t.length;for(let e=0;e<l;e++)for(let s=0;s<l;s++)e===0&&s===0||e===0&&s===l-1||e===l-1&&s===0||r.push([t[e],t[s]]);return r}})(Zt)),Zt}var Wt={},Ae;function pn(){if(Ae)return Wt;Ae=1;const k=Et().getSymbolSize,A=7;return Wt.getPositions=function(d){const r=k(d);return[[0,0],[r-A,0],[0,r-A]]},Wt}var Vt={},Ie;function mn(){return Ie||(Ie=1,(function(k){k.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const A={N1:3,N2:3,N3:40,N4:10};k.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},k.from=function(r){return k.isValid(r)?parseInt(r,10):void 0},k.getPenaltyN1=function(r){const t=r.size;let l=0,e=0,s=0,m=null,v=null;for(let w=0;w<t;w++){e=s=0,m=v=null;for(let p=0;p<t;p++){let i=r.get(w,p);i===m?e++:(e>=5&&(l+=A.N1+(e-5)),m=i,e=1),i=r.get(p,w),i===v?s++:(s>=5&&(l+=A.N1+(s-5)),v=i,s=1)}e>=5&&(l+=A.N1+(e-5)),s>=5&&(l+=A.N1+(s-5))}return l},k.getPenaltyN2=function(r){const t=r.size;let l=0;for(let e=0;e<t-1;e++)for(let s=0;s<t-1;s++){const m=r.get(e,s)+r.get(e,s+1)+r.get(e+1,s)+r.get(e+1,s+1);(m===4||m===0)&&l++}return l*A.N2},k.getPenaltyN3=function(r){const t=r.size;let l=0,e=0,s=0;for(let m=0;m<t;m++){e=s=0;for(let v=0;v<t;v++)e=e<<1&2047|r.get(m,v),v>=10&&(e===1488||e===93)&&l++,s=s<<1&2047|r.get(v,m),v>=10&&(s===1488||s===93)&&l++}return l*A.N3},k.getPenaltyN4=function(r){let t=0;const l=r.data.length;for(let s=0;s<l;s++)t+=r.data[s];return Math.abs(Math.ceil(t*100/l/5)-10)*A.N4};function a(d,r,t){switch(d){case k.Patterns.PATTERN000:return(r+t)%2===0;case k.Patterns.PATTERN001:return r%2===0;case k.Patterns.PATTERN010:return t%3===0;case k.Patterns.PATTERN011:return(r+t)%3===0;case k.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(t/3))%2===0;case k.Patterns.PATTERN101:return r*t%2+r*t%3===0;case k.Patterns.PATTERN110:return(r*t%2+r*t%3)%2===0;case k.Patterns.PATTERN111:return(r*t%3+(r+t)%2)%2===0;default:throw new Error("bad maskPattern:"+d)}}k.applyMask=function(r,t){const l=t.size;for(let e=0;e<l;e++)for(let s=0;s<l;s++)t.isReserved(s,e)||t.xor(s,e,a(r,s,e))},k.getBestMask=function(r,t){const l=Object.keys(k.Patterns).length;let e=0,s=1/0;for(let m=0;m<l;m++){t(m),k.applyMask(m,r);const v=k.getPenaltyN1(r)+k.getPenaltyN2(r)+k.getPenaltyN3(r)+k.getPenaltyN4(r);k.applyMask(m,r),v<s&&(s=v,e=m)}return e}})(Vt)),Vt}var Dt={},Ce;function Qe(){if(Ce)return Dt;Ce=1;const k=fe(),A=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Dt.getBlocksCount=function(r,t){switch(t){case k.L:return A[(r-1)*4+0];case k.M:return A[(r-1)*4+1];case k.Q:return A[(r-1)*4+2];case k.H:return A[(r-1)*4+3];default:return}},Dt.getTotalCodewordsCount=function(r,t){switch(t){case k.L:return a[(r-1)*4+0];case k.M:return a[(r-1)*4+1];case k.Q:return a[(r-1)*4+2];case k.H:return a[(r-1)*4+3];default:return}},Dt}var Gt={},xt={},Se;function gn(){if(Se)return xt;Se=1;const k=new Uint8Array(512),A=new Uint8Array(256);return(function(){let d=1;for(let r=0;r<255;r++)k[r]=d,A[d]=r,d<<=1,d&256&&(d^=285);for(let r=255;r<512;r++)k[r]=k[r-255]})(),xt.log=function(d){if(d<1)throw new Error("log("+d+")");return A[d]},xt.exp=function(d){return k[d]},xt.mul=function(d,r){return d===0||r===0?0:k[A[d]+A[r]]},xt}var Be;function yn(){return Be||(Be=1,(function(k){const A=gn();k.mul=function(d,r){const t=new Uint8Array(d.length+r.length-1);for(let l=0;l<d.length;l++)for(let e=0;e<r.length;e++)t[l+e]^=A.mul(d[l],r[e]);return t},k.mod=function(d,r){let t=new Uint8Array(d);for(;t.length-r.length>=0;){const l=t[0];for(let s=0;s<r.length;s++)t[s]^=A.mul(r[s],l);let e=0;for(;e<t.length&&t[e]===0;)e++;t=t.slice(e)}return t},k.generateECPolynomial=function(d){let r=new Uint8Array([1]);for(let t=0;t<d;t++)r=k.mul(r,new Uint8Array([1,A.exp(t)]));return r}})(Gt)),Gt}var Qt,Te;function vn(){if(Te)return Qt;Te=1;const k=yn();function A(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return A.prototype.initialize=function(d){this.degree=d,this.genPoly=k.generateECPolynomial(this.degree)},A.prototype.encode=function(d){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(d.length+this.degree);r.set(d);const t=k.mod(r,this.genPoly),l=this.degree-t.length;if(l>0){const e=new Uint8Array(this.degree);return e.set(t,l),e}return t},Qt=A,Qt}var Yt={},Jt={},Xt={},Re;function Ye(){return Re||(Re=1,Xt.isValid=function(A){return!isNaN(A)&&A>=1&&A<=40}),Xt}var vt={},xe;function Je(){if(xe)return vt;xe=1;const k="[0-9]+",A="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const d="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;vt.KANJI=new RegExp(a,"g"),vt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),vt.BYTE=new RegExp(d,"g"),vt.NUMERIC=new RegExp(k,"g"),vt.ALPHANUMERIC=new RegExp(A,"g");const r=new RegExp("^"+a+"$"),t=new RegExp("^"+k+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return vt.testKanji=function(s){return r.test(s)},vt.testNumeric=function(s){return t.test(s)},vt.testAlphanumeric=function(s){return l.test(s)},vt}var Le;function At(){return Le||(Le=1,(function(k){const A=Ye(),a=Je();k.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},k.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},k.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},k.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},k.MIXED={bit:-1},k.getCharCountIndicator=function(t,l){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!A.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?t.ccBits[0]:l<27?t.ccBits[1]:t.ccBits[2]},k.getBestModeForData=function(t){return a.testNumeric(t)?k.NUMERIC:a.testAlphanumeric(t)?k.ALPHANUMERIC:a.testKanji(t)?k.KANJI:k.BYTE},k.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},k.isValid=function(t){return t&&t.bit&&t.ccBits};function d(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return k.NUMERIC;case"alphanumeric":return k.ALPHANUMERIC;case"kanji":return k.KANJI;case"byte":return k.BYTE;default:throw new Error("Unknown mode: "+r)}}k.from=function(t,l){if(k.isValid(t))return t;try{return d(t)}catch{return l}}})(Jt)),Jt}var Pe;function wn(){return Pe||(Pe=1,(function(k){const A=Et(),a=Qe(),d=fe(),r=At(),t=Ye(),l=7973,e=A.getBCHDigit(l);function s(p,i,f){for(let c=1;c<=40;c++)if(i<=k.getCapacity(c,f,p))return c}function m(p,i){return r.getCharCountIndicator(p,i)+4}function v(p,i){let f=0;return p.forEach(function(c){const h=m(c.mode,i);f+=h+c.getBitsLength()}),f}function w(p,i){for(let f=1;f<=40;f++)if(v(p,f)<=k.getCapacity(f,i,r.MIXED))return f}k.from=function(i,f){return t.isValid(i)?parseInt(i,10):f},k.getCapacity=function(i,f,c){if(!t.isValid(i))throw new Error("Invalid QR Code version");typeof c>"u"&&(c=r.BYTE);const h=A.getSymbolTotalCodewords(i),u=a.getTotalCodewordsCount(i,f),y=(h-u)*8;if(c===r.MIXED)return y;const _=y-m(c,i);switch(c){case r.NUMERIC:return Math.floor(_/10*3);case r.ALPHANUMERIC:return Math.floor(_/11*2);case r.KANJI:return Math.floor(_/13);case r.BYTE:default:return Math.floor(_/8)}},k.getBestVersionForData=function(i,f){let c;const h=d.from(f,d.M);if(Array.isArray(i)){if(i.length>1)return w(i,h);if(i.length===0)return 1;c=i[0]}else c=i;return s(c.mode,c.getLength(),h)},k.getEncodedBits=function(i){if(!t.isValid(i)||i<7)throw new Error("Invalid QR Code version");let f=i<<12;for(;A.getBCHDigit(f)-e>=0;)f^=l<<A.getBCHDigit(f)-e;return i<<12|f}})(Yt)),Yt}var te={},ze;function _n(){if(ze)return te;ze=1;const k=Et(),A=1335,a=21522,d=k.getBCHDigit(A);return te.getEncodedBits=function(t,l){const e=t.bit<<3|l;let s=e<<10;for(;k.getBCHDigit(s)-d>=0;)s^=A<<k.getBCHDigit(s)-d;return(e<<10|s)^a},te}var ee={},ne,Oe;function bn(){if(Oe)return ne;Oe=1;const k=At();function A(a){this.mode=k.NUMERIC,this.data=a.toString()}return A.getBitsLength=function(d){return 10*Math.floor(d/3)+(d%3?d%3*3+1:0)},A.prototype.getLength=function(){return this.data.length},A.prototype.getBitsLength=function(){return A.getBitsLength(this.data.length)},A.prototype.write=function(d){let r,t,l;for(r=0;r+3<=this.data.length;r+=3)t=this.data.substr(r,3),l=parseInt(t,10),d.put(l,10);const e=this.data.length-r;e>0&&(t=this.data.substr(r),l=parseInt(t,10),d.put(l,e*3+1))},ne=A,ne}var re,Ne;function kn(){if(Ne)return re;Ne=1;const k=At(),A=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(d){this.mode=k.ALPHANUMERIC,this.data=d}return a.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let t;for(t=0;t+2<=this.data.length;t+=2){let l=A.indexOf(this.data[t])*45;l+=A.indexOf(this.data[t+1]),r.put(l,11)}this.data.length%2&&r.put(A.indexOf(this.data[t]),6)},re=a,re}var ie,De;function En(){if(De)return ie;De=1;const k=At();function A(a){this.mode=k.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return A.getBitsLength=function(d){return d*8},A.prototype.getLength=function(){return this.data.length},A.prototype.getBitsLength=function(){return A.getBitsLength(this.data.length)},A.prototype.write=function(a){for(let d=0,r=this.data.length;d<r;d++)a.put(this.data[d],8)},ie=A,ie}var oe,Fe;function An(){if(Fe)return oe;Fe=1;const k=At(),A=Et();function a(d){this.mode=k.KANJI,this.data=d}return a.getBitsLength=function(r){return r*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(d){let r;for(r=0;r<this.data.length;r++){let t=A.toSJIS(this.data[r]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),d.put(t,13)}},oe=a,oe}var ae={exports:{}},Me;function In(){return Me||(Me=1,(function(k){var A={single_source_shortest_paths:function(a,d,r){var t={},l={};l[d]=0;var e=A.PriorityQueue.make();e.push(d,0);for(var s,m,v,w,p,i,f,c,h;!e.empty();){s=e.pop(),m=s.value,w=s.cost,p=a[m]||{};for(v in p)p.hasOwnProperty(v)&&(i=p[v],f=w+i,c=l[v],h=typeof l[v]>"u",(h||c>f)&&(l[v]=f,e.push(v,f),t[v]=m))}if(typeof r<"u"&&typeof l[r]>"u"){var u=["Could not find a path from ",d," to ",r,"."].join("");throw new Error(u)}return t},extract_shortest_path_from_predecessor_list:function(a,d){for(var r=[],t=d;t;)r.push(t),a[t],t=a[t];return r.reverse(),r},find_path:function(a,d,r){var t=A.single_source_shortest_paths(a,d,r);return A.extract_shortest_path_from_predecessor_list(t,r)},PriorityQueue:{make:function(a){var d=A.PriorityQueue,r={},t;a=a||{};for(t in d)d.hasOwnProperty(t)&&(r[t]=d[t]);return r.queue=[],r.sorter=a.sorter||d.default_sorter,r},default_sorter:function(a,d){return a.cost-d.cost},push:function(a,d){var r={value:a,cost:d};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};k.exports=A})(ae)),ae.exports}var Ue;function Cn(){return Ue||(Ue=1,(function(k){const A=At(),a=bn(),d=kn(),r=En(),t=An(),l=Je(),e=Et(),s=In();function m(u){return unescape(encodeURIComponent(u)).length}function v(u,y,_){const C=[];let I;for(;(I=u.exec(_))!==null;)C.push({data:I[0],index:I.index,mode:y,length:I[0].length});return C}function w(u){const y=v(l.NUMERIC,A.NUMERIC,u),_=v(l.ALPHANUMERIC,A.ALPHANUMERIC,u);let C,I;return e.isKanjiModeEnabled()?(C=v(l.BYTE,A.BYTE,u),I=v(l.KANJI,A.KANJI,u)):(C=v(l.BYTE_KANJI,A.BYTE,u),I=[]),y.concat(_,C,I).sort(function(S,P){return S.index-P.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function p(u,y){switch(y){case A.NUMERIC:return a.getBitsLength(u);case A.ALPHANUMERIC:return d.getBitsLength(u);case A.KANJI:return t.getBitsLength(u);case A.BYTE:return r.getBitsLength(u)}}function i(u){return u.reduce(function(y,_){const C=y.length-1>=0?y[y.length-1]:null;return C&&C.mode===_.mode?(y[y.length-1].data+=_.data,y):(y.push(_),y)},[])}function f(u){const y=[];for(let _=0;_<u.length;_++){const C=u[_];switch(C.mode){case A.NUMERIC:y.push([C,{data:C.data,mode:A.ALPHANUMERIC,length:C.length},{data:C.data,mode:A.BYTE,length:C.length}]);break;case A.ALPHANUMERIC:y.push([C,{data:C.data,mode:A.BYTE,length:C.length}]);break;case A.KANJI:y.push([C,{data:C.data,mode:A.BYTE,length:m(C.data)}]);break;case A.BYTE:y.push([{data:C.data,mode:A.BYTE,length:m(C.data)}])}}return y}function c(u,y){const _={},C={start:{}};let I=["start"];for(let T=0;T<u.length;T++){const S=u[T],P=[];for(let R=0;R<S.length;R++){const M=S[R],x=""+T+R;P.push(x),_[x]={node:M,lastCount:0},C[x]={};for(let g=0;g<I.length;g++){const B=I[g];_[B]&&_[B].node.mode===M.mode?(C[B][x]=p(_[B].lastCount+M.length,M.mode)-p(_[B].lastCount,M.mode),_[B].lastCount+=M.length):(_[B]&&(_[B].lastCount=M.length),C[B][x]=p(M.length,M.mode)+4+A.getCharCountIndicator(M.mode,y))}}I=P}for(let T=0;T<I.length;T++)C[I[T]].end=0;return{map:C,table:_}}function h(u,y){let _;const C=A.getBestModeForData(u);if(_=A.from(y,C),_!==A.BYTE&&_.bit<C.bit)throw new Error('"'+u+'" cannot be encoded with mode '+A.toString(_)+`.
 Suggested mode is: `+A.toString(C));switch(_===A.KANJI&&!e.isKanjiModeEnabled()&&(_=A.BYTE),_){case A.NUMERIC:return new a(u);case A.ALPHANUMERIC:return new d(u);case A.KANJI:return new t(u);case A.BYTE:return new r(u)}}k.fromArray=function(y){return y.reduce(function(_,C){return typeof C=="string"?_.push(h(C,null)):C.data&&_.push(h(C.data,C.mode)),_},[])},k.fromString=function(y,_){const C=w(y,e.isKanjiModeEnabled()),I=f(C),T=c(I,_),S=s.find_path(T.map,"start","end"),P=[];for(let R=1;R<S.length-1;R++)P.push(T.table[S[R]].node);return k.fromArray(i(P))},k.rawSplit=function(y){return k.fromArray(w(y,e.isKanjiModeEnabled()))}})(ee)),ee}var qe;function Sn(){if(qe)return jt;qe=1;const k=Et(),A=fe(),a=dn(),d=fn(),r=hn(),t=pn(),l=mn(),e=Qe(),s=vn(),m=wn(),v=_n(),w=At(),p=Cn();function i(T,S){const P=T.size,R=t.getPositions(S);for(let M=0;M<R.length;M++){const x=R[M][0],g=R[M][1];for(let B=-1;B<=7;B++)if(!(x+B<=-1||P<=x+B))for(let n=-1;n<=7;n++)g+n<=-1||P<=g+n||(B>=0&&B<=6&&(n===0||n===6)||n>=0&&n<=6&&(B===0||B===6)||B>=2&&B<=4&&n>=2&&n<=4?T.set(x+B,g+n,!0,!0):T.set(x+B,g+n,!1,!0))}}function f(T){const S=T.size;for(let P=8;P<S-8;P++){const R=P%2===0;T.set(P,6,R,!0),T.set(6,P,R,!0)}}function c(T,S){const P=r.getPositions(S);for(let R=0;R<P.length;R++){const M=P[R][0],x=P[R][1];for(let g=-2;g<=2;g++)for(let B=-2;B<=2;B++)g===-2||g===2||B===-2||B===2||g===0&&B===0?T.set(M+g,x+B,!0,!0):T.set(M+g,x+B,!1,!0)}}function h(T,S){const P=T.size,R=m.getEncodedBits(S);let M,x,g;for(let B=0;B<18;B++)M=Math.floor(B/3),x=B%3+P-8-3,g=(R>>B&1)===1,T.set(M,x,g,!0),T.set(x,M,g,!0)}function u(T,S,P){const R=T.size,M=v.getEncodedBits(S,P);let x,g;for(x=0;x<15;x++)g=(M>>x&1)===1,x<6?T.set(x,8,g,!0):x<8?T.set(x+1,8,g,!0):T.set(R-15+x,8,g,!0),x<8?T.set(8,R-x-1,g,!0):x<9?T.set(8,15-x-1+1,g,!0):T.set(8,15-x-1,g,!0);T.set(R-8,8,1,!0)}function y(T,S){const P=T.size;let R=-1,M=P-1,x=7,g=0;for(let B=P-1;B>0;B-=2)for(B===6&&B--;;){for(let n=0;n<2;n++)if(!T.isReserved(M,B-n)){let O=!1;g<S.length&&(O=(S[g]>>>x&1)===1),T.set(M,B-n,O),x--,x===-1&&(g++,x=7)}if(M+=R,M<0||P<=M){M-=R,R=-R;break}}}function _(T,S,P){const R=new a;P.forEach(function(n){R.put(n.mode.bit,4),R.put(n.getLength(),w.getCharCountIndicator(n.mode,T)),n.write(R)});const M=k.getSymbolTotalCodewords(T),x=e.getTotalCodewordsCount(T,S),g=(M-x)*8;for(R.getLengthInBits()+4<=g&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const B=(g-R.getLengthInBits())/8;for(let n=0;n<B;n++)R.put(n%2?17:236,8);return C(R,T,S)}function C(T,S,P){const R=k.getSymbolTotalCodewords(S),M=e.getTotalCodewordsCount(S,P),x=R-M,g=e.getBlocksCount(S,P),B=R%g,n=g-B,O=Math.floor(R/g),G=Math.floor(x/g),j=G+1,X=O-G,U=new s(X);let Y=0;const D=new Array(g),z=new Array(g);let J=0;const V=new Uint8Array(T.buffer);for(let rt=0;rt<g;rt++){const lt=rt<n?G:j;D[rt]=V.slice(Y,Y+lt),z[rt]=U.encode(D[rt]),Y+=lt,J=Math.max(J,lt)}const Z=new Uint8Array(R);let at=0,st,et;for(st=0;st<J;st++)for(et=0;et<g;et++)st<D[et].length&&(Z[at++]=D[et][st]);for(st=0;st<X;st++)for(et=0;et<g;et++)Z[at++]=z[et][st];return Z}function I(T,S,P,R){let M;if(Array.isArray(T))M=p.fromArray(T);else if(typeof T=="string"){let O=S;if(!O){const G=p.rawSplit(T);O=m.getBestVersionForData(G,P)}M=p.fromString(T,O||40)}else throw new Error("Invalid data");const x=m.getBestVersionForData(M,P);if(!x)throw new Error("The amount of data is too big to be stored in a QR Code");if(!S)S=x;else if(S<x)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+x+`.
`);const g=_(S,P,M),B=k.getSymbolSize(S),n=new d(B);return i(n,S),f(n),c(n,S),u(n,P,0),S>=7&&h(n,S),y(n,g),isNaN(R)&&(R=l.getBestMask(n,u.bind(null,n,P))),l.applyMask(R,n),u(n,P,R),{modules:n,version:S,errorCorrectionLevel:P,maskPattern:R,segments:M}}return jt.create=function(S,P){if(typeof S>"u"||S==="")throw new Error("No input text");let R=A.M,M,x;return typeof P<"u"&&(R=A.from(P.errorCorrectionLevel,A.M),M=m.from(P.version),x=l.from(P.maskPattern),P.toSJISFunc&&k.setToSJISFunction(P.toSJISFunc)),I(S,M,R,x)},jt}var se={},le={},je;function Xe(){return je||(je=1,(function(k){function A(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let d=a.slice().replace("#","").split("");if(d.length<3||d.length===5||d.length>8)throw new Error("Invalid hex color: "+a);(d.length===3||d.length===4)&&(d=Array.prototype.concat.apply([],d.map(function(t){return[t,t]}))),d.length===6&&d.push("F","F");const r=parseInt(d.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+d.slice(0,6).join("")}}k.getOptions=function(d){d||(d={}),d.color||(d.color={});const r=typeof d.margin>"u"||d.margin===null||d.margin<0?4:d.margin,t=d.width&&d.width>=21?d.width:void 0,l=d.scale||4;return{width:t,scale:t?4:l,margin:r,color:{dark:A(d.color.dark||"#000000ff"),light:A(d.color.light||"#ffffffff")},type:d.type,rendererOpts:d.rendererOpts||{}}},k.getScale=function(d,r){return r.width&&r.width>=d+r.margin*2?r.width/(d+r.margin*2):r.scale},k.getImageWidth=function(d,r){const t=k.getScale(d,r);return Math.floor((d+r.margin*2)*t)},k.qrToImageData=function(d,r,t){const l=r.modules.size,e=r.modules.data,s=k.getScale(l,t),m=Math.floor((l+t.margin*2)*s),v=t.margin*s,w=[t.color.light,t.color.dark];for(let p=0;p<m;p++)for(let i=0;i<m;i++){let f=(p*m+i)*4,c=t.color.light;if(p>=v&&i>=v&&p<m-v&&i<m-v){const h=Math.floor((p-v)/s),u=Math.floor((i-v)/s);c=w[e[h*l+u]?1:0]}d[f++]=c.r,d[f++]=c.g,d[f++]=c.b,d[f]=c.a}}})(le)),le}var $e;function Bn(){return $e||($e=1,(function(k){const A=Xe();function a(r,t,l){r.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=l,t.width=l,t.style.height=l+"px",t.style.width=l+"px"}function d(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}k.render=function(t,l,e){let s=e,m=l;typeof s>"u"&&(!l||!l.getContext)&&(s=l,l=void 0),l||(m=d()),s=A.getOptions(s);const v=A.getImageWidth(t.modules.size,s),w=m.getContext("2d"),p=w.createImageData(v,v);return A.qrToImageData(p.data,t,s),a(w,m,v),w.putImageData(p,0,0),m},k.renderToDataURL=function(t,l,e){let s=e;typeof s>"u"&&(!l||!l.getContext)&&(s=l,l=void 0),s||(s={});const m=k.render(t,l,s),v=s.type||"image/png",w=s.rendererOpts||{};return m.toDataURL(v,w.quality)}})(se)),se}var ce={},He;function Tn(){if(He)return ce;He=1;const k=Xe();function A(r,t){const l=r.a/255,e=t+'="'+r.hex+'"';return l<1?e+" "+t+'-opacity="'+l.toFixed(2).slice(1)+'"':e}function a(r,t,l){let e=r+t;return typeof l<"u"&&(e+=" "+l),e}function d(r,t,l){let e="",s=0,m=!1,v=0;for(let w=0;w<r.length;w++){const p=Math.floor(w%t),i=Math.floor(w/t);!p&&!m&&(m=!0),r[w]?(v++,w>0&&p>0&&r[w-1]||(e+=m?a("M",p+l,.5+i+l):a("m",s,0),s=0,m=!1),p+1<t&&r[w+1]||(e+=a("h",v),v=0)):s++}return e}return ce.render=function(t,l,e){const s=k.getOptions(l),m=t.modules.size,v=t.modules.data,w=m+s.margin*2,p=s.color.light.a?"<path "+A(s.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",i="<path "+A(s.color.dark,"stroke")+' d="'+d(v,m,s.margin)+'"/>',f='viewBox="0 0 '+w+" "+w+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+f+' shape-rendering="crispEdges">'+p+i+`</svg>
`;return typeof e=="function"&&e(null,h),h},ce}var Ke;function Rn(){if(Ke)return It;Ke=1;const k=un(),A=Sn(),a=Bn(),d=Tn();function r(t,l,e,s,m){const v=[].slice.call(arguments,1),w=v.length,p=typeof v[w-1]=="function";if(!p&&!k())throw new Error("Callback required as last argument");if(p){if(w<2)throw new Error("Too few arguments provided");w===2?(m=e,e=l,l=s=void 0):w===3&&(l.getContext&&typeof m>"u"?(m=s,s=void 0):(m=s,s=e,e=l,l=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(e=l,l=s=void 0):w===2&&!l.getContext&&(s=e,e=l,l=void 0),new Promise(function(i,f){try{const c=A.create(e,s);i(t(c,l,s))}catch(c){f(c)}})}try{const i=A.create(e,s);m(null,t(i,l,s))}catch(i){m(i)}}return It.create=A.create,It.toCanvas=r.bind(null,a.render),It.toDataURL=r.bind(null,a.renderToDataURL),It.toString=r.bind(null,function(t,l,e){return d.render(t,e)}),It}var xn=Rn();const he=Ge(xn),tn={HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/};function ue(k,A){let a;return function(...r){const t=()=>{clearTimeout(a),k.apply(this,r)};clearTimeout(a),a=setTimeout(t,A)}}function pt(k){const A=document.createElement("div");return A.textContent=k,A.innerHTML}function pe(k){if(!k||typeof k!="string")return"";try{const A=k.trim(),a=A.startsWith("http")?A:`https://${A}`;return new URL(a).hostname}catch{const A=k.trim().replace(/^https?:\/\//,"").split("/"),[a]=A,[d]=a.split(":");return d||""}}function St(k){return k?/^(\d{1,3}\.){3}\d{1,3}$/.test(k)?k.split(".").every(d=>parseInt(d)>=0&&parseInt(d)<=255):tn.HOSTNAME.test(k):!1}function Mt(k){return tn.PORT.test(String(k))}function Ln(k){try{return new URL(k),!0}catch{return!1}}function Ft(k){throw new Error('Could not dynamically require "'+k+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var de={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ze;function Pn(){return Ze||(Ze=1,(function(k,A){(function(a){k.exports=a()})(function(){return(function a(d,r,t){function l(m,v){if(!r[m]){if(!d[m]){var w=typeof Ft=="function"&&Ft;if(!v&&w)return w(m,!0);if(e)return e(m,!0);var p=new Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p}var i=r[m]={exports:{}};d[m][0].call(i.exports,function(f){var c=d[m][1][f];return l(c||f)},i,i.exports,a,d,r,t)}return r[m].exports}for(var e=typeof Ft=="function"&&Ft,s=0;s<t.length;s++)l(t[s]);return l})({1:[function(a,d,r){var t=a("./utils"),l=a("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(s){for(var m,v,w,p,i,f,c,h=[],u=0,y=s.length,_=y,C=t.getTypeOf(s)!=="string";u<s.length;)_=y-u,w=C?(m=s[u++],v=u<y?s[u++]:0,u<y?s[u++]:0):(m=s.charCodeAt(u++),v=u<y?s.charCodeAt(u++):0,u<y?s.charCodeAt(u++):0),p=m>>2,i=(3&m)<<4|v>>4,f=1<_?(15&v)<<2|w>>6:64,c=2<_?63&w:64,h.push(e.charAt(p)+e.charAt(i)+e.charAt(f)+e.charAt(c));return h.join("")},r.decode=function(s){var m,v,w,p,i,f,c=0,h=0,u="data:";if(s.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var y,_=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===e.charAt(64)&&_--,s.charAt(s.length-2)===e.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=l.uint8array?new Uint8Array(0|_):new Array(0|_);c<s.length;)m=e.indexOf(s.charAt(c++))<<2|(p=e.indexOf(s.charAt(c++)))>>4,v=(15&p)<<4|(i=e.indexOf(s.charAt(c++)))>>2,w=(3&i)<<6|(f=e.indexOf(s.charAt(c++))),y[h++]=m,i!==64&&(y[h++]=v),f!==64&&(y[h++]=w);return y}},{"./support":30,"./utils":32}],2:[function(a,d,r){var t=a("./external"),l=a("./stream/DataWorker"),e=a("./stream/Crc32Probe"),s=a("./stream/DataLengthProbe");function m(v,w,p,i,f){this.compressedSize=v,this.uncompressedSize=w,this.crc32=p,this.compression=i,this.compressedContent=f}m.prototype={getContentWorker:function(){var v=new l(t.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),w=this;return v.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new l(t.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(v,w,p){return v.pipe(new e).pipe(new s("uncompressedSize")).pipe(w.compressWorker(p)).pipe(new s("compressedSize")).withStreamInfo("compression",w)},d.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,d,r){var t=a("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},r.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,d,r){var t=a("./utils"),l=(function(){for(var e,s=[],m=0;m<256;m++){e=m;for(var v=0;v<8;v++)e=1&e?3988292384^e>>>1:e>>>1;s[m]=e}return s})();d.exports=function(e,s){return e!==void 0&&e.length?t.getTypeOf(e)!=="string"?(function(m,v,w,p){var i=l,f=p+w;m^=-1;for(var c=p;c<f;c++)m=m>>>8^i[255&(m^v[c])];return-1^m})(0|s,e,e.length,0):(function(m,v,w,p){var i=l,f=p+w;m^=-1;for(var c=p;c<f;c++)m=m>>>8^i[255&(m^v.charCodeAt(c))];return-1^m})(0|s,e,e.length,0):0}},{"./utils":32}],5:[function(a,d,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(a,d,r){var t=null;t=typeof Promise<"u"?Promise:a("lie"),d.exports={Promise:t}},{lie:37}],7:[function(a,d,r){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=a("pako"),e=a("./utils"),s=a("./stream/GenericWorker"),m=t?"uint8array":"array";function v(w,p){s.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=p,this.meta={}}r.magic="\b\0",e.inherits(v,s),v.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(m,w.data),!1)},v.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(p){w.push({data:p,meta:w.meta})}},r.compressWorker=function(w){return new v("Deflate",w)},r.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,d,r){function t(i,f){var c,h="";for(c=0;c<f;c++)h+=String.fromCharCode(255&i),i>>>=8;return h}function l(i,f,c,h,u,y){var _,C,I=i.file,T=i.compression,S=y!==m.utf8encode,P=e.transformTo("string",y(I.name)),R=e.transformTo("string",m.utf8encode(I.name)),M=I.comment,x=e.transformTo("string",y(M)),g=e.transformTo("string",m.utf8encode(M)),B=R.length!==I.name.length,n=g.length!==M.length,O="",G="",j="",X=I.dir,U=I.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};f&&!c||(Y.crc32=i.crc32,Y.compressedSize=i.compressedSize,Y.uncompressedSize=i.uncompressedSize);var D=0;f&&(D|=8),S||!B&&!n||(D|=2048);var z=0,J=0;X&&(z|=16),u==="UNIX"?(J=798,z|=(function(Z,at){var st=Z;return Z||(st=at?16893:33204),(65535&st)<<16})(I.unixPermissions,X)):(J=20,z|=(function(Z){return 63&(Z||0)})(I.dosPermissions)),_=U.getUTCHours(),_<<=6,_|=U.getUTCMinutes(),_<<=5,_|=U.getUTCSeconds()/2,C=U.getUTCFullYear()-1980,C<<=4,C|=U.getUTCMonth()+1,C<<=5,C|=U.getUTCDate(),B&&(G=t(1,1)+t(v(P),4)+R,O+="up"+t(G.length,2)+G),n&&(j=t(1,1)+t(v(x),4)+g,O+="uc"+t(j.length,2)+j);var V="";return V+=`
\0`,V+=t(D,2),V+=T.magic,V+=t(_,2),V+=t(C,2),V+=t(Y.crc32,4),V+=t(Y.compressedSize,4),V+=t(Y.uncompressedSize,4),V+=t(P.length,2),V+=t(O.length,2),{fileRecord:w.LOCAL_FILE_HEADER+V+P+O,dirRecord:w.CENTRAL_FILE_HEADER+t(J,2)+V+t(x.length,2)+"\0\0\0\0"+t(z,4)+t(h,4)+P+O+x}}var e=a("../utils"),s=a("../stream/GenericWorker"),m=a("../utf8"),v=a("../crc32"),w=a("../signature");function p(i,f,c,h){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=c,this.encodeFileName=h,this.streamFiles=i,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(p,s),p.prototype.push=function(i){var f=i.meta.percent||0,c=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(i):(this.bytesWritten+=i.data.length,s.prototype.push.call(this,{data:i.data,meta:{currentFile:this.currentFile,percent:c?(f+100*(c-h-1))/c:100}}))},p.prototype.openedSource=function(i){this.currentSourceOffset=this.bytesWritten,this.currentFile=i.file.name;var f=this.streamFiles&&!i.file.dir;if(f){var c=l(i,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(i){this.accumulate=!1;var f=this.streamFiles&&!i.file.dir,c=l(i,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),f)this.push({data:(function(h){return w.DATA_DESCRIPTOR+t(h.crc32,4)+t(h.compressedSize,4)+t(h.uncompressedSize,4)})(i),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var i=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var c=this.bytesWritten-i,h=(function(u,y,_,C,I){var T=e.transformTo("string",I(C));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(u,2)+t(u,2)+t(y,4)+t(_,4)+t(T.length,2)+T})(this.dirRecords.length,c,i,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(i){this._sources.push(i);var f=this;return i.on("data",function(c){f.processChunk(c)}),i.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),i.on("error",function(c){f.error(c)}),this},p.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(i){var f=this._sources;if(!s.prototype.error.call(this,i))return!1;for(var c=0;c<f.length;c++)try{f[c].error(i)}catch{}return!0},p.prototype.lock=function(){s.prototype.lock.call(this);for(var i=this._sources,f=0;f<i.length;f++)i[f].lock()},d.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,d,r){var t=a("../compressions"),l=a("./ZipFileWorker");r.generateWorker=function(e,s,m){var v=new l(s.streamFiles,m,s.platform,s.encodeFileName),w=0;try{e.forEach(function(p,i){w++;var f=(function(y,_){var C=y||_,I=t[C];if(!I)throw new Error(C+" is not a valid compression method !");return I})(i.options.compression,s.compression),c=i.options.compressionOptions||s.compressionOptions||{},h=i.dir,u=i.date;i._compressWorker(f,c).withStreamInfo("file",{name:p,dir:h,date:u,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(v)}),v.entriesCount=w}catch(p){v.error(p)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,d,r){function t(){if(!(this instanceof t))return new t;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new t;for(var e in this)typeof this[e]!="function"&&(l[e]=this[e]);return l}}(t.prototype=a("./object")).loadAsync=a("./load"),t.support=a("./support"),t.defaults=a("./defaults"),t.version="3.10.1",t.loadAsync=function(l,e){return new t().loadAsync(l,e)},t.external=a("./external"),d.exports=t},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,d,r){var t=a("./utils"),l=a("./external"),e=a("./utf8"),s=a("./zipEntries"),m=a("./stream/Crc32Probe"),v=a("./nodejsUtils");function w(p){return new l.Promise(function(i,f){var c=p.decompressed.getContentWorker().pipe(new m);c.on("error",function(h){f(h)}).on("end",function(){c.streamInfo.crc32!==p.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):i()}).resume()})}d.exports=function(p,i){var f=this;return i=t.extend(i||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),v.isNode&&v.isStream(p)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):t.prepareContent("the loaded zip file",p,!0,i.optimizedBinaryString,i.base64).then(function(c){var h=new s(i);return h.load(c),h}).then(function(c){var h=[l.Promise.resolve(c)],u=c.files;if(i.checkCRC32)for(var y=0;y<u.length;y++)h.push(w(u[y]));return l.Promise.all(h)}).then(function(c){for(var h=c.shift(),u=h.files,y=0;y<u.length;y++){var _=u[y],C=_.fileNameStr,I=t.resolve(_.fileNameStr);f.file(I,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:i.createFolders}),_.dir||(f.file(I).unsafeOriginalName=C)}return h.zipComment.length&&(f.comment=h.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,d,r){var t=a("../utils"),l=a("../stream/GenericWorker");function e(s,m){l.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(m)}t.inherits(e,l),e.prototype._bindStream=function(s){var m=this;(this._stream=s).pause(),s.on("data",function(v){m.push({data:v,meta:{percent:0}})}).on("error",function(v){m.isPaused?this.generatedError=v:m.error(v)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},e.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,d,r){var t=a("readable-stream").Readable;function l(e,s,m){t.call(this,s),this._helper=e;var v=this;e.on("data",function(w,p){v.push(w)||v._helper.pause(),m&&m(p)}).on("error",function(w){v.emit("error",w)}).on("end",function(){v.push(null)})}a("../utils").inherits(l,t),l.prototype._read=function(){this._helper.resume()},d.exports=l},{"../utils":32,"readable-stream":16}],14:[function(a,d,r){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(t,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,l);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,l)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var l=new Buffer(t);return l.fill(0),l},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}},{}],15:[function(a,d,r){function t(I,T,S){var P,R=e.getTypeOf(T),M=e.extend(S||{},v);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(I=u(I)),M.createFolders&&(P=h(I))&&y.call(this,P,!0);var x=R==="string"&&M.binary===!1&&M.base64===!1;S&&S.binary!==void 0||(M.binary=!x),(T instanceof w&&T.uncompressedSize===0||M.dir||!T||T.length===0)&&(M.base64=!1,M.binary=!0,T="",M.compression="STORE",R="string");var g=null;g=T instanceof w||T instanceof s?T:f.isNode&&f.isStream(T)?new c(I,T):e.prepareContent(I,T,M.binary,M.optimizedBinaryString,M.base64);var B=new p(I,g,M);this.files[I]=B}var l=a("./utf8"),e=a("./utils"),s=a("./stream/GenericWorker"),m=a("./stream/StreamHelper"),v=a("./defaults"),w=a("./compressedObject"),p=a("./zipObject"),i=a("./generate"),f=a("./nodejsUtils"),c=a("./nodejs/NodejsStreamInputAdapter"),h=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var T=I.lastIndexOf("/");return 0<T?I.substring(0,T):""},u=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},y=function(I,T){return T=T!==void 0?T:v.createFolders,I=u(I),this.files[I]||t.call(this,I,null,{dir:!0,createFolders:T}),this.files[I]};function _(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var T,S,P;for(T in this.files)P=this.files[T],(S=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&I(S,P)},filter:function(I){var T=[];return this.forEach(function(S,P){I(S,P)&&T.push(P)}),T},file:function(I,T,S){if(arguments.length!==1)return I=this.root+I,t.call(this,I,T,S),this;if(_(I)){var P=I;return this.filter(function(M,x){return!x.dir&&P.test(M)})}var R=this.files[this.root+I];return R&&!R.dir?R:null},folder:function(I){if(!I)return this;if(_(I))return this.filter(function(R,M){return M.dir&&I.test(R)});var T=this.root+I,S=y.call(this,T),P=this.clone();return P.root=S.name,P},remove:function(I){I=this.root+I;var T=this.files[I];if(T||(I.slice(-1)!=="/"&&(I+="/"),T=this.files[I]),T&&!T.dir)delete this.files[I];else for(var S=this.filter(function(R,M){return M.name.slice(0,I.length)===I}),P=0;P<S.length;P++)delete this.files[S[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var T,S={};try{if((S=e.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");e.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var P=S.comment||this.comment||"";T=i.generateWorker(this,S,P)}catch(R){(T=new s("error")).error(R)}return new m(T,S.type||"string",S.mimeType)},generateAsync:function(I,T){return this.generateInternalStream(I).accumulate(T)},generateNodeStream:function(I,T){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(T)}};d.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,d,r){d.exports=a("stream")},{stream:void 0}],17:[function(a,d,r){var t=a("./DataReader");function l(e){t.call(this,e);for(var s=0;s<this.data.length;s++)e[s]=255&e[s]}a("../utils").inherits(l,t),l.prototype.byteAt=function(e){return this.data[this.zero+e]},l.prototype.lastIndexOfSignature=function(e){for(var s=e.charCodeAt(0),m=e.charCodeAt(1),v=e.charCodeAt(2),w=e.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===s&&this.data[p+1]===m&&this.data[p+2]===v&&this.data[p+3]===w)return p-this.zero;return-1},l.prototype.readAndCheckSignature=function(e){var s=e.charCodeAt(0),m=e.charCodeAt(1),v=e.charCodeAt(2),w=e.charCodeAt(3),p=this.readData(4);return s===p[0]&&m===p[1]&&v===p[2]&&w===p[3]},l.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},d.exports=l},{"../utils":32,"./DataReader":18}],18:[function(a,d,r){var t=a("../utils");function l(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var s,m=0;for(this.checkOffset(e),s=this.index+e-1;s>=this.index;s--)m=(m<<8)+this.byteAt(s);return this.index+=e,m},readString:function(e){return t.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},d.exports=l},{"../utils":32}],19:[function(a,d,r){var t=a("./Uint8ArrayReader");function l(e){t.call(this,e)}a("../utils").inherits(l,t),l.prototype.readData=function(e){this.checkOffset(e);var s=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},d.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,d,r){var t=a("./DataReader");function l(e){t.call(this,e)}a("../utils").inherits(l,t),l.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},l.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},l.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},l.prototype.readData=function(e){this.checkOffset(e);var s=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},d.exports=l},{"../utils":32,"./DataReader":18}],21:[function(a,d,r){var t=a("./ArrayReader");function l(e){t.call(this,e)}a("../utils").inherits(l,t),l.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},d.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(a,d,r){var t=a("../utils"),l=a("../support"),e=a("./ArrayReader"),s=a("./StringReader"),m=a("./NodeBufferReader"),v=a("./Uint8ArrayReader");d.exports=function(w){var p=t.getTypeOf(w);return t.checkSupport(p),p!=="string"||l.uint8array?p==="nodebuffer"?new m(w):l.uint8array?new v(t.transformTo("uint8array",w)):new e(t.transformTo("array",w)):new s(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,d,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,d,r){var t=a("./GenericWorker"),l=a("../utils");function e(s){t.call(this,"ConvertWorker to "+s),this.destType=s}l.inherits(e,t),e.prototype.processChunk=function(s){this.push({data:l.transformTo(this.destType,s.data),meta:s.meta})},d.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(a,d,r){var t=a("./GenericWorker"),l=a("../crc32");function e(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(e,t),e.prototype.processChunk=function(s){this.streamInfo.crc32=l(s.data,this.streamInfo.crc32||0),this.push(s)},d.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,d,r){var t=a("../utils"),l=a("./GenericWorker");function e(s){l.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}t.inherits(e,l),e.prototype.processChunk=function(s){if(s){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+s.data.length}l.prototype.processChunk.call(this,s)},d.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(a,d,r){var t=a("../utils"),l=a("./GenericWorker");function e(s){l.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(v){m.dataIsReady=!0,m.data=v,m.max=v&&v.length||0,m.type=t.getTypeOf(v),m.isPaused||m._tickAndRepeat()},function(v){m.error(v)})}t.inherits(e,l),e.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,t.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(t.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,m);break;case"uint8array":s=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":s=this.data.slice(this.index,m)}return this.index=m,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(a,d,r){function t(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}t.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,e){return this._listeners[l].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,e){if(this._listeners[l])for(var s=0;s<this._listeners[l].length;s++)this._listeners[l][s].call(this,e)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var e=this;return l.on("data",function(s){e.processChunk(s)}),l.on("end",function(){e.end()}),l.on("error",function(s){e.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,e){return this.extraStreamInfo[l]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},d.exports=t},{}],29:[function(a,d,r){var t=a("../utils"),l=a("./ConvertWorker"),e=a("./GenericWorker"),s=a("../base64"),m=a("../support"),v=a("../external"),w=null;if(m.nodestream)try{w=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(f,c){return new v.Promise(function(h,u){var y=[],_=f._internalType,C=f._outputType,I=f._mimeType;f.on("data",function(T,S){y.push(T),c&&c(S)}).on("error",function(T){y=[],u(T)}).on("end",function(){try{var T=(function(S,P,R){switch(S){case"blob":return t.newBlob(t.transformTo("arraybuffer",P),R);case"base64":return s.encode(P);default:return t.transformTo(S,P)}})(C,(function(S,P){var R,M=0,x=null,g=0;for(R=0;R<P.length;R++)g+=P[R].length;switch(S){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(x=new Uint8Array(g),R=0;R<P.length;R++)x.set(P[R],M),M+=P[R].length;return x;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+S+"'")}})(_,y),I);h(T)}catch(S){u(S)}y=[]}).resume()})}function i(f,c,h){var u=c;switch(c){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=c,this._mimeType=h,t.checkSupport(u),this._worker=f.pipe(new l(u)),f.lock()}catch(y){this._worker=new e("error"),this._worker.error(y)}}i.prototype={accumulate:function(f){return p(this,f)},on:function(f,c){var h=this;return f==="data"?this._worker.on(f,function(u){c.call(h,u.data,u.meta)}):this._worker.on(f,function(){t.delay(c,arguments,h)}),this},resume:function(){return t.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(t.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},f)}},d.exports=i},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,d,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var t=new ArrayBuffer(0);try{r.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(t),r.blob=l.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!a("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(a,d,r){for(var t=a("./utils"),l=a("./support"),e=a("./nodejsUtils"),s=a("./stream/GenericWorker"),m=new Array(256),v=0;v<256;v++)m[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;m[254]=m[254]=1;function w(){s.call(this,"utf-8 decode"),this.leftOver=null}function p(){s.call(this,"utf-8 encode")}r.utf8encode=function(i){return l.nodebuffer?e.newBufferFrom(i,"utf-8"):(function(f){var c,h,u,y,_,C=f.length,I=0;for(y=0;y<C;y++)(64512&(h=f.charCodeAt(y)))==55296&&y+1<C&&(64512&(u=f.charCodeAt(y+1)))==56320&&(h=65536+(h-55296<<10)+(u-56320),y++),I+=h<128?1:h<2048?2:h<65536?3:4;for(c=l.uint8array?new Uint8Array(I):new Array(I),y=_=0;_<I;y++)(64512&(h=f.charCodeAt(y)))==55296&&y+1<C&&(64512&(u=f.charCodeAt(y+1)))==56320&&(h=65536+(h-55296<<10)+(u-56320),y++),h<128?c[_++]=h:(h<2048?c[_++]=192|h>>>6:(h<65536?c[_++]=224|h>>>12:(c[_++]=240|h>>>18,c[_++]=128|h>>>12&63),c[_++]=128|h>>>6&63),c[_++]=128|63&h);return c})(i)},r.utf8decode=function(i){return l.nodebuffer?t.transformTo("nodebuffer",i).toString("utf-8"):(function(f){var c,h,u,y,_=f.length,C=new Array(2*_);for(c=h=0;c<_;)if((u=f[c++])<128)C[h++]=u;else if(4<(y=m[u]))C[h++]=65533,c+=y-1;else{for(u&=y===2?31:y===3?15:7;1<y&&c<_;)u=u<<6|63&f[c++],y--;1<y?C[h++]=65533:u<65536?C[h++]=u:(u-=65536,C[h++]=55296|u>>10&1023,C[h++]=56320|1023&u)}return C.length!==h&&(C.subarray?C=C.subarray(0,h):C.length=h),t.applyFromCharCode(C)})(i=t.transformTo(l.uint8array?"uint8array":"array",i))},t.inherits(w,s),w.prototype.processChunk=function(i){var f=t.transformTo(l.uint8array?"uint8array":"array",i.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var c=f;(f=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),f.set(c,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var h=(function(y,_){var C;for((_=_||y.length)>y.length&&(_=y.length),C=_-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?_:C+m[y[C]]>_?C:_})(f),u=f;h!==f.length&&(l.uint8array?(u=f.subarray(0,h),this.leftOver=f.subarray(h,f.length)):(u=f.slice(0,h),this.leftOver=f.slice(h,f.length))),this.push({data:r.utf8decode(u),meta:i.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=w,t.inherits(p,s),p.prototype.processChunk=function(i){this.push({data:r.utf8encode(i.data),meta:i.meta})},r.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,d,r){var t=a("./support"),l=a("./base64"),e=a("./nodejsUtils"),s=a("./external");function m(c){return c}function v(c,h){for(var u=0;u<c.length;++u)h[u]=255&c.charCodeAt(u);return h}a("setimmediate"),r.newBlob=function(c,h){r.checkSupport("blob");try{return new Blob([c],{type:h})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(c),u.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(c,h,u){var y=[],_=0,C=c.length;if(C<=u)return String.fromCharCode.apply(null,c);for(;_<C;)h==="array"||h==="nodebuffer"?y.push(String.fromCharCode.apply(null,c.slice(_,Math.min(_+u,C)))):y.push(String.fromCharCode.apply(null,c.subarray(_,Math.min(_+u,C)))),_+=u;return y.join("")},stringifyByChar:function(c){for(var h="",u=0;u<c.length;u++)h+=String.fromCharCode(c[u]);return h},applyCanBeUsed:{uint8array:(function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}})()}};function p(c){var h=65536,u=r.getTypeOf(c),y=!0;if(u==="uint8array"?y=w.applyCanBeUsed.uint8array:u==="nodebuffer"&&(y=w.applyCanBeUsed.nodebuffer),y)for(;1<h;)try{return w.stringifyByChunk(c,u,h)}catch{h=Math.floor(h/2)}return w.stringifyByChar(c)}function i(c,h){for(var u=0;u<c.length;u++)h[u]=c[u];return h}r.applyFromCharCode=p;var f={};f.string={string:m,array:function(c){return v(c,new Array(c.length))},arraybuffer:function(c){return f.string.uint8array(c).buffer},uint8array:function(c){return v(c,new Uint8Array(c.length))},nodebuffer:function(c){return v(c,e.allocBuffer(c.length))}},f.array={string:p,array:m,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return e.newBufferFrom(c)}},f.arraybuffer={string:function(c){return p(new Uint8Array(c))},array:function(c){return i(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:m,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return e.newBufferFrom(new Uint8Array(c))}},f.uint8array={string:p,array:function(c){return i(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:m,nodebuffer:function(c){return e.newBufferFrom(c)}},f.nodebuffer={string:p,array:function(c){return i(c,new Array(c.length))},arraybuffer:function(c){return f.nodebuffer.uint8array(c).buffer},uint8array:function(c){return i(c,new Uint8Array(c.length))},nodebuffer:m},r.transformTo=function(c,h){if(h=h||"",!c)return h;r.checkSupport(c);var u=r.getTypeOf(h);return f[u][c](h)},r.resolve=function(c){for(var h=c.split("/"),u=[],y=0;y<h.length;y++){var _=h[y];_==="."||_===""&&y!==0&&y!==h.length-1||(_===".."?u.pop():u.push(_))}return u.join("/")},r.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":t.nodebuffer&&e.isBuffer(c)?"nodebuffer":t.uint8array&&c instanceof Uint8Array?"uint8array":t.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(c){if(!t[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(c){var h,u,y="";for(u=0;u<(c||"").length;u++)y+="\\x"+((h=c.charCodeAt(u))<16?"0":"")+h.toString(16).toUpperCase();return y},r.delay=function(c,h,u){setImmediate(function(){c.apply(u||null,h||[])})},r.inherits=function(c,h){function u(){}u.prototype=h.prototype,c.prototype=new u},r.extend=function(){var c,h,u={};for(c=0;c<arguments.length;c++)for(h in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],h)&&u[h]===void 0&&(u[h]=arguments[c][h]);return u},r.prepareContent=function(c,h,u,y,_){return s.Promise.resolve(h).then(function(C){return t.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new s.Promise(function(I,T){var S=new FileReader;S.onload=function(P){I(P.target.result)},S.onerror=function(P){T(P.target.error)},S.readAsArrayBuffer(C)}):C}).then(function(C){var I=r.getTypeOf(C);return I?(I==="arraybuffer"?C=r.transformTo("uint8array",C):I==="string"&&(_?C=l.decode(C):u&&y!==!0&&(C=(function(T){return v(T,t.uint8array?new Uint8Array(T.length):new Array(T.length))})(C))),C):s.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,d,r){var t=a("./reader/readerFor"),l=a("./utils"),e=a("./signature"),s=a("./zipEntry"),m=a("./support");function v(w){this.files=[],this.loadOptions=w}v.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(p)+", expected "+l.pretty(w)+")")}},isSignature:function(w,p){var i=this.reader.index;this.reader.setIndex(w);var f=this.reader.readString(4)===p;return this.reader.setIndex(i),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),p=m.uint8array?"uint8array":"array",i=l.transformTo(p,w);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,p,i,f=this.zip64EndOfCentralSize-44;0<f;)w=this.reader.readInt(2),p=this.reader.readInt(4),i=this.reader.readData(p),this.zip64ExtensibleData[w]={id:w,length:p,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,p;for(w=0;w<this.files.length;w++)p=this.files[w],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(w=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var p=w;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var f=p-i;if(0<f)this.isSignature(p,e.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(w){this.reader=t(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,d,r){var t=a("./reader/readerFor"),l=a("./utils"),e=a("./compressedObject"),s=a("./crc32"),m=a("./utf8"),v=a("./compressions"),w=a("./support");function p(i,f){this.options=i,this.loadOptions=f}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(i){var f,c;if(i.skip(22),this.fileNameLength=i.readInt(2),c=i.readInt(2),this.fileName=i.readData(this.fileNameLength),i.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=(function(h){for(var u in v)if(Object.prototype.hasOwnProperty.call(v,u)&&v[u].magic===h)return v[u];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,f,i.readData(this.compressedSize))},readCentralPart:function(i){this.versionMadeBy=i.readInt(2),i.skip(2),this.bitFlag=i.readInt(2),this.compressionMethod=i.readString(2),this.date=i.readDate(),this.crc32=i.readInt(4),this.compressedSize=i.readInt(4),this.uncompressedSize=i.readInt(4);var f=i.readInt(2);if(this.extraFieldsLength=i.readInt(2),this.fileCommentLength=i.readInt(2),this.diskNumberStart=i.readInt(2),this.internalFileAttributes=i.readInt(2),this.externalFileAttributes=i.readInt(4),this.localHeaderOffset=i.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");i.skip(f),this.readExtraFields(i),this.parseZIP64ExtraField(i),this.fileComment=i.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var i=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),i==0&&(this.dosPermissions=63&this.externalFileAttributes),i==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var i=t(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=i.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=i.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=i.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=i.readInt(4))}},readExtraFields:function(i){var f,c,h,u=i.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});i.index+4<u;)f=i.readInt(2),c=i.readInt(2),h=i.readData(c),this.extraFields[f]={id:f,length:c,value:h};i.setIndex(u)},handleUTF8:function(){var i=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var c=l.transformTo(i,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var u=l.transformTo(i,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var i=this.extraFields[28789];if(i){var f=t(i.value);return f.readInt(1)!==1||s(this.fileName)!==f.readInt(4)?null:m.utf8decode(f.readData(i.length-5))}return null},findExtraFieldUnicodeComment:function(){var i=this.extraFields[25461];if(i){var f=t(i.value);return f.readInt(1)!==1||s(this.fileComment)!==f.readInt(4)?null:m.utf8decode(f.readData(i.length-5))}return null}},d.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,d,r){function t(f,c,h){this.name=f,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=c,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var l=a("./stream/StreamHelper"),e=a("./stream/DataWorker"),s=a("./utf8"),m=a("./compressedObject"),v=a("./stream/GenericWorker");t.prototype={internalStream:function(f){var c=null,h="string";try{if(!f)throw new Error("No output type specified.");var u=(h=f.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),c=this._decompressWorker();var y=!this._dataBinary;y&&!u&&(c=c.pipe(new s.Utf8EncodeWorker)),!y&&u&&(c=c.pipe(new s.Utf8DecodeWorker))}catch(_){(c=new v("error")).error(_)}return new l(c,h,"")},async:function(f,c){return this.internalStream(f).accumulate(c)},nodeStream:function(f,c){return this.internalStream(f||"nodebuffer").toNodejsStream(c)},_compressWorker:function(f,c){if(this._data instanceof m&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new s.Utf8EncodeWorker)),m.createWorkerFrom(h,f,c)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof v?this._data:new e(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<w.length;i++)t.prototype[w[i]]=p;d.exports=t},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,d,r){(function(t){var l,e,s=t.MutationObserver||t.WebKitMutationObserver;if(s){var m=0,v=new s(f),w=t.document.createTextNode("");v.observe(w,{characterData:!0}),l=function(){w.data=m=++m%2}}else if(t.setImmediate||t.MessageChannel===void 0)l="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var c=t.document.createElement("script");c.onreadystatechange=function(){f(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},t.document.documentElement.appendChild(c)}:function(){setTimeout(f,0)};else{var p=new t.MessageChannel;p.port1.onmessage=f,l=function(){p.port2.postMessage(0)}}var i=[];function f(){var c,h;e=!0;for(var u=i.length;u;){for(h=i,i=[],c=-1;++c<u;)h[c]();u=i.length}e=!1}d.exports=function(c){i.push(c)!==1||e||l()}}).call(this,typeof Nt<"u"?Nt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,d,r){var t=a("immediate");function l(){}var e={},s=["REJECTED"],m=["FULFILLED"],v=["PENDING"];function w(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,u!==l&&c(this,u)}function p(u,y,_){this.promise=u,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function i(u,y,_){t(function(){var C;try{C=y(_)}catch(I){return e.reject(u,I)}C===u?e.reject(u,new TypeError("Cannot resolve promise with itself")):e.resolve(u,C)})}function f(u){var y=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof y=="function")return function(){y.apply(u,arguments)}}function c(u,y){var _=!1;function C(S){_||(_=!0,e.reject(u,S))}function I(S){_||(_=!0,e.resolve(u,S))}var T=h(function(){y(I,C)});T.status==="error"&&C(T.value)}function h(u,y){var _={};try{_.value=u(y),_.status="success"}catch(C){_.status="error",_.value=C}return _}(d.exports=w).prototype.finally=function(u){if(typeof u!="function")return this;var y=this.constructor;return this.then(function(_){return y.resolve(u()).then(function(){return _})},function(_){return y.resolve(u()).then(function(){throw _})})},w.prototype.catch=function(u){return this.then(null,u)},w.prototype.then=function(u,y){if(typeof u!="function"&&this.state===m||typeof y!="function"&&this.state===s)return this;var _=new this.constructor(l);return this.state!==v?i(_,this.state===m?u:y,this.outcome):this.queue.push(new p(_,u,y)),_},p.prototype.callFulfilled=function(u){e.resolve(this.promise,u)},p.prototype.otherCallFulfilled=function(u){i(this.promise,this.onFulfilled,u)},p.prototype.callRejected=function(u){e.reject(this.promise,u)},p.prototype.otherCallRejected=function(u){i(this.promise,this.onRejected,u)},e.resolve=function(u,y){var _=h(f,y);if(_.status==="error")return e.reject(u,_.value);var C=_.value;if(C)c(u,C);else{u.state=m,u.outcome=y;for(var I=-1,T=u.queue.length;++I<T;)u.queue[I].callFulfilled(y)}return u},e.reject=function(u,y){u.state=s,u.outcome=y;for(var _=-1,C=u.queue.length;++_<C;)u.queue[_].callRejected(y);return u},w.resolve=function(u){return u instanceof this?u:e.resolve(new this(l),u)},w.reject=function(u){var y=new this(l);return e.reject(y,u)},w.all=function(u){var y=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=u.length,C=!1;if(!_)return this.resolve([]);for(var I=new Array(_),T=0,S=-1,P=new this(l);++S<_;)R(u[S],S);return P;function R(M,x){y.resolve(M).then(function(g){I[x]=g,++T!==_||C||(C=!0,e.resolve(P,I))},function(g){C||(C=!0,e.reject(P,g))})}},w.race=function(u){var y=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=u.length,C=!1;if(!_)return this.resolve([]);for(var I=-1,T=new this(l);++I<_;)S=u[I],y.resolve(S).then(function(P){C||(C=!0,e.resolve(T,P))},function(P){C||(C=!0,e.reject(T,P))});var S;return T}},{immediate:36}],38:[function(a,d,r){var t={};(0,a("./lib/utils/common").assign)(t,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),d.exports=t},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,d,r){var t=a("./zlib/deflate"),l=a("./utils/common"),e=a("./utils/strings"),s=a("./zlib/messages"),m=a("./zlib/zstream"),v=Object.prototype.toString,w=0,p=-1,i=0,f=8;function c(u){if(!(this instanceof c))return new c(u);this.options=l.assign({level:p,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:i,to:""},u||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var _=t.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(_!==w)throw new Error(s[_]);if(y.header&&t.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?e.string2buf(y.dictionary):v.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(_=t.deflateSetDictionary(this.strm,C))!==w)throw new Error(s[_]);this._dict_set=!0}}function h(u,y){var _=new c(y);if(_.push(u,!0),_.err)throw _.msg||s[_.err];return _.result}c.prototype.push=function(u,y){var _,C,I=this.strm,T=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof u=="string"?I.input=e.string2buf(u):v.call(u)==="[object ArrayBuffer]"?I.input=new Uint8Array(u):I.input=u,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new l.Buf8(T),I.next_out=0,I.avail_out=T),(_=t.deflate(I,C))!==1&&_!==w)return this.onEnd(_),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(l.shrinkBuf(I.output,I.next_out))):this.onData(l.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&_!==1);return C===4?(_=t.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===w):C!==2||(this.onEnd(w),!(I.avail_out=0))},c.prototype.onData=function(u){this.chunks.push(u)},c.prototype.onEnd=function(u){u===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},r.Deflate=c,r.deflate=h,r.deflateRaw=function(u,y){return(y=y||{}).raw=!0,h(u,y)},r.gzip=function(u,y){return(y=y||{}).gzip=!0,h(u,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,d,r){var t=a("./zlib/inflate"),l=a("./utils/common"),e=a("./utils/strings"),s=a("./zlib/constants"),m=a("./zlib/messages"),v=a("./zlib/zstream"),w=a("./zlib/gzheader"),p=Object.prototype.toString;function i(c){if(!(this instanceof i))return new i(c);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},c||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||c&&c.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&(15&h.windowBits)==0&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var u=t.inflateInit2(this.strm,h.windowBits);if(u!==s.Z_OK)throw new Error(m[u]);this.header=new w,t.inflateGetHeader(this.strm,this.header)}function f(c,h){var u=new i(h);if(u.push(c,!0),u.err)throw u.msg||m[u.err];return u.result}i.prototype.push=function(c,h){var u,y,_,C,I,T,S=this.strm,P=this.options.chunkSize,R=this.options.dictionary,M=!1;if(this.ended)return!1;y=h===~~h?h:h===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof c=="string"?S.input=e.binstring2buf(c):p.call(c)==="[object ArrayBuffer]"?S.input=new Uint8Array(c):S.input=c,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new l.Buf8(P),S.next_out=0,S.avail_out=P),(u=t.inflate(S,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&R&&(T=typeof R=="string"?e.string2buf(R):p.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,u=t.inflateSetDictionary(this.strm,T)),u===s.Z_BUF_ERROR&&M===!0&&(u=s.Z_OK,M=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&u!==s.Z_STREAM_END&&(S.avail_in!==0||y!==s.Z_FINISH&&y!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=e.utf8border(S.output,S.next_out),C=S.next_out-_,I=e.buf2string(S.output,_),S.next_out=C,S.avail_out=P-C,C&&l.arraySet(S.output,S.output,_,C,0),this.onData(I)):this.onData(l.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(M=!0)}while((0<S.avail_in||S.avail_out===0)&&u!==s.Z_STREAM_END);return u===s.Z_STREAM_END&&(y=s.Z_FINISH),y===s.Z_FINISH?(u=t.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):y!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(S.avail_out=0))},i.prototype.onData=function(c){this.chunks.push(c)},i.prototype.onEnd=function(c){c===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},r.Inflate=i,r.inflate=f,r.inflateRaw=function(c,h){return(h=h||{}).raw=!0,f(c,h)},r.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,d,r){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(s){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var v=m.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var w in v)v.hasOwnProperty(w)&&(s[w]=v[w])}}return s},r.shrinkBuf=function(s,m){return s.length===m?s:s.subarray?s.subarray(0,m):(s.length=m,s)};var l={arraySet:function(s,m,v,w,p){if(m.subarray&&s.subarray)s.set(m.subarray(v,v+w),p);else for(var i=0;i<w;i++)s[p+i]=m[v+i]},flattenChunks:function(s){var m,v,w,p,i,f;for(m=w=0,v=s.length;m<v;m++)w+=s[m].length;for(f=new Uint8Array(w),m=p=0,v=s.length;m<v;m++)i=s[m],f.set(i,p),p+=i.length;return f}},e={arraySet:function(s,m,v,w,p){for(var i=0;i<w;i++)s[p+i]=m[v+i]},flattenChunks:function(s){return[].concat.apply([],s)}};r.setTyped=function(s){s?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,l)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,e))},r.setTyped(t)},{}],42:[function(a,d,r){var t=a("./common"),l=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var s=new t.Buf8(256),m=0;m<256;m++)s[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function v(w,p){if(p<65537&&(w.subarray&&e||!w.subarray&&l))return String.fromCharCode.apply(null,t.shrinkBuf(w,p));for(var i="",f=0;f<p;f++)i+=String.fromCharCode(w[f]);return i}s[254]=s[254]=1,r.string2buf=function(w){var p,i,f,c,h,u=w.length,y=0;for(c=0;c<u;c++)(64512&(i=w.charCodeAt(c)))==55296&&c+1<u&&(64512&(f=w.charCodeAt(c+1)))==56320&&(i=65536+(i-55296<<10)+(f-56320),c++),y+=i<128?1:i<2048?2:i<65536?3:4;for(p=new t.Buf8(y),c=h=0;h<y;c++)(64512&(i=w.charCodeAt(c)))==55296&&c+1<u&&(64512&(f=w.charCodeAt(c+1)))==56320&&(i=65536+(i-55296<<10)+(f-56320),c++),i<128?p[h++]=i:(i<2048?p[h++]=192|i>>>6:(i<65536?p[h++]=224|i>>>12:(p[h++]=240|i>>>18,p[h++]=128|i>>>12&63),p[h++]=128|i>>>6&63),p[h++]=128|63&i);return p},r.buf2binstring=function(w){return v(w,w.length)},r.binstring2buf=function(w){for(var p=new t.Buf8(w.length),i=0,f=p.length;i<f;i++)p[i]=w.charCodeAt(i);return p},r.buf2string=function(w,p){var i,f,c,h,u=p||w.length,y=new Array(2*u);for(i=f=0;i<u;)if((c=w[i++])<128)y[f++]=c;else if(4<(h=s[c]))y[f++]=65533,i+=h-1;else{for(c&=h===2?31:h===3?15:7;1<h&&i<u;)c=c<<6|63&w[i++],h--;1<h?y[f++]=65533:c<65536?y[f++]=c:(c-=65536,y[f++]=55296|c>>10&1023,y[f++]=56320|1023&c)}return v(y,f)},r.utf8border=function(w,p){var i;for((p=p||w.length)>w.length&&(p=w.length),i=p-1;0<=i&&(192&w[i])==128;)i--;return i<0||i===0?p:i+s[w[i]]>p?i:p}},{"./common":41}],43:[function(a,d,r){d.exports=function(t,l,e,s){for(var m=65535&t|0,v=t>>>16&65535|0,w=0;e!==0;){for(e-=w=2e3<e?2e3:e;v=v+(m=m+l[s++]|0)|0,--w;);m%=65521,v%=65521}return m|v<<16|0}},{}],44:[function(a,d,r){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,d,r){var t=(function(){for(var l,e=[],s=0;s<256;s++){l=s;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;e[s]=l}return e})();d.exports=function(l,e,s,m){var v=t,w=m+s;l^=-1;for(var p=m;p<w;p++)l=l>>>8^v[255&(l^e[p])];return-1^l}},{}],46:[function(a,d,r){var t,l=a("../utils/common"),e=a("./trees"),s=a("./adler32"),m=a("./crc32"),v=a("./messages"),w=0,p=4,i=0,f=-2,c=-1,h=4,u=2,y=8,_=9,C=286,I=30,T=19,S=2*C+1,P=15,R=3,M=258,x=M+R+1,g=42,B=113,n=1,O=2,G=3,j=4;function X(o,q){return o.msg=v[q],q}function U(o){return(o<<1)-(4<o?9:0)}function Y(o){for(var q=o.length;0<=--q;)o[q]=0}function D(o){var q=o.state,F=q.pending;F>o.avail_out&&(F=o.avail_out),F!==0&&(l.arraySet(o.output,q.pending_buf,q.pending_out,F,o.next_out),o.next_out+=F,q.pending_out+=F,o.total_out+=F,o.avail_out-=F,q.pending-=F,q.pending===0&&(q.pending_out=0))}function z(o,q){e._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,q),o.block_start=o.strstart,D(o.strm)}function J(o,q){o.pending_buf[o.pending++]=q}function V(o,q){o.pending_buf[o.pending++]=q>>>8&255,o.pending_buf[o.pending++]=255&q}function Z(o,q){var F,E,b=o.max_chain_length,L=o.strstart,$=o.prev_length,H=o.nice_match,N=o.strstart>o.w_size-x?o.strstart-(o.w_size-x):0,K=o.window,Q=o.w_mask,W=o.prev,tt=o.strstart+M,ct=K[L+$-1],ot=K[L+$];o.prev_length>=o.good_match&&(b>>=2),H>o.lookahead&&(H=o.lookahead);do if(K[(F=q)+$]===ot&&K[F+$-1]===ct&&K[F]===K[L]&&K[++F]===K[L+1]){L+=2,F++;do;while(K[++L]===K[++F]&&K[++L]===K[++F]&&K[++L]===K[++F]&&K[++L]===K[++F]&&K[++L]===K[++F]&&K[++L]===K[++F]&&K[++L]===K[++F]&&K[++L]===K[++F]&&L<tt);if(E=M-(tt-L),L=tt-M,$<E){if(o.match_start=q,H<=($=E))break;ct=K[L+$-1],ot=K[L+$]}}while((q=W[q&Q])>N&&--b!=0);return $<=o.lookahead?$:o.lookahead}function at(o){var q,F,E,b,L,$,H,N,K,Q,W=o.w_size;do{if(b=o.window_size-o.lookahead-o.strstart,o.strstart>=W+(W-x)){for(l.arraySet(o.window,o.window,W,W,0),o.match_start-=W,o.strstart-=W,o.block_start-=W,q=F=o.hash_size;E=o.head[--q],o.head[q]=W<=E?E-W:0,--F;);for(q=F=W;E=o.prev[--q],o.prev[q]=W<=E?E-W:0,--F;);b+=W}if(o.strm.avail_in===0)break;if($=o.strm,H=o.window,N=o.strstart+o.lookahead,K=b,Q=void 0,Q=$.avail_in,K<Q&&(Q=K),F=Q===0?0:($.avail_in-=Q,l.arraySet(H,$.input,$.next_in,Q,N),$.state.wrap===1?$.adler=s($.adler,H,Q,N):$.state.wrap===2&&($.adler=m($.adler,H,Q,N)),$.next_in+=Q,$.total_in+=Q,Q),o.lookahead+=F,o.lookahead+o.insert>=R)for(L=o.strstart-o.insert,o.ins_h=o.window[L],o.ins_h=(o.ins_h<<o.hash_shift^o.window[L+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[L+R-1])&o.hash_mask,o.prev[L&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=L,L++,o.insert--,!(o.lookahead+o.insert<R)););}while(o.lookahead<x&&o.strm.avail_in!==0)}function st(o,q){for(var F,E;;){if(o.lookahead<x){if(at(o),o.lookahead<x&&q===w)return n;if(o.lookahead===0)break}if(F=0,o.lookahead>=R&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,F=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),F!==0&&o.strstart-F<=o.w_size-x&&(o.match_length=Z(o,F)),o.match_length>=R)if(E=e._tr_tally(o,o.strstart-o.match_start,o.match_length-R),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=R){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,F=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else E=e._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(E&&(z(o,!1),o.strm.avail_out===0))return n}return o.insert=o.strstart<R-1?o.strstart:R-1,q===p?(z(o,!0),o.strm.avail_out===0?G:j):o.last_lit&&(z(o,!1),o.strm.avail_out===0)?n:O}function et(o,q){for(var F,E,b;;){if(o.lookahead<x){if(at(o),o.lookahead<x&&q===w)return n;if(o.lookahead===0)break}if(F=0,o.lookahead>=R&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,F=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=R-1,F!==0&&o.prev_length<o.max_lazy_match&&o.strstart-F<=o.w_size-x&&(o.match_length=Z(o,F),o.match_length<=5&&(o.strategy===1||o.match_length===R&&4096<o.strstart-o.match_start)&&(o.match_length=R-1)),o.prev_length>=R&&o.match_length<=o.prev_length){for(b=o.strstart+o.lookahead-R,E=e._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-R),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=b&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+R-1])&o.hash_mask,F=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=R-1,o.strstart++,E&&(z(o,!1),o.strm.avail_out===0))return n}else if(o.match_available){if((E=e._tr_tally(o,0,o.window[o.strstart-1]))&&z(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return n}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(E=e._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<R-1?o.strstart:R-1,q===p?(z(o,!0),o.strm.avail_out===0?G:j):o.last_lit&&(z(o,!1),o.strm.avail_out===0)?n:O}function rt(o,q,F,E,b){this.good_length=o,this.max_lazy=q,this.nice_length=F,this.max_chain=E,this.func=b}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*S),this.dyn_dtree=new l.Buf16(2*(2*I+1)),this.bl_tree=new l.Buf16(2*(2*T+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(P+1),this.heap=new l.Buf16(2*C+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*C+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(o){var q;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=u,(q=o.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?g:B,o.adler=q.wrap===2?0:1,q.last_flush=w,e._tr_init(q),i):X(o,f)}function mt(o){var q=ut(o);return q===i&&(function(F){F.window_size=2*F.w_size,Y(F.head),F.max_lazy_match=t[F.level].max_lazy,F.good_match=t[F.level].good_length,F.nice_match=t[F.level].nice_length,F.max_chain_length=t[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=R-1,F.match_available=0,F.ins_h=0})(o.state),q}function dt(o,q,F,E,b,L){if(!o)return f;var $=1;if(q===c&&(q=6),E<0?($=0,E=-E):15<E&&($=2,E-=16),b<1||_<b||F!==y||E<8||15<E||q<0||9<q||L<0||h<L)return X(o,f);E===8&&(E=9);var H=new lt;return(o.state=H).strm=o,H.wrap=$,H.gzhead=null,H.w_bits=E,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=b+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+R-1)/R),H.window=new l.Buf8(2*H.w_size),H.head=new l.Buf16(H.hash_size),H.prev=new l.Buf16(H.w_size),H.lit_bufsize=1<<b+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new l.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=q,H.strategy=L,H.method=F,mt(o)}t=[new rt(0,0,0,0,function(o,q){var F=65535;for(F>o.pending_buf_size-5&&(F=o.pending_buf_size-5);;){if(o.lookahead<=1){if(at(o),o.lookahead===0&&q===w)return n;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var E=o.block_start+F;if((o.strstart===0||o.strstart>=E)&&(o.lookahead=o.strstart-E,o.strstart=E,z(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-x&&(z(o,!1),o.strm.avail_out===0))return n}return o.insert=0,q===p?(z(o,!0),o.strm.avail_out===0?G:j):(o.strstart>o.block_start&&(z(o,!1),o.strm.avail_out),n)}),new rt(4,4,8,4,st),new rt(4,5,16,8,st),new rt(4,6,32,32,st),new rt(4,4,16,16,et),new rt(8,16,32,32,et),new rt(8,16,128,128,et),new rt(8,32,128,256,et),new rt(32,128,258,1024,et),new rt(32,258,258,4096,et)],r.deflateInit=function(o,q){return dt(o,q,y,15,8,0)},r.deflateInit2=dt,r.deflateReset=mt,r.deflateResetKeep=ut,r.deflateSetHeader=function(o,q){return o&&o.state?o.state.wrap!==2?f:(o.state.gzhead=q,i):f},r.deflate=function(o,q){var F,E,b,L;if(!o||!o.state||5<q||q<0)return o?X(o,f):f;if(E=o.state,!o.output||!o.input&&o.avail_in!==0||E.status===666&&q!==p)return X(o,o.avail_out===0?-5:f);if(E.strm=o,F=E.last_flush,E.last_flush=q,E.status===g)if(E.wrap===2)o.adler=0,J(E,31),J(E,139),J(E,8),E.gzhead?(J(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),J(E,255&E.gzhead.time),J(E,E.gzhead.time>>8&255),J(E,E.gzhead.time>>16&255),J(E,E.gzhead.time>>24&255),J(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),J(E,255&E.gzhead.os),E.gzhead.extra&&E.gzhead.extra.length&&(J(E,255&E.gzhead.extra.length),J(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(o.adler=m(o.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=69):(J(E,0),J(E,0),J(E,0),J(E,0),J(E,0),J(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),J(E,3),E.status=B);else{var $=y+(E.w_bits-8<<4)<<8;$|=(2<=E.strategy||E.level<2?0:E.level<6?1:E.level===6?2:3)<<6,E.strstart!==0&&($|=32),$+=31-$%31,E.status=B,V(E,$),E.strstart!==0&&(V(E,o.adler>>>16),V(E,65535&o.adler)),o.adler=1}if(E.status===69)if(E.gzhead.extra){for(b=E.pending;E.gzindex<(65535&E.gzhead.extra.length)&&(E.pending!==E.pending_buf_size||(E.gzhead.hcrc&&E.pending>b&&(o.adler=m(o.adler,E.pending_buf,E.pending-b,b)),D(o),b=E.pending,E.pending!==E.pending_buf_size));)J(E,255&E.gzhead.extra[E.gzindex]),E.gzindex++;E.gzhead.hcrc&&E.pending>b&&(o.adler=m(o.adler,E.pending_buf,E.pending-b,b)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=73)}else E.status=73;if(E.status===73)if(E.gzhead.name){b=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>b&&(o.adler=m(o.adler,E.pending_buf,E.pending-b,b)),D(o),b=E.pending,E.pending===E.pending_buf_size)){L=1;break}L=E.gzindex<E.gzhead.name.length?255&E.gzhead.name.charCodeAt(E.gzindex++):0,J(E,L)}while(L!==0);E.gzhead.hcrc&&E.pending>b&&(o.adler=m(o.adler,E.pending_buf,E.pending-b,b)),L===0&&(E.gzindex=0,E.status=91)}else E.status=91;if(E.status===91)if(E.gzhead.comment){b=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>b&&(o.adler=m(o.adler,E.pending_buf,E.pending-b,b)),D(o),b=E.pending,E.pending===E.pending_buf_size)){L=1;break}L=E.gzindex<E.gzhead.comment.length?255&E.gzhead.comment.charCodeAt(E.gzindex++):0,J(E,L)}while(L!==0);E.gzhead.hcrc&&E.pending>b&&(o.adler=m(o.adler,E.pending_buf,E.pending-b,b)),L===0&&(E.status=103)}else E.status=103;if(E.status===103&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&D(o),E.pending+2<=E.pending_buf_size&&(J(E,255&o.adler),J(E,o.adler>>8&255),o.adler=0,E.status=B)):E.status=B),E.pending!==0){if(D(o),o.avail_out===0)return E.last_flush=-1,i}else if(o.avail_in===0&&U(q)<=U(F)&&q!==p)return X(o,-5);if(E.status===666&&o.avail_in!==0)return X(o,-5);if(o.avail_in!==0||E.lookahead!==0||q!==w&&E.status!==666){var H=E.strategy===2?(function(N,K){for(var Q;;){if(N.lookahead===0&&(at(N),N.lookahead===0)){if(K===w)return n;break}if(N.match_length=0,Q=e._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,Q&&(z(N,!1),N.strm.avail_out===0))return n}return N.insert=0,K===p?(z(N,!0),N.strm.avail_out===0?G:j):N.last_lit&&(z(N,!1),N.strm.avail_out===0)?n:O})(E,q):E.strategy===3?(function(N,K){for(var Q,W,tt,ct,ot=N.window;;){if(N.lookahead<=M){if(at(N),N.lookahead<=M&&K===w)return n;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=R&&0<N.strstart&&(W=ot[tt=N.strstart-1])===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]){ct=N.strstart+M;do;while(W===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]&&W===ot[++tt]&&tt<ct);N.match_length=M-(ct-tt),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=R?(Q=e._tr_tally(N,1,N.match_length-R),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(Q=e._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),Q&&(z(N,!1),N.strm.avail_out===0))return n}return N.insert=0,K===p?(z(N,!0),N.strm.avail_out===0?G:j):N.last_lit&&(z(N,!1),N.strm.avail_out===0)?n:O})(E,q):t[E.level].func(E,q);if(H!==G&&H!==j||(E.status=666),H===n||H===G)return o.avail_out===0&&(E.last_flush=-1),i;if(H===O&&(q===1?e._tr_align(E):q!==5&&(e._tr_stored_block(E,0,0,!1),q===3&&(Y(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),D(o),o.avail_out===0))return E.last_flush=-1,i}return q!==p?i:E.wrap<=0?1:(E.wrap===2?(J(E,255&o.adler),J(E,o.adler>>8&255),J(E,o.adler>>16&255),J(E,o.adler>>24&255),J(E,255&o.total_in),J(E,o.total_in>>8&255),J(E,o.total_in>>16&255),J(E,o.total_in>>24&255)):(V(E,o.adler>>>16),V(E,65535&o.adler)),D(o),0<E.wrap&&(E.wrap=-E.wrap),E.pending!==0?i:1)},r.deflateEnd=function(o){var q;return o&&o.state?(q=o.state.status)!==g&&q!==69&&q!==73&&q!==91&&q!==103&&q!==B&&q!==666?X(o,f):(o.state=null,q===B?X(o,-3):i):f},r.deflateSetDictionary=function(o,q){var F,E,b,L,$,H,N,K,Q=q.length;if(!o||!o.state||(L=(F=o.state).wrap)===2||L===1&&F.status!==g||F.lookahead)return f;for(L===1&&(o.adler=s(o.adler,q,Q,0)),F.wrap=0,Q>=F.w_size&&(L===0&&(Y(F.head),F.strstart=0,F.block_start=0,F.insert=0),K=new l.Buf8(F.w_size),l.arraySet(K,q,Q-F.w_size,F.w_size,0),q=K,Q=F.w_size),$=o.avail_in,H=o.next_in,N=o.input,o.avail_in=Q,o.next_in=0,o.input=q,at(F);F.lookahead>=R;){for(E=F.strstart,b=F.lookahead-(R-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[E+R-1])&F.hash_mask,F.prev[E&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=E,E++,--b;);F.strstart=E,F.lookahead=R-1,at(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=R-1,F.match_available=0,o.next_in=H,o.input=N,o.avail_in=$,F.wrap=L,i},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,d,r){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,d,r){d.exports=function(t,l){var e,s,m,v,w,p,i,f,c,h,u,y,_,C,I,T,S,P,R,M,x,g,B,n,O;e=t.state,s=t.next_in,n=t.input,m=s+(t.avail_in-5),v=t.next_out,O=t.output,w=v-(l-t.avail_out),p=v+(t.avail_out-257),i=e.dmax,f=e.wsize,c=e.whave,h=e.wnext,u=e.window,y=e.hold,_=e.bits,C=e.lencode,I=e.distcode,T=(1<<e.lenbits)-1,S=(1<<e.distbits)-1;t:do{_<15&&(y+=n[s++]<<_,_+=8,y+=n[s++]<<_,_+=8),P=C[y&T];e:for(;;){if(y>>>=R=P>>>24,_-=R,(R=P>>>16&255)===0)O[v++]=65535&P;else{if(!(16&R)){if((64&R)==0){P=C[(65535&P)+(y&(1<<R)-1)];continue e}if(32&R){e.mode=12;break t}t.msg="invalid literal/length code",e.mode=30;break t}M=65535&P,(R&=15)&&(_<R&&(y+=n[s++]<<_,_+=8),M+=y&(1<<R)-1,y>>>=R,_-=R),_<15&&(y+=n[s++]<<_,_+=8,y+=n[s++]<<_,_+=8),P=I[y&S];n:for(;;){if(y>>>=R=P>>>24,_-=R,!(16&(R=P>>>16&255))){if((64&R)==0){P=I[(65535&P)+(y&(1<<R)-1)];continue n}t.msg="invalid distance code",e.mode=30;break t}if(x=65535&P,_<(R&=15)&&(y+=n[s++]<<_,(_+=8)<R&&(y+=n[s++]<<_,_+=8)),i<(x+=y&(1<<R)-1)){t.msg="invalid distance too far back",e.mode=30;break t}if(y>>>=R,_-=R,(R=v-w)<x){if(c<(R=x-R)&&e.sane){t.msg="invalid distance too far back",e.mode=30;break t}if(B=u,(g=0)===h){if(g+=f-R,R<M){for(M-=R;O[v++]=u[g++],--R;);g=v-x,B=O}}else if(h<R){if(g+=f+h-R,(R-=h)<M){for(M-=R;O[v++]=u[g++],--R;);if(g=0,h<M){for(M-=R=h;O[v++]=u[g++],--R;);g=v-x,B=O}}}else if(g+=h-R,R<M){for(M-=R;O[v++]=u[g++],--R;);g=v-x,B=O}for(;2<M;)O[v++]=B[g++],O[v++]=B[g++],O[v++]=B[g++],M-=3;M&&(O[v++]=B[g++],1<M&&(O[v++]=B[g++]))}else{for(g=v-x;O[v++]=O[g++],O[v++]=O[g++],O[v++]=O[g++],2<(M-=3););M&&(O[v++]=O[g++],1<M&&(O[v++]=O[g++]))}break}}break}}while(s<m&&v<p);s-=M=_>>3,y&=(1<<(_-=M<<3))-1,t.next_in=s,t.next_out=v,t.avail_in=s<m?m-s+5:5-(s-m),t.avail_out=v<p?p-v+257:257-(v-p),e.hold=y,e.bits=_}},{}],49:[function(a,d,r){var t=a("../utils/common"),l=a("./adler32"),e=a("./crc32"),s=a("./inffast"),m=a("./inftrees"),v=1,w=2,p=0,i=-2,f=1,c=852,h=592;function u(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(g){var B;return g&&g.state?(B=g.state,g.total_in=g.total_out=B.total=0,g.msg="",B.wrap&&(g.adler=1&B.wrap),B.mode=f,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new t.Buf32(c),B.distcode=B.distdyn=new t.Buf32(h),B.sane=1,B.back=-1,p):i}function C(g){var B;return g&&g.state?((B=g.state).wsize=0,B.whave=0,B.wnext=0,_(g)):i}function I(g,B){var n,O;return g&&g.state?(O=g.state,B<0?(n=0,B=-B):(n=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?i:(O.window!==null&&O.wbits!==B&&(O.window=null),O.wrap=n,O.wbits=B,C(g))):i}function T(g,B){var n,O;return g?(O=new y,(g.state=O).window=null,(n=I(g,B))!==p&&(g.state=null),n):i}var S,P,R=!0;function M(g){if(R){var B;for(S=new t.Buf32(512),P=new t.Buf32(32),B=0;B<144;)g.lens[B++]=8;for(;B<256;)g.lens[B++]=9;for(;B<280;)g.lens[B++]=7;for(;B<288;)g.lens[B++]=8;for(m(v,g.lens,0,288,S,0,g.work,{bits:9}),B=0;B<32;)g.lens[B++]=5;m(w,g.lens,0,32,P,0,g.work,{bits:5}),R=!1}g.lencode=S,g.lenbits=9,g.distcode=P,g.distbits=5}function x(g,B,n,O){var G,j=g.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new t.Buf8(j.wsize)),O>=j.wsize?(t.arraySet(j.window,B,n-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(O<(G=j.wsize-j.wnext)&&(G=O),t.arraySet(j.window,B,n-O,G,j.wnext),(O-=G)?(t.arraySet(j.window,B,n-O,O,0),j.wnext=O,j.whave=j.wsize):(j.wnext+=G,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=G))),0}r.inflateReset=C,r.inflateReset2=I,r.inflateResetKeep=_,r.inflateInit=function(g){return T(g,15)},r.inflateInit2=T,r.inflate=function(g,B){var n,O,G,j,X,U,Y,D,z,J,V,Z,at,st,et,rt,lt,ut,mt,dt,o,q,F,E,b=0,L=new t.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return i;(n=g.state).mode===12&&(n.mode=13),X=g.next_out,G=g.output,Y=g.avail_out,j=g.next_in,O=g.input,U=g.avail_in,D=n.hold,z=n.bits,J=U,V=Y,q=p;t:for(;;)switch(n.mode){case f:if(n.wrap===0){n.mode=13;break}for(;z<16;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(2&n.wrap&&D===35615){L[n.check=0]=255&D,L[1]=D>>>8&255,n.check=e(n.check,L,2,0),z=D=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&D)<<8)+(D>>8))%31){g.msg="incorrect header check",n.mode=30;break}if((15&D)!=8){g.msg="unknown compression method",n.mode=30;break}if(z-=4,o=8+(15&(D>>>=4)),n.wbits===0)n.wbits=o;else if(o>n.wbits){g.msg="invalid window size",n.mode=30;break}n.dmax=1<<o,g.adler=n.check=1,n.mode=512&D?10:12,z=D=0;break;case 2:for(;z<16;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(n.flags=D,(255&n.flags)!=8){g.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){g.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=D>>8&1),512&n.flags&&(L[0]=255&D,L[1]=D>>>8&255,n.check=e(n.check,L,2,0)),z=D=0,n.mode=3;case 3:for(;z<32;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}n.head&&(n.head.time=D),512&n.flags&&(L[0]=255&D,L[1]=D>>>8&255,L[2]=D>>>16&255,L[3]=D>>>24&255,n.check=e(n.check,L,4,0)),z=D=0,n.mode=4;case 4:for(;z<16;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}n.head&&(n.head.xflags=255&D,n.head.os=D>>8),512&n.flags&&(L[0]=255&D,L[1]=D>>>8&255,n.check=e(n.check,L,2,0)),z=D=0,n.mode=5;case 5:if(1024&n.flags){for(;z<16;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}n.length=D,n.head&&(n.head.extra_len=D),512&n.flags&&(L[0]=255&D,L[1]=D>>>8&255,n.check=e(n.check,L,2,0)),z=D=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(U<(Z=n.length)&&(Z=U),Z&&(n.head&&(o=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),t.arraySet(n.head.extra,O,j,Z,o)),512&n.flags&&(n.check=e(n.check,O,Z,j)),U-=Z,j+=Z,n.length-=Z),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(U===0)break t;for(Z=0;o=O[j+Z++],n.head&&o&&n.length<65536&&(n.head.name+=String.fromCharCode(o)),o&&Z<U;);if(512&n.flags&&(n.check=e(n.check,O,Z,j)),U-=Z,j+=Z,o)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(U===0)break t;for(Z=0;o=O[j+Z++],n.head&&o&&n.length<65536&&(n.head.comment+=String.fromCharCode(o)),o&&Z<U;);if(512&n.flags&&(n.check=e(n.check,O,Z,j)),U-=Z,j+=Z,o)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;z<16;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(D!==(65535&n.check)){g.msg="header crc mismatch",n.mode=30;break}z=D=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),g.adler=n.check=0,n.mode=12;break;case 10:for(;z<32;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}g.adler=n.check=u(D),z=D=0,n.mode=11;case 11:if(n.havedict===0)return g.next_out=X,g.avail_out=Y,g.next_in=j,g.avail_in=U,n.hold=D,n.bits=z,2;g.adler=n.check=1,n.mode=12;case 12:if(B===5||B===6)break t;case 13:if(n.last){D>>>=7&z,z-=7&z,n.mode=27;break}for(;z<3;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}switch(n.last=1&D,z-=1,3&(D>>>=1)){case 0:n.mode=14;break;case 1:if(M(n),n.mode=20,B!==6)break;D>>>=2,z-=2;break t;case 2:n.mode=17;break;case 3:g.msg="invalid block type",n.mode=30}D>>>=2,z-=2;break;case 14:for(D>>>=7&z,z-=7&z;z<32;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if((65535&D)!=(D>>>16^65535)){g.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&D,z=D=0,n.mode=15,B===6)break t;case 15:n.mode=16;case 16:if(Z=n.length){if(U<Z&&(Z=U),Y<Z&&(Z=Y),Z===0)break t;t.arraySet(G,O,j,Z,X),U-=Z,j+=Z,Y-=Z,X+=Z,n.length-=Z;break}n.mode=12;break;case 17:for(;z<14;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(n.nlen=257+(31&D),D>>>=5,z-=5,n.ndist=1+(31&D),D>>>=5,z-=5,n.ncode=4+(15&D),D>>>=4,z-=4,286<n.nlen||30<n.ndist){g.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;z<3;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}n.lens[$[n.have++]]=7&D,D>>>=3,z-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},q=m(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,q){g.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;rt=(b=n.lencode[D&(1<<n.lenbits)-1])>>>16&255,lt=65535&b,!((et=b>>>24)<=z);){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(lt<16)D>>>=et,z-=et,n.lens[n.have++]=lt;else{if(lt===16){for(E=et+2;z<E;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(D>>>=et,z-=et,n.have===0){g.msg="invalid bit length repeat",n.mode=30;break}o=n.lens[n.have-1],Z=3+(3&D),D>>>=2,z-=2}else if(lt===17){for(E=et+3;z<E;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}z-=et,o=0,Z=3+(7&(D>>>=et)),D>>>=3,z-=3}else{for(E=et+7;z<E;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}z-=et,o=0,Z=11+(127&(D>>>=et)),D>>>=7,z-=7}if(n.have+Z>n.nlen+n.ndist){g.msg="invalid bit length repeat",n.mode=30;break}for(;Z--;)n.lens[n.have++]=o}}if(n.mode===30)break;if(n.lens[256]===0){g.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},q=m(v,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,q){g.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},q=m(w,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,q){g.msg="invalid distances set",n.mode=30;break}if(n.mode=20,B===6)break t;case 20:n.mode=21;case 21:if(6<=U&&258<=Y){g.next_out=X,g.avail_out=Y,g.next_in=j,g.avail_in=U,n.hold=D,n.bits=z,s(g,V),X=g.next_out,G=g.output,Y=g.avail_out,j=g.next_in,O=g.input,U=g.avail_in,D=n.hold,z=n.bits,n.mode===12&&(n.back=-1);break}for(n.back=0;rt=(b=n.lencode[D&(1<<n.lenbits)-1])>>>16&255,lt=65535&b,!((et=b>>>24)<=z);){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(rt&&(240&rt)==0){for(ut=et,mt=rt,dt=lt;rt=(b=n.lencode[dt+((D&(1<<ut+mt)-1)>>ut)])>>>16&255,lt=65535&b,!(ut+(et=b>>>24)<=z);){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}D>>>=ut,z-=ut,n.back+=ut}if(D>>>=et,z-=et,n.back+=et,n.length=lt,rt===0){n.mode=26;break}if(32&rt){n.back=-1,n.mode=12;break}if(64&rt){g.msg="invalid literal/length code",n.mode=30;break}n.extra=15&rt,n.mode=22;case 22:if(n.extra){for(E=n.extra;z<E;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}n.length+=D&(1<<n.extra)-1,D>>>=n.extra,z-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;rt=(b=n.distcode[D&(1<<n.distbits)-1])>>>16&255,lt=65535&b,!((et=b>>>24)<=z);){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if((240&rt)==0){for(ut=et,mt=rt,dt=lt;rt=(b=n.distcode[dt+((D&(1<<ut+mt)-1)>>ut)])>>>16&255,lt=65535&b,!(ut+(et=b>>>24)<=z);){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}D>>>=ut,z-=ut,n.back+=ut}if(D>>>=et,z-=et,n.back+=et,64&rt){g.msg="invalid distance code",n.mode=30;break}n.offset=lt,n.extra=15&rt,n.mode=24;case 24:if(n.extra){for(E=n.extra;z<E;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}n.offset+=D&(1<<n.extra)-1,D>>>=n.extra,z-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){g.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(Y===0)break t;if(Z=V-Y,n.offset>Z){if((Z=n.offset-Z)>n.whave&&n.sane){g.msg="invalid distance too far back",n.mode=30;break}at=Z>n.wnext?(Z-=n.wnext,n.wsize-Z):n.wnext-Z,Z>n.length&&(Z=n.length),st=n.window}else st=G,at=X-n.offset,Z=n.length;for(Y<Z&&(Z=Y),Y-=Z,n.length-=Z;G[X++]=st[at++],--Z;);n.length===0&&(n.mode=21);break;case 26:if(Y===0)break t;G[X++]=n.length,Y--,n.mode=21;break;case 27:if(n.wrap){for(;z<32;){if(U===0)break t;U--,D|=O[j++]<<z,z+=8}if(V-=Y,g.total_out+=V,n.total+=V,V&&(g.adler=n.check=n.flags?e(n.check,G,V,X-V):l(n.check,G,V,X-V)),V=Y,(n.flags?D:u(D))!==n.check){g.msg="incorrect data check",n.mode=30;break}z=D=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;z<32;){if(U===0)break t;U--,D+=O[j++]<<z,z+=8}if(D!==(4294967295&n.total)){g.msg="incorrect length check",n.mode=30;break}z=D=0}n.mode=29;case 29:q=1;break t;case 30:q=-3;break t;case 31:return-4;case 32:default:return i}return g.next_out=X,g.avail_out=Y,g.next_in=j,g.avail_in=U,n.hold=D,n.bits=z,(n.wsize||V!==g.avail_out&&n.mode<30&&(n.mode<27||B!==4))&&x(g,g.output,g.next_out,V-g.avail_out)?(n.mode=31,-4):(J-=g.avail_in,V-=g.avail_out,g.total_in+=J,g.total_out+=V,n.total+=V,n.wrap&&V&&(g.adler=n.check=n.flags?e(n.check,G,V,g.next_out-V):l(n.check,G,V,g.next_out-V)),g.data_type=n.bits+(n.last?64:0)+(n.mode===12?128:0)+(n.mode===20||n.mode===15?256:0),(J==0&&V===0||B===4)&&q===p&&(q=-5),q)},r.inflateEnd=function(g){if(!g||!g.state)return i;var B=g.state;return B.window&&(B.window=null),g.state=null,p},r.inflateGetHeader=function(g,B){var n;return g&&g.state?(2&(n=g.state).wrap)==0?i:((n.head=B).done=!1,p):i},r.inflateSetDictionary=function(g,B){var n,O=B.length;return g&&g.state?(n=g.state).wrap!==0&&n.mode!==11?i:n.mode===11&&l(1,B,O,0)!==n.check?-3:x(g,B,O,O)?(n.mode=31,-4):(n.havedict=1,p):i},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,d,r){var t=a("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(v,w,p,i,f,c,h,u){var y,_,C,I,T,S,P,R,M,x=u.bits,g=0,B=0,n=0,O=0,G=0,j=0,X=0,U=0,Y=0,D=0,z=null,J=0,V=new t.Buf16(16),Z=new t.Buf16(16),at=null,st=0;for(g=0;g<=15;g++)V[g]=0;for(B=0;B<i;B++)V[w[p+B]]++;for(G=x,O=15;1<=O&&V[O]===0;O--);if(O<G&&(G=O),O===0)return f[c++]=20971520,f[c++]=20971520,u.bits=1,0;for(n=1;n<O&&V[n]===0;n++);for(G<n&&(G=n),g=U=1;g<=15;g++)if(U<<=1,(U-=V[g])<0)return-1;if(0<U&&(v===0||O!==1))return-1;for(Z[1]=0,g=1;g<15;g++)Z[g+1]=Z[g]+V[g];for(B=0;B<i;B++)w[p+B]!==0&&(h[Z[w[p+B]]++]=B);if(S=v===0?(z=at=h,19):v===1?(z=l,J-=257,at=e,st-=257,256):(z=s,at=m,-1),g=n,T=c,X=B=D=0,C=-1,I=(Y=1<<(j=G))-1,v===1&&852<Y||v===2&&592<Y)return 1;for(;;){for(P=g-X,M=h[B]<S?(R=0,h[B]):h[B]>S?(R=at[st+h[B]],z[J+h[B]]):(R=96,0),y=1<<g-X,n=_=1<<j;f[T+(D>>X)+(_-=y)]=P<<24|R<<16|M|0,_!==0;);for(y=1<<g-1;D&y;)y>>=1;if(y!==0?(D&=y-1,D+=y):D=0,B++,--V[g]==0){if(g===O)break;g=w[p+h[B]]}if(G<g&&(D&I)!==C){for(X===0&&(X=G),T+=n,U=1<<(j=g-X);j+X<O&&!((U-=V[j+X])<=0);)j++,U<<=1;if(Y+=1<<j,v===1&&852<Y||v===2&&592<Y)return 1;f[C=D&I]=G<<24|j<<16|T-c|0}}return D!==0&&(f[T+D]=g-X<<24|64<<16|0),u.bits=G,0}},{"../utils/common":41}],51:[function(a,d,r){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,d,r){var t=a("../utils/common"),l=0,e=1;function s(b){for(var L=b.length;0<=--L;)b[L]=0}var m=0,v=29,w=256,p=w+1+v,i=30,f=19,c=2*p+1,h=15,u=16,y=7,_=256,C=16,I=17,T=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(p+2));s(x);var g=new Array(2*i);s(g);var B=new Array(512);s(B);var n=new Array(256);s(n);var O=new Array(v);s(O);var G,j,X,U=new Array(i);function Y(b,L,$,H,N){this.static_tree=b,this.extra_bits=L,this.extra_base=$,this.elems=H,this.max_length=N,this.has_stree=b&&b.length}function D(b,L){this.dyn_tree=b,this.max_code=0,this.stat_desc=L}function z(b){return b<256?B[b]:B[256+(b>>>7)]}function J(b,L){b.pending_buf[b.pending++]=255&L,b.pending_buf[b.pending++]=L>>>8&255}function V(b,L,$){b.bi_valid>u-$?(b.bi_buf|=L<<b.bi_valid&65535,J(b,b.bi_buf),b.bi_buf=L>>u-b.bi_valid,b.bi_valid+=$-u):(b.bi_buf|=L<<b.bi_valid&65535,b.bi_valid+=$)}function Z(b,L,$){V(b,$[2*L],$[2*L+1])}function at(b,L){for(var $=0;$|=1&b,b>>>=1,$<<=1,0<--L;);return $>>>1}function st(b,L,$){var H,N,K=new Array(h+1),Q=0;for(H=1;H<=h;H++)K[H]=Q=Q+$[H-1]<<1;for(N=0;N<=L;N++){var W=b[2*N+1];W!==0&&(b[2*N]=at(K[W]++,W))}}function et(b){var L;for(L=0;L<p;L++)b.dyn_ltree[2*L]=0;for(L=0;L<i;L++)b.dyn_dtree[2*L]=0;for(L=0;L<f;L++)b.bl_tree[2*L]=0;b.dyn_ltree[2*_]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function rt(b){8<b.bi_valid?J(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function lt(b,L,$,H){var N=2*L,K=2*$;return b[N]<b[K]||b[N]===b[K]&&H[L]<=H[$]}function ut(b,L,$){for(var H=b.heap[$],N=$<<1;N<=b.heap_len&&(N<b.heap_len&&lt(L,b.heap[N+1],b.heap[N],b.depth)&&N++,!lt(L,H,b.heap[N],b.depth));)b.heap[$]=b.heap[N],$=N,N<<=1;b.heap[$]=H}function mt(b,L,$){var H,N,K,Q,W=0;if(b.last_lit!==0)for(;H=b.pending_buf[b.d_buf+2*W]<<8|b.pending_buf[b.d_buf+2*W+1],N=b.pending_buf[b.l_buf+W],W++,H===0?Z(b,N,L):(Z(b,(K=n[N])+w+1,L),(Q=S[K])!==0&&V(b,N-=O[K],Q),Z(b,K=z(--H),$),(Q=P[K])!==0&&V(b,H-=U[K],Q)),W<b.last_lit;);Z(b,_,L)}function dt(b,L){var $,H,N,K=L.dyn_tree,Q=L.stat_desc.static_tree,W=L.stat_desc.has_stree,tt=L.stat_desc.elems,ct=-1;for(b.heap_len=0,b.heap_max=c,$=0;$<tt;$++)K[2*$]!==0?(b.heap[++b.heap_len]=ct=$,b.depth[$]=0):K[2*$+1]=0;for(;b.heap_len<2;)K[2*(N=b.heap[++b.heap_len]=ct<2?++ct:0)]=1,b.depth[N]=0,b.opt_len--,W&&(b.static_len-=Q[2*N+1]);for(L.max_code=ct,$=b.heap_len>>1;1<=$;$--)ut(b,K,$);for(N=tt;$=b.heap[1],b.heap[1]=b.heap[b.heap_len--],ut(b,K,1),H=b.heap[1],b.heap[--b.heap_max]=$,b.heap[--b.heap_max]=H,K[2*N]=K[2*$]+K[2*H],b.depth[N]=(b.depth[$]>=b.depth[H]?b.depth[$]:b.depth[H])+1,K[2*$+1]=K[2*H+1]=N,b.heap[1]=N++,ut(b,K,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],(function(ot,gt){var Bt,yt,Tt,ft,zt,Ut,wt=gt.dyn_tree,ge=gt.max_code,sn=gt.stat_desc.static_tree,ln=gt.stat_desc.has_stree,cn=gt.stat_desc.extra_bits,ye=gt.stat_desc.extra_base,Rt=gt.stat_desc.max_length,Ot=0;for(ft=0;ft<=h;ft++)ot.bl_count[ft]=0;for(wt[2*ot.heap[ot.heap_max]+1]=0,Bt=ot.heap_max+1;Bt<c;Bt++)Rt<(ft=wt[2*wt[2*(yt=ot.heap[Bt])+1]+1]+1)&&(ft=Rt,Ot++),wt[2*yt+1]=ft,ge<yt||(ot.bl_count[ft]++,zt=0,ye<=yt&&(zt=cn[yt-ye]),Ut=wt[2*yt],ot.opt_len+=Ut*(ft+zt),ln&&(ot.static_len+=Ut*(sn[2*yt+1]+zt)));if(Ot!==0){do{for(ft=Rt-1;ot.bl_count[ft]===0;)ft--;ot.bl_count[ft]--,ot.bl_count[ft+1]+=2,ot.bl_count[Rt]--,Ot-=2}while(0<Ot);for(ft=Rt;ft!==0;ft--)for(yt=ot.bl_count[ft];yt!==0;)ge<(Tt=ot.heap[--Bt])||(wt[2*Tt+1]!==ft&&(ot.opt_len+=(ft-wt[2*Tt+1])*wt[2*Tt],wt[2*Tt+1]=ft),yt--)}})(b,L),st(K,ct,b.bl_count)}function o(b,L,$){var H,N,K=-1,Q=L[1],W=0,tt=7,ct=4;for(Q===0&&(tt=138,ct=3),L[2*($+1)+1]=65535,H=0;H<=$;H++)N=Q,Q=L[2*(H+1)+1],++W<tt&&N===Q||(W<ct?b.bl_tree[2*N]+=W:N!==0?(N!==K&&b.bl_tree[2*N]++,b.bl_tree[2*C]++):W<=10?b.bl_tree[2*I]++:b.bl_tree[2*T]++,K=N,ct=(W=0)===Q?(tt=138,3):N===Q?(tt=6,3):(tt=7,4))}function q(b,L,$){var H,N,K=-1,Q=L[1],W=0,tt=7,ct=4;for(Q===0&&(tt=138,ct=3),H=0;H<=$;H++)if(N=Q,Q=L[2*(H+1)+1],!(++W<tt&&N===Q)){if(W<ct)for(;Z(b,N,b.bl_tree),--W!=0;);else N!==0?(N!==K&&(Z(b,N,b.bl_tree),W--),Z(b,C,b.bl_tree),V(b,W-3,2)):W<=10?(Z(b,I,b.bl_tree),V(b,W-3,3)):(Z(b,T,b.bl_tree),V(b,W-11,7));K=N,ct=(W=0)===Q?(tt=138,3):N===Q?(tt=6,3):(tt=7,4)}}s(U);var F=!1;function E(b,L,$,H){V(b,(m<<1)+(H?1:0),3),(function(N,K,Q,W){rt(N),J(N,Q),J(N,~Q),t.arraySet(N.pending_buf,N.window,K,Q,N.pending),N.pending+=Q})(b,L,$)}r._tr_init=function(b){F||((function(){var L,$,H,N,K,Q=new Array(h+1);for(N=H=0;N<v-1;N++)for(O[N]=H,L=0;L<1<<S[N];L++)n[H++]=N;for(n[H-1]=N,N=K=0;N<16;N++)for(U[N]=K,L=0;L<1<<P[N];L++)B[K++]=N;for(K>>=7;N<i;N++)for(U[N]=K<<7,L=0;L<1<<P[N]-7;L++)B[256+K++]=N;for($=0;$<=h;$++)Q[$]=0;for(L=0;L<=143;)x[2*L+1]=8,L++,Q[8]++;for(;L<=255;)x[2*L+1]=9,L++,Q[9]++;for(;L<=279;)x[2*L+1]=7,L++,Q[7]++;for(;L<=287;)x[2*L+1]=8,L++,Q[8]++;for(st(x,p+1,Q),L=0;L<i;L++)g[2*L+1]=5,g[2*L]=at(L,5);G=new Y(x,S,w+1,p,h),j=new Y(g,P,0,i,h),X=new Y(new Array(0),R,0,f,y)})(),F=!0),b.l_desc=new D(b.dyn_ltree,G),b.d_desc=new D(b.dyn_dtree,j),b.bl_desc=new D(b.bl_tree,X),b.bi_buf=0,b.bi_valid=0,et(b)},r._tr_stored_block=E,r._tr_flush_block=function(b,L,$,H){var N,K,Q=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=(function(W){var tt,ct=4093624447;for(tt=0;tt<=31;tt++,ct>>>=1)if(1&ct&&W.dyn_ltree[2*tt]!==0)return l;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return e;for(tt=32;tt<w;tt++)if(W.dyn_ltree[2*tt]!==0)return e;return l})(b)),dt(b,b.l_desc),dt(b,b.d_desc),Q=(function(W){var tt;for(o(W,W.dyn_ltree,W.l_desc.max_code),o(W,W.dyn_dtree,W.d_desc.max_code),dt(W,W.bl_desc),tt=f-1;3<=tt&&W.bl_tree[2*M[tt]+1]===0;tt--);return W.opt_len+=3*(tt+1)+5+5+4,tt})(b),N=b.opt_len+3+7>>>3,(K=b.static_len+3+7>>>3)<=N&&(N=K)):N=K=$+5,$+4<=N&&L!==-1?E(b,L,$,H):b.strategy===4||K===N?(V(b,2+(H?1:0),3),mt(b,x,g)):(V(b,4+(H?1:0),3),(function(W,tt,ct,ot){var gt;for(V(W,tt-257,5),V(W,ct-1,5),V(W,ot-4,4),gt=0;gt<ot;gt++)V(W,W.bl_tree[2*M[gt]+1],3);q(W,W.dyn_ltree,tt-1),q(W,W.dyn_dtree,ct-1)})(b,b.l_desc.max_code+1,b.d_desc.max_code+1,Q+1),mt(b,b.dyn_ltree,b.dyn_dtree)),et(b),H&&rt(b)},r._tr_tally=function(b,L,$){return b.pending_buf[b.d_buf+2*b.last_lit]=L>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&L,b.pending_buf[b.l_buf+b.last_lit]=255&$,b.last_lit++,L===0?b.dyn_ltree[2*$]++:(b.matches++,L--,b.dyn_ltree[2*(n[$]+w+1)]++,b.dyn_dtree[2*z(L)]++),b.last_lit===b.lit_bufsize-1},r._tr_align=function(b){V(b,2,3),Z(b,_,x),(function(L){L.bi_valid===16?(J(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)})(b)}},{"../utils/common":41}],53:[function(a,d,r){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,d,r){(function(t){(function(l,e){if(!l.setImmediate){var s,m,v,w,p=1,i={},f=!1,c=l.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(l);h=h&&h.setTimeout?h:l,s={}.toString.call(l.process)==="[object process]"?function(C){process.nextTick(function(){y(C)})}:(function(){if(l.postMessage&&!l.importScripts){var C=!0,I=l.onmessage;return l.onmessage=function(){C=!1},l.postMessage("","*"),l.onmessage=I,C}})()?(w="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",_,!1):l.attachEvent("onmessage",_),function(C){l.postMessage(w+C,"*")}):l.MessageChannel?((v=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){v.port2.postMessage(C)}):c&&"onreadystatechange"in c.createElement("script")?(m=c.documentElement,function(C){var I=c.createElement("script");I.onreadystatechange=function(){y(C),I.onreadystatechange=null,m.removeChild(I),I=null},m.appendChild(I)}):function(C){setTimeout(y,0,C)},h.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var I=new Array(arguments.length-1),T=0;T<I.length;T++)I[T]=arguments[T+1];var S={callback:C,args:I};return i[p]=S,s(p),p++},h.clearImmediate=u}function u(C){delete i[C]}function y(C){if(f)setTimeout(y,0,C);else{var I=i[C];if(I){f=!0;try{(function(T){var S=T.callback,P=T.args;switch(P.length){case 0:S();break;case 1:S(P[0]);break;case 2:S(P[0],P[1]);break;case 3:S(P[0],P[1],P[2]);break;default:S.apply(e,P)}})(I)}finally{u(C),f=!1}}}}function _(C){C.source===l&&typeof C.data=="string"&&C.data.indexOf(w)===0&&y(+C.data.slice(w.length))}})(typeof self>"u"?t===void 0?this:t:self)}).call(this,typeof Nt<"u"?Nt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(de)),de.exports}var zn=Pn();const On=Ge(zn);class en{constructor(){this.header=document.querySelector(".header"),this.lastScrollTop=0,this.scrollThreshold=10,this.isHidden=!1,this.isCompact=!1,this.scrollTimeout=null,this.touchStartY=0,this.init()}init(){if(!this.header){console.warn("Header element not found");return}this.setupEventListeners(),this.updateMainPadding()}setupEventListeners(){let A=!1;window.addEventListener("scroll",()=>{A||(requestAnimationFrame(()=>{this.handleScroll(),A=!1}),A=!0)},{passive:!0}),document.addEventListener("touchstart",a=>{this.touchStartY=a.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",a=>{const d=a.touches[0].clientY,r=this.touchStartY-d;Math.abs(r)>50&&(r>0?this.hideHeader():this.showHeader())},{passive:!0}),document.addEventListener("keydown",a=>{(a.key==="Home"||a.ctrlKey&&a.key==="Home")&&this.showHeader()}),this.header.addEventListener("focusin",()=>{this.showHeader()}),document.addEventListener("mousemove",a=>{a.clientY<100&&this.isHidden&&this.showHeader()}),window.addEventListener("resize",()=>{this.updateMainPadding()})}handleScroll(){const A=window.pageYOffset||document.documentElement.scrollTop;if(A<=0){this.showHeader(),this.setCompactMode(!1);return}A>200&&!this.isCompact?this.setCompactMode(!0):A<=100&&this.isCompact&&this.setCompactMode(!1);const a=A-this.lastScrollTop;Math.abs(a)>this.scrollThreshold&&(a>0?this.hideHeader():this.showHeader()),this.lastScrollTop=A}hideHeader(){this.isHidden||(this.isHidden=!0,this.header.classList.add("header-hidden"),this.updateMainPadding(),document.dispatchEvent(new CustomEvent("header:hidden")))}showHeader(){this.isHidden&&(this.isHidden=!1,this.header.classList.remove("header-hidden"),this.updateMainPadding(),document.dispatchEvent(new CustomEvent("header:shown")))}setCompactMode(A){this.isCompact!==A&&(this.isCompact=A,A?this.header.classList.add("header-compact"):this.header.classList.remove("header-compact"),this.updateMainPadding(),document.dispatchEvent(new CustomEvent("header:compact-changed",{detail:{compact:A}})))}updateMainPadding(){const A=document.querySelector(".main");if(!A)return;let a;this.isHidden?a="var(--spacing-xl)":this.isCompact?a="calc(var(--header-height-compact) + var(--spacing-xl))":a="calc(var(--header-height) + var(--spacing-xl))",A.style.paddingTop=a}forceShow(){this.showHeader(),this.setCompactMode(!1)}forceHide(){this.hideHeader()}destroy(){}}class nn{constructor(){this.init()}init(){this.setupSmoothScrolling(),this.setupFormEnhancements(),this.setupQRContainerEnhancements(),this.setupButtonEnhancements(),this.setupModalEnhancements(),this.setupAccessibilityEnhancements()}setupSmoothScrolling(){document.addEventListener("click",A=>{const a=A.target.closest('a[href^="#"]');if(a&&a.getAttribute("href")!=="#"){A.preventDefault();const d=document.querySelector(a.getAttribute("href"));d&&d.scrollIntoView({behavior:"smooth",block:"start"})}})}setupFormEnhancements(){const A=document.querySelectorAll("input, select, textarea");A.forEach(a=>{a.addEventListener("focus",()=>{a.parentElement.classList.add("focused")}),a.addEventListener("blur",()=>{a.value||a.parentElement.classList.remove("focused")}),a.value&&a.parentElement.classList.add("focused")}),A.forEach(a=>{a.addEventListener("invalid",()=>{a.classList.add("error")}),a.addEventListener("input",()=>{a.validity.valid&&a.classList.remove("error")})})}setupQRContainerEnhancements(){document.querySelectorAll(".qr-container").forEach(a=>{a.addEventListener("click",()=>{if(a.querySelector("img")){const d=a.parentElement.querySelector('[id$="-download"]');d&&!d.disabled&&d.click()}}),a.setAttribute("tabindex","0"),a.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),a.click())})})}setupButtonEnhancements(){if(document.querySelectorAll(".btn").forEach(a=>{a.addEventListener("click",d=>{const r=document.createElement("span"),t=a.getBoundingClientRect(),l=Math.max(t.width,t.height),e=d.clientX-t.left-l/2,s=d.clientY-t.top-l/2;r.style.cssText=`
          position: absolute;
          width: ${l}px;
          height: ${l}px;
          left: ${e}px;
          top: ${s}px;
          background: rgba(255, 255, 255, 0.3);
          border-radius: 50%;
          transform: scale(0);
          animation: ripple 600ms linear;
          pointer-events: none;
        `,a.style.position="relative",a.style.overflow="hidden",a.appendChild(r),setTimeout(()=>{r.remove()},600)})}),!document.getElementById("button-ripple-styles")){const a=document.createElement("style");a.id="button-ripple-styles",a.textContent=`
        @keyframes ripple {
          to {
            transform: scale(4);
            opacity: 0;
          }
        }
      `,document.head.appendChild(a)}}setupModalEnhancements(){document.querySelectorAll(".modal").forEach(a=>{a.addEventListener("click",r=>{r.target===a&&this.closeModal(a)}),document.addEventListener("keydown",r=>{r.key==="Escape"&&a.classList.contains("active")&&this.closeModal(a)});const d=a.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(d.length>0){const r=d[0],t=d[d.length-1];a.addEventListener("keydown",l=>{l.key==="Tab"&&(l.shiftKey&&document.activeElement===r?(l.preventDefault(),t.focus()):!l.shiftKey&&document.activeElement===t&&(l.preventDefault(),r.focus()))})}})}closeModal(A){A.classList.add("closing"),setTimeout(()=>{A.classList.remove("active","closing")},200)}setupAccessibilityEnhancements(){const A=document.querySelector(".skip-link");A&&A.addEventListener("click",d=>{d.preventDefault();const r=document.querySelector(A.getAttribute("href"));r&&(r.focus(),r.scrollIntoView())}),document.addEventListener("keydown",()=>{document.body.classList.add("using-keyboard")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("using-keyboard")});const a=document.createElement("div");a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true"),a.style.cssText=`
      position: absolute;
      left: -10000px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    `,document.body.appendChild(a),window.announceToScreenReader=d=>{a.textContent=d,setTimeout(()=>{a.textContent=""},1e3)}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",We):We();function We(){const k=new en,A=new nn;window.headerAutoHide=k,window.pageEnhancements=A,document.body.classList.add("enhanced"),console.log(" Professional TAK Onboarding Platform enhancements loaded")}const rn=document.createElement("style");rn.textContent=`
  .using-keyboard *:focus {
    outline: 3px solid var(--color-border-focus);
    outline-offset: 2px;
  }

  .enhanced {
    /* Add any global enhanced state styles here */
  }

  .form-group.focused label {
    color: var(--color-accent);
    transform: translateY(-2px);
    font-size: var(--font-size-sm);
  }

  .form-group input.error,
  .form-group select.error,
  .form-group textarea.error {
    border-color: var(--color-error);
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.25);
  }
`;document.head.appendChild(rn);const nt={STORAGE_KEY:"tak-profiles",TABS:{TAK_CONFIG:"tak-config",ATAK:"atak",ITAK:"itak",IMPORT:"import",PACKAGES:"packages",PROFILES:"profiles",HELP:"help"},PROTOCOLS:{HTTPS:"https",HTTP:"http",SSL:"ssl",TCP:"tcp",QUIC:"quic"},PREFS_JSON:"docs/prefs/atak-preferences.json",NOTIFICATION_DURATION:3e3,STATUS_DURATION:5e3,DEBOUNCE_DELAY:300,QR_SIZE:256,QR_MARGIN:2,PATTERNS:{HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,URL:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/}},ht={PROFILE_NAME_REQUIRED:"Profile name is required",PROFILE_EXISTS:"A profile with this name already exists. Do you want to overwrite it?",INVALID_HOSTNAME:"Please enter a valid hostname or IP address",INVALID_PORT:"Please enter a valid port number (1-65535)",INVALID_URL:"Please enter a valid URL",QR_GENERATION_ERROR:"Error generating QR code",DOWNLOAD_ERROR:"Error downloading QR code",CLIPBOARD_ERROR:"Error copying to clipboard",LOAD_PROFILES_ERROR:"Error loading profiles"},bt=(function(){let k=nt.TABS.TAK_CONFIG,A=k;function a(){document.querySelectorAll(".tab-btn").forEach(t=>{t.addEventListener("click",()=>{const l=t.dataset.tab;d(l)})}),on.init(),an.init()}function d(r){const t=document.querySelectorAll(".tab-btn"),l=document.querySelectorAll(".tab-pane");t.forEach(m=>{m.classList.remove("active"),m.setAttribute("aria-selected","false")});const e=document.querySelector(`[data-tab="${r}"]`);e&&(e.classList.add("active"),e.setAttribute("aria-selected","true")),l.forEach(m=>{m.classList.remove("active"),m.setAttribute("aria-hidden","true")});const s=document.getElementById(`${r}-tab`);s&&(s.classList.add("active"),s.setAttribute("aria-hidden","false")),(r===nt.TABS.ATAK||r===nt.TABS.ITAK)&&(r=nt.TABS.TAK_CONFIG),k=r,[nt.TABS.ATAK,nt.TABS.ITAK,nt.TABS.IMPORT].includes(r)&&(A=r)}return{init:a,switchTab:d,getCurrentTab:()=>k,getLastConfigTab:()=>A}})(),_t=(function(){async function k(e,s){const m=document.getElementById(s);if(!m)return null;if(!e)return m.innerHTML='<div class="qr-placeholder">Enter configuration details above</div>',m.setAttribute("aria-label","QR code will appear here when form is complete"),null;try{const v=await he.toCanvas(e,{width:nt.QR_SIZE,margin:nt.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}}),w=m.querySelector(".qr-placeholder");w&&w.remove();const p=m.querySelector("canvas");return p&&p.remove(),m.setAttribute("aria-label","QR code generated successfully"),v&&typeof v=="object"&&v.nodeType===1&&(v.style.opacity="0",m.appendChild(v),requestAnimationFrame(()=>{v.style.opacity="1"})),v}catch(v){return console.error(ht.QR_GENERATION_ERROR,v),it.showNotification(ht.QR_GENERATION_ERROR,"error"),null}}async function A(){const e=document.getElementById("atak-host")?.value||"",s=document.getElementById("atak-username")?.value||"",m=document.getElementById("atak-token")?.value||"";if(e.trim()&&s.trim()&&m.trim()){if(!St(e.trim())){it.showNotification(ht.INVALID_HOSTNAME,"error"),k(null,"atak-qr"),it.disableButtons("atak");return}const v=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(e.trim())}&username=${encodeURIComponent(s.trim())}&token=${encodeURIComponent(m.trim())}`;await k(v,"atak-qr"),it.enableButtons("atak");const w=document.getElementById("atak-qr");w&&(w.dataset.uri=v)}else await k(null,"atak-qr"),it.disableButtons("atak")}const a=ue(A,nt.DEBOUNCE_DELAY);async function d(){const e=document.getElementById("itak-description")?.value||"",s=document.getElementById("itak-url")?.value||"",m=document.getElementById("itak-port")?.value||"",v=document.getElementById("itak-protocol")?.value||"",w=pe(s),p=v===nt.PROTOCOLS.HTTPS?nt.PROTOCOLS.SSL:nt.PROTOCOLS.TCP;if([e,w,m].every(c=>c&&c.trim()!=="")){if(!St(w)){it.showNotification(ht.INVALID_HOSTNAME,"error"),k(null,"itak-qr"),it.disableButtons("itak");return}if(!Mt(m)){it.showNotification(ht.INVALID_PORT,"error"),k(null,"itak-qr"),it.disableButtons("itak");return}const c=`${e.trim()},${w},${m.trim()},${p}`;await k(c,"itak-qr"),it.enableButtons("itak");const h=document.getElementById("itak-qr");h&&(h.dataset.uri=c)}else await k(null,"itak-qr"),it.disableButtons("itak")}const r=ue(d,nt.DEBOUNCE_DELAY);async function t(){const e=document.getElementById("import-url")?.value||"";if(e.trim()){if(!Ln(e.trim())){it.showNotification(ht.INVALID_URL,"error"),k(null,"import-qr"),it.disableButtons("import");return}const s=`tak://com.atakmap.app/import?url=${encodeURIComponent(e.trim())}`;await k(s,"import-qr"),it.enableButtons("import");const m=document.getElementById("import-qr");m&&(m.dataset.uri=s)}else await k(null,"import-qr"),it.disableButtons("import")}const l=ue(t,nt.DEBOUNCE_DELAY);return{updateATAKQR:a,updateiTAKQR:r,updateImportQR:l,updateATAKQRCore:A,updateiTAKQRCore:d,updateImportQRCore:t}})(),Ct=(function(){let k="atak";function A(){document.querySelectorAll('input[name="tak-mode"]').forEach(f=>{f.addEventListener("change",c=>{c.target.checked&&a(c.target.value)})});const i=document.getElementById("tak-config-form");i&&i.querySelectorAll("input, select").forEach(c=>{const h=c.type==="checkbox"||c.tagName==="SELECT"?"change":"input";c.addEventListener(h,()=>t()),c.tagName==="SELECT"&&c.addEventListener("input",()=>t())}),a("atak"),setTimeout(()=>d(),100)}function a(p){k=p;const i=document.querySelector(".platform-icon"),f=document.querySelector(".platform-text"),c=document.getElementById("qr-description");p==="atak"?(i&&(i.textContent=""),f&&(f.textContent="Configuring for Android devices (ATAK)"),c&&(c.textContent="Scan this QR code with ATAK to automatically configure the connection"),document.querySelectorAll(".atak-fields").forEach(h=>h.style.display="block"),document.querySelectorAll(".itak-fields").forEach(h=>h.style.display="none")):(i&&(i.textContent=""),f&&(f.textContent="Configuring for iOS devices (iTAK)"),c&&(c.textContent="Scan this QR code with iTAK to automatically configure the connection"),document.querySelectorAll(".itak-fields").forEach(h=>h.style.display="block"),document.querySelectorAll(".atak-fields").forEach(h=>h.style.display="none"),setTimeout(()=>d(),100)),t()}function d(){const p=document.getElementById("tak-protocol"),i=document.getElementById("tak-port");p&&i&&(p.removeEventListener("change",r),p.addEventListener("change",r))}function r(p){const i=document.getElementById("tak-port");i&&(p.target.value==="quic"?i.value="8090":i.value==="8090"&&(i.value="8089"),t())}async function t(){k==="atak"?await l():await e()}async function l(){const p=document.getElementById("tak-host")?.value||"",i=document.getElementById("tak-username")?.value||"",f=document.getElementById("tak-token")?.value||"";let c="tak://com.atakmap.app/enroll?";const h=[];if(p.trim()&&(St(p.trim())||it.showNotification(ht.INVALID_HOSTNAME,"error"),h.push(`host=${encodeURIComponent(p.trim())}`)),i.trim()&&h.push(`username=${encodeURIComponent(i.trim())}`),f.trim()&&h.push(`token=${encodeURIComponent(f.trim())}`),h.length>0){c+=h.join("&"),await s(c,"tak-qr"),p.trim()&&i.trim()&&f.trim()?it.enableButtons("tak"):it.disableButtons("tak");const u=document.getElementById("tak-qr");u&&(u.dataset.uri=c)}else await s(null,"tak-qr"),it.disableButtons("tak")}async function e(){const p=document.getElementById("tak-description")?.value||"",i=document.getElementById("tak-host")?.value||"",f=document.getElementById("tak-port")?.value||"8089",c=document.getElementById("tak-protocol")?.value||"https";let h;if(c==="quic"?h="quic":c==="https"?h="ssl":h="tcp",i&&!St(i)&&it.showNotification(ht.INVALID_HOSTNAME,"error"),Mt(f)||it.showNotification(ht.INVALID_PORT,"error"),!(p.trim()&&i.trim())){await s(null,"tak-qr"),it.disableButtons("tak");return}const y=`${p.trim()},${i.trim()},${f},${h}`;await s(y,"tak-qr"),p.trim()&&i.trim()&&f.trim()&&St(i)&&Mt(f)?it.enableButtons("tak"):it.disableButtons("tak");const C=document.getElementById("tak-qr");C&&(C.dataset.uri=y)}async function s(p,i){const f=document.getElementById(i);if(!f)return null;if(!p)return f.innerHTML='<div class="qr-placeholder">Enter configuration details above</div>',f.setAttribute("aria-label","QR code will appear here when form is complete"),null;try{const c=await he.toCanvas(p,{width:nt.QR_SIZE,margin:nt.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}}),h=f.querySelector(".qr-placeholder");h&&h.remove();const u=f.querySelector("canvas");return u&&u.remove(),f.setAttribute("aria-label","QR code generated successfully"),c&&typeof c=="object"&&c.nodeType===1&&(c.style.opacity="0",f.appendChild(c),requestAnimationFrame(()=>{c.style.opacity="1"})),c}catch(c){return console.error(ht.QR_GENERATION_ERROR,c),it.showNotification(ht.QR_GENERATION_ERROR,"error"),null}}function m(){return k}function v(){return{mode:k,host:document.getElementById("tak-host")?.value||"",port:"8089",protocol:"ssl",username:k==="atak"&&document.getElementById("tak-username")?.value||"",token:k==="atak"&&document.getElementById("tak-token")?.value||"",description:k==="itak"&&document.getElementById("tak-description")?.value||""}}function w(p){if(p.host){const i=document.getElementById("tak-host");i&&(i.value=p.host)}if(p.mode){const i=document.getElementById(`mode-${p.mode}`);i&&(i.checked=!0,a(p.mode))}if(p.username){const i=document.getElementById("tak-username");i&&(i.value=p.username)}if(p.token){const i=document.getElementById("tak-token");i&&(i.value=p.token)}if(p.description){const i=document.getElementById("tak-description");i&&(i.value=p.description)}t()}return{init:A,switchMode:a,updateQR:t,getCurrentMode:m,getCurrentData:v,loadData:w}})(),on=(function(){let k=[];function A(){const x=document.getElementById("package-form");if(!x)return;const g=document.getElementById("package-deployment"),B=document.getElementById("client-cert-group");function n(){const U=document.getElementById("deployment-type-desc"),Y=document.getElementById("deployment-desc"),D=document.getElementById("package-username"),z=document.getElementById("package-password");if(g.value==="auto-enroll"){B.style.display="none";const J=D.parentElement.querySelector(".help-text"),V=z.parentElement.querySelector(".help-text");J&&(J.textContent="Username required for certificate enrollment from server"),V&&(V.textContent="Password required for certificate enrollment"),U&&(U.textContent="Auto-Enrollment:"),Y&&(Y.textContent="Package contains server info and CA certificate. Device will request its own certificate from server on first connection.")}else{B.style.display="";const J=D.parentElement.querySelector(".help-text"),V=z.parentElement.querySelector(".help-text");J&&(J.textContent="Username for server authentication (optional - uses certificate by default)"),V&&(V.textContent="Password for additional authentication layer (optional)"),U&&(U.textContent="Soft-Certificate:"),Y&&(Y.textContent="Package includes pre-generated client certificate. User imports and connects immediately.")}T()}g?.addEventListener("change",n),setTimeout(n,0),a();const O=document.getElementById("package-dropzone"),G=document.getElementById("pkg-extra"),j=document.getElementById("package-files-list");function X(){if(j){if(k.length===0){j.textContent="No files selected";return}j.textContent=`${k.length} file(s) selected`}}O?.addEventListener("click",()=>G?.click()),O?.addEventListener("dragover",U=>{U.preventDefault(),O.classList.add("dragover")}),O?.addEventListener("dragleave",()=>O.classList.remove("dragover")),O?.addEventListener("drop",U=>{U.preventDefault(),O.classList.remove("dragover"),U.dataTransfer&&(k.push(...Array.from(U.dataTransfer.files)),X())}),G?.addEventListener("change",U=>{const{target:Y}=U;Y?.files&&(k.push(...Array.from(Y.files)),X())}),document.getElementById("package-reset")?.addEventListener("click",()=>{k=[],G&&(G.value=""),X(),x.reset(),T()}),document.getElementById("package-build")?.addEventListener("click",P),C(),I()}function a(){const x=[{id:"package-host",validator:l,required:!0},{id:"package-port",validator:e,required:!0},{id:"package-protocol",validator:s,required:!0},{id:"package-username",validator:m,required:"conditional"},{id:"package-password",validator:v,required:"conditional"},{id:"package-callsign",validator:w,required:!1},{id:"package-team",validator:p,required:!1},{id:"package-role",validator:i,required:!1},{id:"pkg-ca",validator:f,required:!0},{id:"package-ca-pass",validator:c,required:!0},{id:"pkg-client",validator:h,required:"conditional"},{id:"package-client-pass",validator:u,required:"conditional"}];x.forEach(B=>{const n=document.getElementById(B.id);n&&(n.addEventListener("input",()=>d(B)),n.addEventListener("change",()=>d(B)),n.addEventListener("blur",()=>d(B)))});const g=document.getElementById("package-deployment");g&&g.addEventListener("change",()=>{x.forEach(d),t()}),setTimeout(()=>{x.forEach(d),t()},100)}function d(x){const g=document.getElementById(x.id),B=g?.closest(".form-group");if(!g||!B)return;const n=document.getElementById("package-deployment")?.value||"auto-enroll",O=r(x.required,n,x.id),G=g.type==="file"?g.files?.[0]:g.value,j=x.validator(G,n),X=!G||typeof G=="string"&&!G.trim();let U="neutral";return X&&O?U="invalid":X&&!O?U="neutral":!X&&j?U="valid":!X&&!j&&(U="invalid"),g.classList.remove("field-valid","field-invalid"),B.classList.remove("field-valid","field-invalid","has-validation"),U==="valid"?(g.classList.add("field-valid"),B.classList.add("field-valid","has-validation")):U==="invalid"&&(g.classList.add("field-invalid"),B.classList.add("field-invalid","has-validation")),U}function r(x,g,B){if(x===!0)return!0;if(x===!1)return!1;if(x==="conditional"){if(g==="auto-enroll")return["package-username","package-password"].includes(B);if(g==="soft-cert")return["pkg-client","package-client-pass"].includes(B)}return!1}function t(){const x=document.getElementById("package-deployment")?.value||"auto-enroll";[{id:"package-host",required:!0},{id:"package-port",required:!0},{id:"package-protocol",required:!0},{id:"package-username",required:x==="auto-enroll"},{id:"package-password",required:x==="auto-enroll"},{id:"package-callsign",required:!1},{id:"package-team",required:!1},{id:"package-role",required:!1},{id:"pkg-ca",required:!0},{id:"package-ca-pass",required:!0},{id:"pkg-client",required:x==="soft-cert"},{id:"package-client-pass",required:x==="soft-cert"}].forEach(({id:B,required:n})=>{const O=document.getElementById(B),G=O?.previousElementSibling?.tagName==="LABEL"?O.previousElementSibling:O?.closest(".form-group")?.querySelector("label");G&&(G.classList.remove("field-required","field-optional"),G.classList.add(n?"field-required":"field-optional"))})}function l(x){return x&&St(x)}function e(x){return x&&Mt(x)}function s(x){return x&&["http","https","quic"].includes(x)}function m(x,g){return g==="auto-enroll"?x&&x.trim().length>=2:!x||x.trim().length>=2}function v(x,g){return g==="auto-enroll"?x&&x.length>=4:!x||x.length>=4}function w(x){return!x||x.trim().length>=2&&x.trim().length<=20}function p(){return!0}function i(){return!0}function f(x){return x instanceof File&&x.name.endsWith(".p12")}function c(x){return x&&x.length>=1}function h(x,g){return g==="soft-cert"?x instanceof File&&x.name.endsWith(".p12"):!0}function u(x,g){return g==="soft-cert"?x&&x.length>=1:!0}function y(){const x=document.getElementById("package-deployment")?.value||"auto-enroll",g=["package-host","package-port","package-protocol","pkg-ca","package-ca-pass"];x==="auto-enroll"?g.push("package-username","package-password"):x==="soft-cert"&&g.push("pkg-client","package-client-pass");for(const B of g){const n=document.getElementById(B);if(!n)continue;let O=!1;if(n.type==="file"?O=n.files&&n.files.length>0:(n.tagName,O=n.value&&n.value.trim()!==""),_(B,x)&&!O)return!1}return!0}function _(x,g){const B=["package-host","package-port","package-protocol","pkg-ca","package-ca-pass"],n=["package-username","package-password"],O=["pkg-client","package-client-pass"];return!!(B.includes(x)||g==="auto-enroll"&&n.includes(x)||g==="soft-cert"&&O.includes(x))}function C(){if(!document.getElementById("package-name"))return;["package-host","package-username","package-callsign","package-client","package-team","package-role","package-protocol","package-port","package-deployment"].forEach(B=>{const n=document.getElementById(B);n&&(n.addEventListener("input",T),n.addEventListener("change",T))}),T()}function I(){const x=document.getElementById("package-protocol"),g=document.getElementById("package-port");if(!x||!g)return;function B(){const n=x.value;n==="quic"?g.value="8090":(n==="https"||n==="http")&&(g.value="8089"),T()}x.addEventListener("change",B)}function T(){const x=document.getElementById("package-name");if(!x)return;const g=document.getElementById("package-host")?.value?.trim()||"",B=document.getElementById("package-callsign")?.value?.trim()||"",n=document.getElementById("package-client")?.value||"atak",O=document.getElementById("package-team")?.value?.trim()||"",G=document.getElementById("package-role")?.value?.trim()||"",j=document.getElementById("package-protocol")?.value||"https";document.getElementById("package-port")?.value?.trim();const X=S({host:g,callsign:B,client:n,team:O,role:G,protocol:j}),U=x.value.trim();(!U||U==="TAK_Server.zip"||U.endsWith("-package.zip"))&&(x.value=X),x.placeholder=`Auto-generated: ${X}`}function S({host:x,callsign:g,client:B,team:n,role:O,protocol:G}){function j(z){return z?z.toLowerCase().replace(/[^a-z0-9-_.]/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,""):""}function X(z){return z?j(z):""}const U=[],Y=X(x);if(U.push(Y||"tak-server"),g?.trim()&&U.push(j(g)),U.push(B||"atak"),n?.trim()&&n.toLowerCase()!=="none"){const z=j(n);z&&U.push(z)}if(O?.trim()&&O.toLowerCase()!=="none"){const z=j(O);z&&U.push(z)}return G==="quic"?U.push("quic"):G==="http"&&U.push("tcp"),`${U.join("-")}-package.zip`}async function P(){try{const x=document.getElementById("package-client").value,g=document.getElementById("package-deployment").value,B=document.getElementById("package-host").value.trim(),n=document.getElementById("package-port").value.trim(),O=document.getElementById("package-protocol").value,G=document.getElementById("package-ca-pass").value,j=document.getElementById("package-client-pass").value,X=document.getElementById("package-username").value.trim(),U=document.getElementById("package-password").value.trim(),Y=document.getElementById("package-cache-creds").checked,D=document.getElementById("package-callsign").value.trim(),z=document.getElementById("package-team").value.trim(),J=document.getElementById("package-role").value.trim(),V=S({host:B,callsign:D,client:x,team:z,role:J,protocol:O,port:n}),at=document.getElementById("package-name").value.trim()||V,st=document.getElementById("pkg-ca").files?.[0]||null,et=document.getElementById("pkg-client").files?.[0]||null;if(!y()){(window.UIController||it).showNotification("Please fix the highlighted field errors before building the package","error");const E=document.querySelector(".field-invalid");E&&(E.scrollIntoView({behavior:"smooth",block:"center"}),E.focus());return}let rt;O==="quic"?rt="quic":rt=O==="https"?"ssl":"tcp";const lt=`${B}:${n}:${rt}`,ut=R({deployment:g,connectString:lt,caPass:G,clientPass:j,username:X,password:U,cacheCreds:Y,callsign:D,team:z,role:J,client:x}),mt=M({name:at,includeClient:g==="soft-cert",includeCA:!0,client:x}),dt=new On;x==="itak"?(dt.file("config.pref",ut),st&&dt.file("caCert.p12",st),g==="soft-cert"&&et&&dt.file("clientCert.p12",et),dt.folder("MANIFEST")?.file("MANIFEST.xml",mt)):(dt.folder("certs")?.file("config.pref",ut),st&&dt.folder("certs")?.file("caCert.p12",st),g==="soft-cert"&&et&&dt.folder("certs")?.file("clientCert.p12",et),dt.folder("MANIFEST")?.file("MANIFEST.xml",mt));for(const E of k)dt.file(E.name,E);const o=await dt.generateAsync({type:"blob"}),q=at||"TAK_Server.zip",F=document.createElement("a");F.href=URL.createObjectURL(o),F.download=q,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(F.href),(window.UIController||it).showNotification(`Package "${q}" downloaded successfully!`,"success")}catch(x){console.error(x),(window.UIController||it).showNotification("Error building data package","error")}}function R({deployment:x,connectString:g,caPass:B,clientPass:n,username:O,password:G,cacheCreds:j,callsign:X,team:U,role:Y,client:D}){const z=x==="soft-cert",V=D==="itak"?"":"certs",Z=g.endsWith(":quic"),at=[];at.push(`<entry key="caPassword${z?"":"0"}" class="class java.lang.String">${pt(B)}</entry>`),O&&at.push(`<entry key="username${z?"":"0"}" class="class java.lang.String">${pt(O)}</entry>`),O&&G&&(at.push(`<entry key="useAuth${z?"":"0"}" class="class java.lang.Boolean">true</entry>`),at.push(`<entry key="cacheCreds${z?"":"0"}" class="class java.lang.Boolean">${j}</entry>`));const st=z?`<entry key="clientPassword" class="class java.lang.String">${pt(n)}</entry>
    <entry key="certificateLocation" class="class java.lang.String">${V?`${V}/`:""}clientCert.p12</entry>`:'<entry key="enrollForCertificateWithTrust0" class="class java.lang.Boolean">true</entry>',et=at.join(`
    `),rt=[];X&&rt.push(`<entry key="locationCallsign" class="class java.lang.String">${pt(X)}</entry>`),U&&rt.push(`<entry key="locationTeam" class="class java.lang.String">${pt(U)}</entry>`),Y&&rt.push(`<entry key="atakRoleType" class="class java.lang.String">${pt(Y)}</entry>`);const lt=rt.length>0?`
    ${rt.join(`
    `)}`:"";return`<?xml version='1.0' encoding='ASCII' standalone='yes'?>
<preferences>
  <preference version="1" name="cot_streams">
    <entry key="count" class="class java.lang.Integer">1</entry>
    <entry key="description0" class="class java.lang.String">TAK Server</entry>
    <entry key="enabled0" class="class java.lang.Boolean">true</entry>
    <entry key="connectString0" class="class java.lang.String">${pt(g)}</entry>
    <entry key="caLocation${z?"":"0"}" class="class java.lang.String">${V?`${V}/`:""}caCert.p12</entry>
    ${et}
    ${st}
  </preference>
  <preference version="1" name="com.atakmap.app_preferences">
    <entry key="displayServerConnectionWidget" class="class java.lang.Boolean">true</entry>${Z?`
    <entry key="network_quic_enabled" class="class java.lang.Boolean">true</entry>`:""}${lt}
  </preference>
</preferences>`}function M({name:x,includeClient:g,includeCA:B,client:n}){const O=window.crypto.randomUUID?window.crypto.randomUUID():"00000000-0000-4000-8000-000000000000",G=n==="itak",j=G?"caCert.p12":"certs/caCert.p12",X=G?"clientCert.p12":"certs/clientCert.p12",U=G?"config.pref":"certs/config.pref";return`<MissionPackageManifest version="2">
  <Configuration>
    <Parameter name="uid" value="${O}"/>
    <Parameter name="name" value="${pt(x||"TAK_Server.zip")}"/>
    <Parameter name="onReceiveDelete" value="true"/>
  </Configuration>
  <Contents>
    <Content ignore="false" zipEntry="${U}"/>
    ${`<Content ignore="false" zipEntry="${j}"/>`}
    ${g?`<Content ignore="false" zipEntry="${X}"/>`:""}
  </Contents>
</MissionPackageManifest>`}return{init:A,buildPackage:P}})(),an=(function(){let k=null,A=null,a=[];const d={};function r(){const f=document.getElementById("pref-rows"),c=document.getElementById("pref-add"),h=document.getElementById("pref-version"),u=document.getElementById("pref-search"),y=document.getElementById("pref-add-known"),_=document.getElementById("pref-suggestions"),C=document.getElementById("pref-browse");!f||!c||(c.addEventListener("click",async()=>await t(f)),y?.addEventListener("click",async()=>{const I=u?.value?.trim();if(!I)return;await v();const T=a.find(S=>S.label===I||S.key===I||`${S.label} (${S.key})`===I);if(T)await t(f,T.key),u.value="";else{const S=Object.keys(d).find(P=>P===I||d[P].label===I);S&&(await t(f,S),u.value="")}}),h?.addEventListener("change",()=>{const I=h.value;w(I),_&&(_.style.display="none")}),h&&w(h.value),v(),u?.addEventListener("focus",async()=>{if(!_)return;await v();const I=[...a];Object.entries(d).forEach(([S,P])=>{I.find(R=>R.key===S)||I.push({key:S,label:P.label||S})}),I.sort((S,P)=>S.label.toLowerCase().localeCompare(P.label.toLowerCase()));const T=I.slice(0,500);T.length>0&&(_.innerHTML=T.map(S=>{const P=S.label.split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()).join(" ");return`
          <div class="pref-suggestion" data-key="${S.key}" style="padding:.5rem .75rem;cursor:pointer;display:flex;flex-direction:column;gap:.125rem;">
            <span style="font-weight:600;">${P}</span>
            <span style="font-size:.85em;color:var(--color-muted,#64748b);">${S.key}</span>
          </div>
        `}).join(""),_.style.display="block")}),u?.addEventListener("input",()=>{if(!_)return;const I=u.value.trim().toLowerCase();if(!I){u.dispatchEvent(new Event("focus"));return}const T=[...a];Object.entries(d).forEach(([P,R])=>{T.find(M=>M.key===P)||T.push({key:P,label:R.label||P})});const S=T.filter(P=>P.label.toLowerCase().includes(I)||P.key.toLowerCase().includes(I)).sort((P,R)=>P.label.toLowerCase().localeCompare(R.label.toLowerCase())).slice(0,50);if(S.length===0){_.style.display="none",_.innerHTML="";return}_.innerHTML=S.map(P=>{const R=P.label.split(" ").map(M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()).join(" ");return`
        <div class="pref-suggestion" data-key="${P.key}" style="padding:.5rem .75rem;cursor:pointer;display:flex;flex-direction:column;gap:.125rem;">
          <span style="font-weight:600;">${R}</span>
          <span style="font-size:.85em;color:var(--color-muted,#64748b);">${P.key}</span>
        </div>
      `}).join(""),_.style.display="block"}),_?.addEventListener("click",async I=>{const T=I.target.closest(".pref-suggestion");if(!T)return;const S=T.getAttribute("data-key")||"";S&&(u.value=S,_.style.display="none")}),C?.addEventListener("click",async()=>{if(!_)return;await v();const I=[...a];Object.entries(d).forEach(([S,P])=>{I.find(R=>R.key===S)||I.push({key:S,label:P.label||S})}),I.sort((S,P)=>S.label.toLowerCase().localeCompare(P.label.toLowerCase()));const T=I.slice(0,500);_.innerHTML=T.map(S=>{const P=S.label.split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()).join(" ");return`
        <div class="pref-suggestion" data-key="${S.key}" style="padding:.5rem .75rem;cursor:pointer;display:flex;flex-direction:column;gap:.125rem;">
          <span style="font-weight:600;">${P}</span>
          <span style="font-size:.85em;color:var(--color-muted,#64748b);">${S.key}</span>
        </div>
      `}).join(""),_.style.display="block",u?.focus()}),document.addEventListener("click",I=>{if(!_)return;_.contains(I.target)||u?.contains(I.target)||(_.style.display="none")}))}async function t(f,c=""){await v();const h=f.children.length+1,u=document.createElement("div");u.className="form-group";const y=d[c]||{},_=y.type||"string",C=y.default!==void 0?String(y.default):"",I=y.example||y.default||"value";u.innerHTML=`
      <div class="pref-row-grid">
        <div class="pref-field-with-hint">
          <label>Key ${h}</label>
          <input type="text" data-pref="key" placeholder="e.g., locationCallsign" value="${c}" />
          <div class="pref-key-hint" data-pref="key-label"></div>
          <div class="pref-description" data-pref="description"></div>
        </div>
        <div>
          <label>Type ${h}</label>
          <select data-pref="type">
            <option value="string" ${_==="string"?"selected":""}>string</option>
            <option value="boolean" ${_==="boolean"?"selected":""}>boolean</option>
            <option value="long" ${_==="long"||_==="int"?"selected":""}>long</option>
            <option value="int" ${_==="int"&&_!=="long"?"selected":""}>int</option>
          </select>
        </div>
        <div class="pref-value-field">
          <label>Value ${h}</label>
          <input type="text" data-pref="value" placeholder="${I}" value="${c?C:""}" />
          <div class="pref-value-hint" data-pref="value-hint"></div>
        </div>
        <button class="btn btn-secondary pref-remove-btn" type="button">Remove</button>
      </div>`,u.querySelector("button").addEventListener("click",()=>u.remove()),f.appendChild(u),u.querySelectorAll("input,select").forEach(P=>P.addEventListener("input",i)),u.querySelector('[data-pref="key"]')?.addEventListener("input",()=>{e(u),s(u)}),e(u),c&&s(u),i()}function l(f){if(!f)return"";const c=a.find(h=>h.key===f);return c?c.label.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):""}function e(f){const c=f.querySelector('[data-pref="key"]'),h=f.querySelector('[data-pref="key-label"]');if(!c||!h)return;const u=l(c.value.trim());h.textContent=u?`Label: ${u}`:""}function s(f){const c=f.querySelector('[data-pref="key"]'),h=f.querySelector('[data-pref="description"]'),u=f.querySelector('[data-pref="value-hint"]'),y=f.querySelector('[data-pref="type"]'),_=f.querySelector('[data-pref="value"]');if(!c)return;const C=c.value.trim(),I=d[C];if(I){if(h&&(h.textContent=I.description||"",h.style.display=I.description?"block":"none"),y&&I.type){const T=I.type==="int"?"int":I.type;y.value=T}if(u){let T="";I.validValues?Array.isArray(I.validValues)&&(typeof I.validValues[0]=="object"?T=`Options: ${I.validValues.map(S=>`${S.value}=${S.label}`).join(", ")}`:T=`Options: ${I.validValues.join(", ")}`):I.min!==void 0||I.max!==void 0?(T=`Range: ${I.min||0} - ${I.max||""}`,I.unit&&(T+=` ${I.unit}`)):I.type==="boolean"&&(T="Options: true, false"),u.textContent=T,u.style.display=T?"block":"none"}_&&!_.value&&I.default!==void 0&&(_.placeholder=String(I.default))}else h&&(h.textContent="",h.style.display="none"),u&&(u.textContent="",u.style.display="none")}async function m(){return k||(k=await(await fetch(nt.PREFS_JSON)).json(),k)}async function v(){if(A)return A;try{A=await(await fetch("docs/prefs/atak-preferences-detailed.json")).json(),A.preferences&&Object.values(A.preferences).forEach(c=>{c.forEach(h=>{d[h.key]=h})})}catch{A={preferences:{},categories:{}}}return A}async function w(f){try{a=((await m())?.preferencesByVersion||{})[f]||[]}catch{a=[]}}function p(){const f=document.getElementById("pref-rows");if(!f)return"";const c=[];return f.querySelectorAll('[data-pref="key"]').forEach((h,u)=>{const y=f.querySelectorAll('[data-pref="type"]')[u],_=f.querySelectorAll('[data-pref="value"]')[u],C=h.value.trim(),I=y.value.trim(),T=_.value.trim();if(C&&I&&T){const S=u+1;c.push(`key${S}=${encodeURIComponent(C)}`),c.push(`type${S}=${encodeURIComponent(I)}`),c.push(`value${S}=${encodeURIComponent(T)}`)}}),c.length===0?"":`tak://com.atakmap.app/preference?${c.join("&")}`}async function i(){const f=p(),c=document.getElementById("preferences-qr"),h=document.getElementById("preferences-download"),u=document.getElementById("preferences-copy");if(c){if(!f){c.innerHTML=`<div class="qr-placeholder">
        <div style="text-align: center;">
          <p style="margin-bottom: 10px;">No preferences added yet</p>
          <p style="font-size: 0.9em; color: var(--color-text-secondary);">
            Use the search above to find known preferences<br>
            or click "Add Preference" to manually add custom ones
          </p>
        </div>
      </div>`,h&&(h.disabled=!0),u&&(u.disabled=!0);return}try{const y=await he.toCanvas(f,{width:nt.QR_SIZE,margin:nt.QR_MARGIN});c.innerHTML="",c.appendChild(y),h&&(h.disabled=!1),u&&(u.disabled=!1)}catch{}}}return{init:r,buildPreferenceURI:p}})(),Pt=(function(){let k=[];function A(){a(),document.getElementById("save-profile")?.addEventListener("click",m),document.getElementById("load-profile")?.addEventListener("click",v)}function a(){try{k=JSON.parse(localStorage.getItem(nt.STORAGE_KEY)||"[]"),s()}catch(p){console.error(ht.LOAD_PROFILES_ERROR,p),k=[]}}function d(){try{localStorage.setItem(nt.STORAGE_KEY,JSON.stringify(k))}catch(p){console.error("Error saving profiles:",p),it.showNotification("Error saving profiles","error")}}function r(){const p=bt.getCurrentTab(),i=Ct.getCurrentData();if(i&&i.host)return{type:"tak-config",timestamp:Date.now(),savedTabs:["tak-config"],takConfig:i,atak:i.mode==="atak"?{host:i.host,username:i.username,token:i.token}:{},itak:i.mode==="itak"?{description:i.description,url:i.host,port:i.port,protocol:i.protocol}:{},import:{}};const f=[nt.TABS.ATAK,nt.TABS.ITAK,nt.TABS.IMPORT].includes(p)?p:bt.getLastConfigTab(),c={host:document.getElementById("atak-host")?.value||"",username:document.getElementById("atak-username")?.value||"",token:document.getElementById("atak-token")?.value||""},h={description:document.getElementById("itak-description")?.value||"",url:document.getElementById("itak-url")?.value||"",port:document.getElementById("itak-port")?.value||"",protocol:document.getElementById("itak-protocol")?.value||""},u={url:document.getElementById("import-url")?.value||""},y=[];return Object.values(c).some(_=>_)&&y.push(nt.TABS.ATAK),Object.values(h).some(_=>_)&&y.push(nt.TABS.ITAK),u.url&&y.push(nt.TABS.IMPORT),{type:f,timestamp:Date.now(),savedTabs:y,atak:c,itak:h,import:u}}function t(){const p=document.getElementById("profile-name"),i=document.getElementById("profile-description"),f=p?.value.trim()||"",c=i?.value.trim()||"",h=pt(f),u=pt(c);if(!h){it.showNotification(ht.PROFILE_NAME_REQUIRED,"error");return}const y=r();y.name=h,y.description=u;const _=k.findIndex(C=>C.name===h);if(_>=0){if(!confirm(ht.PROFILE_EXISTS))return;k[_]=y}else k.push(y);d(),s(),Lt.closeModal(),it.showNotification("Profile saved successfully!","success")}function l(p){if(!p)return;const i=p.atak||{host:p.host,username:p.username,token:p.token},f=p.itak||{description:p.description,url:p.url,port:p.port,protocol:p.protocol},c=p.import||{url:p.url},h=[];if(p.takConfig?(Ct.loadData(p.takConfig),h.push(nt.TABS.TAK_CONFIG)):i&&(i.host||i.username||i.token)?(Ct.loadData({mode:"atak",host:i.host||"",username:i.username||"",token:i.token||"",port:"8089",protocol:"https"}),h.push(nt.TABS.TAK_CONFIG)):f&&(f.description||f.url||f.port||f.protocol)&&(Ct.loadData({mode:"itak",host:f.url||"",port:f.port||"8089",protocol:f.protocol||"https",description:f.description||""}),h.push(nt.TABS.TAK_CONFIG)),c&&c.url){const y=document.getElementById("import-url");y&&(y.value=c.url||""),_t.updateImportQRCore(),h.push(nt.TABS.IMPORT)}let u=p.savedTabs?.[0]||p.type||h[0];(u===nt.TABS.ATAK||u===nt.TABS.ITAK||u==="atak"||u==="itak")&&(u=nt.TABS.TAK_CONFIG),u&&bt.switchTab(u),Lt.closeModal(),it.showNotification("Profile loaded successfully!","success")}function e(p){confirm(`Are you sure you want to delete the profile "${p}"?`)&&(k=k.filter(i=>i.name!==p),d(),s(),it.showNotification("Profile deleted successfully!","success"))}function s(){const p=document.getElementById("profiles-container");if(p){if(k.length===0){p.innerHTML='<p style="grid-column: 1 / -1; color: var(--text-secondary);">No saved profiles yet. Create your first profile to get started.</p>';return}p.innerHTML=k.map(i=>{const f=JSON.stringify(i).replace(/"/g,"&quot;"),c=i.savedTabs?.length?i.savedTabs.join(", ").toUpperCase():(i.type||"").toUpperCase();return`
        <div class="profile-card">
          <h4>${pt(i.name)}</h4>
          <p>${pt(i.description||"No description")}</p>
          <p><strong>Tabs:</strong> ${c}</p>
          <p><strong>Created:</strong> ${new Date(i.timestamp).toLocaleDateString()}</p>
          <div class="profile-actions">
            <button class="btn btn-primary" onclick="ProfileManager.loadProfile(${f})">Load</button>
            <button class="btn btn-secondary" onclick="ProfileManager.deleteProfile('${pt(i.name)}')">Delete</button>
          </div>
        </div>
      `}).join("")}}function m(){const p=document.getElementById("modal-title"),i=document.getElementById("profile-name"),f=document.getElementById("profile-description");p&&(p.textContent="Save Profile");const c=r();i&&(i.value=c.name||""),f&&(f.value=c.description||""),Lt.openModal()}function v(){const p=document.getElementById("modal-title");p&&(p.textContent="Load Profile"),w(),Lt.openModal()}function w(){const p=document.querySelector(".modal-body");if(!p||k.length===0){p&&(p.innerHTML="<p>No profiles available to load.</p>");return}p.innerHTML=`
      <div class="profile-selection">
        <p>Select a profile to load:</p>
        <div class="profile-list" role="list">
          ${k.map(i=>{const f=JSON.stringify(i).replace(/"/g,"&quot;");return`
              <div class="profile-item" role="listitem" tabindex="0"
                   onclick="ProfileManager.loadProfile(${f})"
                   onkeypress="if(event.key === 'Enter') ProfileManager.loadProfile(${f})">
                <h4>${pt(i.name)}</h4>
                <p>${pt(i.description||"No description")}</p>
                <span class="profile-type">${i.type.toUpperCase()}</span>
              </div>
            `}).join("")}
        </div>
      </div>
    `}return{init:A,saveProfile:t,loadProfile:l,deleteProfile:e}})(),it=(function(){function k(l,e="info"){document.querySelectorAll(".notification").forEach(v=>v.remove());const m=document.createElement("div");m.className=`notification notification-${e}`,m.textContent=l,m.setAttribute("role","alert"),m.setAttribute("aria-live","polite"),document.body.appendChild(m),m.offsetHeight,m.classList.add("notification-show"),setTimeout(()=>{m.classList.remove("notification-show"),m.classList.add("notification-hide"),setTimeout(()=>m.remove(),300)},nt.NOTIFICATION_DURATION)}function A(l){const e=document.getElementById(`${l}-data-status`);e&&(e.style.display="flex",setTimeout(()=>{e.style.display="none"},nt.STATUS_DURATION))}function a(l){const e=document.getElementById(`${l}-download`),s=document.getElementById(`${l}-copy`);e&&(e.disabled=!1),s&&(s.disabled=!1)}function d(l){const e=document.getElementById(`${l}-download`),s=document.getElementById(`${l}-copy`);e&&(e.disabled=!0),s&&(s.disabled=!0)}async function r(l){const s=document.getElementById(`${l}-qr`)?.querySelector("canvas");if(s)try{const m=document.createElement("a");m.download=`tak-${l}-config.png`,m.href=s.toDataURL(),m.click()}catch(m){console.error(ht.DOWNLOAD_ERROR,m),k(ht.DOWNLOAD_ERROR,"error")}}async function t(l){let e="";if(l==="tak"){const s=document.getElementById("tak-qr");if(s&&s.dataset.uri){const{uri:m}=s.dataset;e=m}}else switch(l){case nt.TABS.ATAK:{const s=document.getElementById("atak-host")?.value||"",m=document.getElementById("atak-username")?.value||"",v=document.getElementById("atak-token")?.value||"";e=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(s.trim())}&username=${encodeURIComponent(m.trim())}&token=${encodeURIComponent(v.trim())}`;break}case nt.TABS.ITAK:{const s=document.getElementById("itak-description")?.value||"",m=document.getElementById("itak-url")?.value||"",v=document.getElementById("itak-port")?.value||"",w=document.getElementById("itak-protocol")?.value||"",p=pe(m),i=w===nt.PROTOCOLS.HTTPS?nt.PROTOCOLS.SSL:nt.PROTOCOLS.TCP;e=`${s.trim()},${p},${v.trim()},${i}`;break}case nt.TABS.IMPORT:{const s=document.getElementById("import-url")?.value||"";e=`tak://com.atakmap.app/import?url=${encodeURIComponent(s.trim())}`;break}case nt.TABS.PREFERENCES:{e=an.buildPreferenceURI();break}}try{await navigator.clipboard.writeText(e),k("URI copied to clipboard!","success")}catch(s){console.error(ht.CLIPBOARD_ERROR,s),k(ht.CLIPBOARD_ERROR,"error")}}return{showNotification:k,showDataStatus:A,enableButtons:a,disableButtons:d,downloadQR:r,copyURI:t}})(),me=(function(){function k(){A(),a(),d(),r(),e()}function A(){const s=document.getElementById("atak-form");if(!s)return;s.querySelectorAll("input").forEach(v=>{v.setAttribute("aria-required","true"),v.addEventListener("input",()=>_t.updateATAKQR())})}function a(){const s=document.getElementById("itak-form");if(!s)return;s.querySelectorAll("input, select").forEach(v=>{v.setAttribute("aria-required","true"),v.addEventListener("input",()=>_t.updateiTAKQR())})}function d(){const s=document.getElementById("import-form");if(!s)return;s.querySelectorAll("input").forEach(v=>{v.setAttribute("aria-required","true"),v.addEventListener("input",()=>_t.updateImportQR())})}function r(){document.addEventListener("click",s=>{const{target:m}=s;if(m.id?.endsWith("-download")){const v=m.id.replace("-download","");it.downloadQR(v)}if(m.id?.endsWith("-copy")){const v=m.id.replace("-copy","");it.copyURI(v)}})}function t(){const s=document.getElementById("atak-host")?.value||"",m=document.getElementById("atak-username")?.value||"",v=document.getElementById("atak-token")?.value||"";if(s.trim()){let w=s.trim(),p=nt.PROTOCOLS.HTTPS;try{if(s.trim().includes("://")){const c=new URL(s.trim()),{hostname:h,protocol:u}=c;w=h,p=u.replace(":","")}}catch{}const i=document.getElementById("itak-url"),f=document.getElementById("itak-protocol");i&&(i.value=`${p}://${w}`),f&&(f.value=p)}if(m.trim()){const w=document.getElementById("itak-username");w&&(w.value=m.trim())}if(v.trim()){const w=document.getElementById("itak-token");w&&(w.value=v.trim())}_t.updateiTAKQR()}function l(){const s=document.getElementById("itak-url")?.value||"",m=document.getElementById("itak-username")?.value||"",v=document.getElementById("itak-token")?.value||"";if(s.trim()){const w=pe(s);if(w){const p=document.getElementById("atak-host");p&&(p.value=w)}}if(m.trim()){const w=document.getElementById("atak-username");w&&(w.value=m.trim())}if(v.trim()){const w=document.getElementById("atak-token");w&&(w.value=v.trim())}_t.updateATAKQR()}function e(){const s=document.getElementById("package-protocol");s&&s.addEventListener("change",()=>{})}return{init:k,populateiTAKFromATAK:t,populateATAKFromiTAK:l}})(),Lt=(function(){let k;function A(){if(k=document.getElementById("profile-modal"),!k)return;const r=k.querySelector(".modal-close"),t=document.getElementById("modal-cancel"),l=document.getElementById("modal-save");r?.addEventListener("click",d),t?.addEventListener("click",d),l?.addEventListener("click",Pt.saveProfile),k.addEventListener("click",e=>{e.target===k&&d()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&k.classList.contains("active")&&d()})}function a(){k&&(k.classList.add("active"),k.setAttribute("aria-modal","true"),setTimeout(()=>{k.querySelector("input, select, textarea")?.focus()},100))}function d(){k&&(k.classList.remove("active"),k.removeAttribute("aria-modal"))}return{init:A,openModal:a,closeModal:d}})(),Nn=(function(){function k(){document.getElementById("help-button")?.addEventListener("click",()=>bt.switchTab(nt.TABS.HELP)),document.addEventListener("keydown",d=>{d.key==="F1"&&(d.preventDefault(),bt.switchTab(nt.TABS.HELP))}),document.getElementById("back-to-top")?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}return{init:k}})(),Dn=(()=>{const k="tak-theme";function A(){const t=localStorage.getItem(k);return t||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function a(t){document.documentElement.setAttribute("data-theme",t),localStorage.setItem(k,t);const l=t==="dark"?"#1e293b":"#1e40af";document.querySelector('meta[name="theme-color"]')?.setAttribute("content",l)}function d(){const l=A()==="light"?"dark":"light";a(l)}function r(){const t=A();a(t),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem(k)||a(e.matches?"dark":"light")});const l=document.getElementById("theme-toggle");l&&l.addEventListener("click",d)}return{init:r,toggleTheme:d,getCurrentTheme:A,applyTheme:a}})(),Ve=(()=>{const k="appVersion",A="1.0.0";async function a(){const d=document.getElementById("app-version"),r=document.getElementById("update-notice");d&&(d.textContent=`v${A}`);const t=localStorage.getItem(k);t&&t!==A&&it.showNotification(`Updated to version ${A}`,"success"),localStorage.setItem(k,A);try{const e=await(await fetch("version.json",{cache:"no-store"})).json();r&&(r.style.display=e.version!==A?"inline":"none")}catch{}}return{init:a}})();async function Fn(){Dn.init(),window.headerAutoHide=new en,window.pageEnhancements=new nn,bt.init(),Ct.init(),me.init(),Pt.init(),Lt.init(),Nn.init(),Ve.init(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{Ve.init()})}document.addEventListener("DOMContentLoaded",Fn);window.updateATAKQR=_t.updateATAKQRCore;window.updateiTAKQR=_t.updateiTAKQRCore;window.updateImportQR=_t.updateImportQRCore;window.populateiTAKFromATAK=me.populateiTAKFromATAK;window.populateATAKFromiTAK=me.populateATAKFromiTAK;window.transferDataFromATAKToiTAK=()=>bt.switchTab(nt.TABS.ITAK);window.transferDataFromiTAKToATAK=()=>bt.switchTab(nt.TABS.ATAK);window.showNotification=it.showNotification;window.loadProfile=Pt.loadProfile;window.deleteProfile=Pt.deleteProfile;window.ProfileManager=Pt;window.PackageBuilder=on;window.UIController=it;window.showDataStatus=it.showDataStatus;window.switchTab=bt.switchTab;window.TAKConfigManager=Ct;
